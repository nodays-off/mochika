"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9636],{1654:(t,e,a)=>{a.d(e,{i:()=>b});var i=a(44089),s=a(55437),n=a(92184),r=a(59051),l=a(25826);let d=l.Ay$.object({assets:l.Ay$.object({UserID:l.Ay$.number(),id:l.Ay$.number(),batch_id:l.Ay$.string(),uuid:l.Ay$.string(),status:l.Ay$.number(),title:l.Ay$.string(),service_id:l.Ay$.number(),parameters:l.Ay$.string(),archived_at:l.Ay$.string().nullable(),created_at:l.Ay$.string(),is_public:l.Ay$.boolean(),category:l.Ay$.number(),style_id:l.Ay$.number(),endpoint_id:l.Ay$.number(),ref_service_id:l.Ay$.number().nullable(),version:l.Ay$.number(),updated_at:l.Ay$.string()}),status:l.Ay$.string()}),o=l.Ay$.object({message:l.Ay$.string()});var c=a(21520),u=a(36270),p=a(53326),_=a(10279);let m=l.Ay$.intersection(l.Ay$.object({id:l.Ay$.string()}),_.K);class b{async getAllAssets(t){let e=await (0,n.hZ)(async()=>await this._client.get(s.j.ASSETS_STATUS,{params:(0,c.U_)(t)})),a=(0,r.b)(c.ZZ,e.data),i=(0,c.pO)(a);return{...e,data:i}}async uploadUserAsset(t){let e=await (0,n.hZ)(async()=>await this._client.post(s.j.ASSETS_UPLOAD,(0,u.j)(t))),a=((t,e)=>{let{asyncBucketUrl:a}=e;return{id:t.id,url:(0,p.G)("/processed/".concat(t.id),a),status:"success"}})((0,r.b)(m,e.data),{asyncBucketUrl:this._asyncBucketUrl});return{...e,data:a}}async updateAsset(t){var e,a,l;let o=await (0,n.hZ)(async()=>await this._client.put("".concat(s.j.ASSETS,"/").concat(t.assetUuid),(0,i._R)(t.data))),c={assets:{UserID:(e=(0,r.b)(d,o.data)).assets.UserID,id:e.assets.id,batch_id:e.assets.batch_id,uuid:e.assets.uuid,status:e.assets.status,title:e.assets.title,service_id:e.assets.service_id,parameters:e.assets.parameters,archived_at:null!=(a=e.assets.archived_at)?a:null,created_at:e.assets.created_at,is_public:e.assets.is_public,category:e.assets.category,style_id:e.assets.style_id,endpoint_id:e.assets.endpoint_id,ref_service_id:null!=(l=e.assets.ref_service_id)?l:null,version:e.assets.version,updated_at:e.assets.updated_at},status:e.status};return{...o,data:c}}async deleteAsset(t){let e=await (0,n.hZ)(async()=>await this._client.delete("".concat(s.j.ASSETS,"/").concat(t.assetUuid))),a={message:(0,r.b)(o,e.data).message};return{...e,data:a}}constructor({client:t,asyncBucketUrl:e}){this._client=t,this._asyncBucketUrl=e}}},3793:(t,e,a)=>{a.d(e,{DC:()=>b,tg:()=>A,uw:()=>h});var i=a(25826),s=a(55437),n=a(32162),r=a(31625),l=a(12995),d=a(65762),o=a(59051),c=a(37328);let u=c.HZ.omit({metadata:!0}),p=i.Ay$.object({placeholderUuid:i.Ay$.string().optional(),createdFromSettings:u,promptWithoutManipulation:i.Ay$.string().optional(),sourceThumbnail:i.Ay$.string().optional()}),_=i.Ay$.object({style_id:i.Ay$.string(),clientVersion:i.Ay$.string().optional().default("0"),metadata:r.p}),m=i.Ay$.object({generation:n.aB,inputs:n.aB,thumbnail:n.aB.optional()}).nullable().optional(),b=i.Ay$.enum([s.j.ENHANCE_VIDEO_UPLOAD]);i.Ay$.literal(d.A.VIDEO_UPSCALE);let h=t=>(t=>{let e=(t=>{var e;let a=(0,c.gP)(t.createdFromSettings);return{...t,createdFromSettings:a,promptWithoutManipulation:null!=(e=t.promptWithoutManipulation)?e:a.prompt}})((0,o.b)(p,JSON.parse(t.metadata),{placeholderUuid:void 0,createdFromSettings:{style_id:"-1",clientVersion:"-1",prompt:"Unknown",enhanced_prompt:"Unknown",aspect_ratio:"1:1",is_enhance:"0",enhancer_id:void 0,variation:c.FE.TEXT_TO_VIDEO}}));return{styleId:t.style_id,clientVersion:Number(t.clientVersion),metadata:e}})((0,o.b)(_,t)),A=t=>(t=>{if(!t)return{generation:"",inputs:[],thumbnail:""};let e=(0,l._)(t.generation);return{generation:e,inputs:t.inputs,thumbnail:(0,l._)(t.thumbnail)||e}})((0,o.b)(m,t))},8070:(t,e,a)=>{a.d(e,{YD:()=>m,cb:()=>b,dr:()=>c,ki:()=>o});var i=a(79536),s=a(32162),n=a(78311),r=a(20408);let l=i.gM("format",[i.Ik({id:i.Yj().optional(),format:i.eu("url"),content:i.Yj(),status:s.Wx.optional()}).catchall(i.L5()),i.Ik({id:i.Yj().optional(),format:i.eu("base64"),content:i.Yj(),status:s.Wx.optional()}).catchall(i.L5()),i.Ik({id:i.Yj().optional(),format:i.eu("blob"),content:i.Nl(Blob),status:s.Wx.optional()}).catchall(i.L5()),i.Ik({id:i.Yj().optional(),format:i.eu("text"),content:i.Yj(),status:s.Wx.optional()}).catchall(i.L5()),i.Ik({id:i.Yj().optional(),format:i.eu("file"),content:i.NJ(),status:s.Wx.optional()}).catchall(i.L5())]),d=i.k5(r.VV),o=i.g1(i.Yj(),l).refine(t=>Object.keys(t).every(t=>d.safeParse(t).success),{message:"All keys must be valid AcceptableGenerationParams"}),c=i._H({outputs:o.optional().nullable(),errorMessage:i.Yj().optional().nullable(),name:i.Yj(),isModel:i.zM().optional(),version:i.ai(),results:i.YO(o).optional().nullable(),selectedResultIndex:i.ai().optional().nullable(),settings:i.g1(i.Yj(),i.bz()).optional().nullable(),status:i.k5(r.M7),url:i.Ik({endpoint:i.Yj(),version:i.Yj()}),behavior:i.k5(r._Y),shouldExecute:i.zM().optional()}),u=i._H({id:i.Yj(),type:i.k5(r.jM),data:c,position:i.Ik({x:i.ai(),y:i.ai()}),selected:i.zM().optional(),dragging:i.zM().optional(),draggable:i.zM().optional(),connectable:i.zM().optional(),deletable:i.zM().optional(),dragHandle:i.Yj().optional(),width:i.ai().optional(),height:i.ai().optional(),measured:i.Ik({width:i.ai().optional(),height:i.ai().optional()}).optional()}),p=i._H({id:i.Yj(),source:i.Yj(),target:i.Yj(),type:i.k5(n.y),sourceHandle:i.Yj().optional().nullable(),targetHandle:i.Yj().optional().nullable(),animated:i.zM().optional(),selected:i.zM().optional(),deletable:i.zM().optional(),selectable:i.zM().optional(),data:i.g1(i.Yj(),i.bz()).optional()}),_=i.Ik({x:i.ai(),y:i.ai(),zoom:i.ai()}),m=i.Ik({nodes:i.YO(u).min(0),edges:i.YO(p).min(0)}),b=m.extend({viewport:_})},10279:(t,e,a)=>{a.d(e,{K:()=>n});var i=a(25826),s=a(75093);let n=i.Ay$.object({status:i.Ay$.literal(s.R.SUCCESS)});i.Ay$.array(n)},20408:(t,e,a)=>{a.d(e,{M7:()=>r,VV:()=>d,_Y:()=>l,iV:()=>i,jM:()=>n,jc:()=>s});let i={CROP:"crop",RESIZE:"resize",BLUR:"blur",FILTERS:"filters",PREVIEW:"preview",EXTRACT_VIDEO_FRAME:"extract-video-frame",LEVELS:"levels",IMPORT:"import",EXPORT:"export",UPSCALE_IMAGE:"upscale-image",UPSCALE_VIDEO:"upscale-video",REMOVE_BACKGROUND:"remove-background",THREE_D:"3d",MASK_EXTRACTOR:"mask-extractor",VIDEO_TRIMMER:"video-trimmer",STICKER:"sticker",SECTION:"section",ARBITARY_TEXT:"arbitary-text",FREE_DRAW:"free-draw",ROUTER:"router",PROMPT_CONCATENATOR:"prompt-concatenator"},s={SHAPE:"shape",LINE:"line",STICKY_NOTE:"sticky-note"},n={IMAGE:"image",PROMPT:"prompt",TEXT:"text",VIDEO:"video",GHOST:"ghost",...i,...s},r={DEFAULT:"default",PROCESSING:"processing",ERROR:"error"},l={STATIC:"static",DYNAMIC:"dynamic"},d={[n.TEXT]:"prompt",[n.IMAGE]:"image",[n.VIDEO]:"video",[n.PROMPT]:"prompt",[n.GHOST]:"ghost",[n.REMOVE_BACKGROUND]:"image",[n.LEVELS]:"file",[n.BLUR]:"file",[n.FILTERS]:"file",[n.CROP]:"file",[n.RESIZE]:"file",[n.VIDEO_TRIMMER]:"video",[n.ROUTER]:"output",[n.IMPORT]:"file",[n.EXTRACT_VIDEO_FRAME]:"image"}},25169:(t,e,a)=>{a.d(e,{DY:()=>u,Qw:()=>_,nj:()=>c});var i=a(5633),s=a.n(i),n=a(25826),r=a(89933),l=a(67037),d=a(8070);let o=l.qn.extend({graph:n.Ay$.union([d.cb,n.Ay$.object({})])}),c=l.dz.extend({pages:n.Ay$.array(o)}),u=t=>!s()(t),p=t=>({id:t.id,name:t.name,thumbnail:t.thumbnail?(0,r.t)(t.thumbnail):"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,graph:u(t.graph)?t.graph:{nodes:[],edges:[],viewport:{x:0,y:0,zoom:1}}}),_=t=>{let e=t.pages.map(p);return{id:t.id,name:t.name,thumbnail:t.thumbnail||"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,metadata:t.metadata||{},pages:e}}},42203:(t,e,a)=>{a.d(e,{A4:()=>b,Ei:()=>p,Fb:()=>m,U:()=>h,fT:()=>_});var i=a(25826),s=a(12331),n=a(55437),r=a(32162),l=a(31625),d=a(12995),o=a(65762),c=a(59051);let u=i.Ay$.object({width:i.Ay$.number().default(512),height:i.Ay$.number().default(512)}),p=i.Ay$.object({file_ext:i.Ay$.string(),ref_service:i.Ay$.string(),thumbnail_ext:i.Ay$.string(),title:i.Ay$.string(),metadata:l.p}),_=i.Ay$.object({generation:r.aB,thumbnail:r.aB});i.Ay$.enum([n.j.ASSETS_UPLOAD]),i.Ay$.enum([o.A.IMAGE_USER_UPLOAD]);let m=t=>({generation:(0,d._)(t.generation),thumbnail:(0,d._)(t.thumbnail)}),b=t=>{let e=(0,c.b)(_,t.url),a=(0,c.b)(p,t.settings),i=m(e),r=(t=>{let e=(0,c.b)(u,JSON.parse(t.metadata),{width:512,height:512});return{fileExt:t.file_ext,refService:t.ref_service,thumbnailExt:t.thumbnail_ext,title:t.title,metadata:e}})(a);return{...t,settings:r,url:i,tag:o.A.IMAGE_USER_UPLOAD,service:s.z1.USER,endpoint:n.j.ASSETS_UPLOAD,refService:s.z1.IMAGE}},h=t=>({assets:t.assets.map(t=>{try{return b(t)}catch(t){return null}}).filter(t=>null!=t)})},46660:(t,e,a)=>{a.d(e,{q:()=>r});var i=a(25826),s=a(37328),n=a(3793);let r=i.Ay$.union([s.K6,n.DC])},51500:(t,e,a)=>{a.d(e,{JY:()=>m,cA:()=>d,kG:()=>p,oA:()=>l,pj:()=>u,sg:()=>_});var i=a(79536),s=a(20408),n=a(59051),r=a(8070);let l={PENDING:"pending",PROCESSING:"processing",FINISHED:"finished",ERROR:"error"},d=new Set([l.PROCESSING,l.PENDING]),o=r.dr.pick({url:!0,settings:!0,outputs:!0,shouldExecute:!0}).partial().optional().nullable(),c=i.Ik({id:i.Yj(),node_id:i.Yj(),status:i.k5(l),type:i.k5(s.jM),data:o,output:i.g1(i.Yj(),i.L5()).optional().nullable()}),u=i.Ik({id:i.Yj(),page_id:i.Yj(),project_id:i.Yj(),status:i.k5({PENDING:"pending",PROCESSING:"processing",FINISHED:"finished",ERROR:"error"}).or(i.eu("")),subtasks:i.YO(c),created_at:i.Yj(),updated_at:i.Yj()}),p=i.YO(u),_=t=>t.map(m),m=t=>{let e=t.subtasks.filter(A).map(b).filter(t=>null!==t);return{id:t.id,pageId:t.page_id,projectId:t.project_id,status:t.status,subtasks:e,createdAt:t.created_at,updatedAt:t.updated_at}},b=t=>{try{if(!t.output||d.has(t.status))return{id:t.id,nodeId:t.node_id,status:t.status,type:t.type,data:t.data,output:t.output};let e=(0,n.b)(r.ki,t.output);return{id:t.id,nodeId:t.node_id,status:t.status,type:t.type,data:t.data,output:e}}catch(e){return console.log("response",t),console.error("Failed to parse output",e),null}},h=new Set(Object.values({TEXT:"text",IMAGE:"image",VIDEO:"video",REMOVE_BACKGROUND:"remove-background"})),A=t=>{var e;return h.has(t.type)&&!!(null==(e=t.data)?void 0:e.shouldExecute)}},59995:(t,e,a)=>{a.d(e,{Jo:()=>m,P_:()=>p,es:()=>h,mU:()=>_,s1:()=>b});var i=a(25826),s=a(12331),n=a(55437),r=a(32162),l=a(31625),d=a(12995),o=a(65762),c=a(59051);let u=i.Ay$.object({width:i.Ay$.number().default(512),height:i.Ay$.number().default(512)});i.Ay$.enum([n.j.ASSETS_UPLOAD]),i.Ay$.enum([o.A.VIDEO_USER_UPLOAD]);let p=i.Ay$.object({generation:r.aB,thumbnail:r.aB}),_=i.Ay$.object({file_ext:i.Ay$.string(),ref_service:i.Ay$.string(),thumbnail_ext:i.Ay$.string(),title:i.Ay$.string(),metadata:l.p}),m=t=>({generation:(0,d._)(t.generation),thumbnail:(0,d._)(t.thumbnail)}),b=t=>{let e=(0,c.b)(p,t.url),a=(0,c.b)(_,t.settings),i=m(e),r=(t=>{let e=(0,c.b)(u,JSON.parse(t.metadata),{width:512,height:512});return{fileExt:t.file_ext,refService:t.ref_service,thumbnailExt:t.thumbnail_ext,title:t.title,metadata:e}})(a);return{...t,settings:r,url:i,tag:o.A.VIDEO_USER_UPLOAD,service:s.z1.USER,endpoint:n.j.ASSETS_UPLOAD,refService:s.z1.VIDEO}},h=t=>({assets:t.assets.map(t=>{try{return b(t)}catch(t){return null}}).filter(t=>null!=t)})},62956:(t,e,a)=>{a.d(e,{d:()=>u,h:()=>c});var i=a(55437),s=a(46660),n=a(59051),r=a(20941),l=a(12331),d=a(3793),o=a(65762);let c=t=>{let e=(0,n.b)(s.q,t.endpoint);switch(e){case i.j.GENERATE_VIDEO_ASYNC:return(0,r.J)({...t,endpoint:e});case i.j.ENHANCE_VIDEO_UPLOAD:return(t=>{let e=(0,d.uw)(t.settings),a=(0,d.tg)(t.url);return{...t,settings:e,url:a,tag:o.A.VIDEO_UPSCALE,service:l.z1.VIDEO}})({...t,endpoint:e})}},u=t=>({assets:t.assets.map(t=>{try{return c(t)}catch(t){return null}}).filter(t=>null!=t)})},67037:(t,e,a)=>{a.d(e,{S0:()=>l,dz:()=>m,mY:()=>_,n0:()=>u,qn:()=>c,uB:()=>o,vm:()=>p});var i=a(223),s=a.n(i),n=a(79536),r=a(89933);let l={PUBLIC:"public",PERSONAL:"personal",TEAM:"team"},d=n.Ik({user_id:n.Yj(),name:n.Yj(),username:n.Yj(),email:n.Yj()}),o=n.Ik({id:n.Yj(),name:n.Yj(),thumbnail:n.Yj().nullable(),description:n.Yj().nullable(),created_at:n.Yj(),updated_at:n.Yj(),metadata:n.g1(n.Yj(),n.L5()).nullable(),folder_id:n.Yj(),visibility:n.k5(l),owner:d.optional().nullable()}),c=n.Ik({id:n.Yj(),name:n.Yj(),thumbnail:n.Yj().nullable(),description:n.Yj().nullable(),created_at:n.Yj(),updated_at:n.Yj()}),u=t=>{let e=s()(t.updated_at).valueOf();return{id:t.id,name:t.name,thumbnail:t.thumbnail?(0,r.t)(t.thumbnail,e):"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at}},p=t=>{let e=s()(t.updated_at).valueOf();return{id:t.id,name:t.name,thumbnail:t.thumbnail?(0,r.t)(t.thumbnail,e):"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,metadata:t.metadata||{},folderId:t.folder_id,visibility:t.visibility,owner:t.owner?{id:t.owner.user_id,name:t.owner.name,username:t.owner.username,email:t.owner.email}:void 0}},_=t=>{let e=s()(t.updated_at).valueOf();return{id:t.id,name:t.name,thumbnail:t.thumbnail?(0,r.t)(t.thumbnail,e):"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,metadata:t.metadata||{}}},m=o.omit({visibility:!0,folder_id:!0,owner:!0})},78311:(t,e,a)=>{a.d(e,{y:()=>i});let i={DEFAULT:"default",CUSTOM:"custom"}},89933:(t,e,a)=>{a.d(e,{t:()=>i});let i=(t,e)=>"".concat(t).concat(t.includes("?")?"&":"?","_cb=").concat(null!=e?e:Date.now())},99636:(t,e,a)=>{a.d(e,{J1:()=>J,gP:()=>X,D_:()=>H});var i=a(89329),s=a(55437),n=a(92184),r=a(59051),l=a(79536);let d=l.Ik({id:l.Yj(),name:l.Yj(),thumbnail:l.Yj().optional().nullable(),description:l.Yj().optional().nullable(),created_at:l.Yj(),updated_at:l.Yj()});var o=a(25826),c=a(67037);let u=c.uB.extend({pages:o.Ay$.array(c.qn)}),p=o.Ay$.object({id:o.Ay$.string()}),_=l.Ik({status:l.Yj()}),m=l.Ik({status:l.Yj()}),b=l.Ik({status:l.Yj()}),h=l.Ik({status:l.Yj()}),A=l.Ik({status:l.Yj()});var y=a(8070);let g=o.Ay$.union([o.Ay$.object({graph:y.cb}),o.Ay$.object({})]),j=o.Ay$.array(c.qn),I=c.uB.extend({pages:o.Ay$.array(c.qn)});var E=a(39929),v=a.n(E);let S=o.Ay$.array(c.uB).nullable();var O=a(51500);let U=o.Ay$.union([o.Ay$.array(O.pj),o.Ay$.null()]);var f=a(25169);let $=o.Ay$.array(c.dz),Y=l.YO(O.pj);var w=a(36270);let R=l.Ik({status:l.Yj()}),T=o.Ay$.object({status:o.Ay$.string()}),k=l.Ik({status:l.Yj()}),P=l.Ik({status:l.Yj()});class D{async createProject(t){let e=await (0,n.hZ)(async()=>this._client.post("".concat(this._baseUrl,"/project"),(t=>{let e=new FormData;return e.append("title",t.title),t.folderId&&e.append("folder_id",t.folderId),t.projectId&&e.append("project_id",t.projectId),t.templateId&&e.append("template_id",t.templateId),t.metadata&&e.append("metadata",JSON.stringify(t.metadata)),e})(t))),a=(t=>{let e=t.pages.map(c.n0);return{id:t.id,name:t.name,thumbnail:t.thumbnail||"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,pages:e,metadata:t.metadata||{},folderId:t.folder_id,visibility:t.visibility}})((0,r.b)(u,e.data));return{...e,data:a}}async createPage(t){var e,a,i;let s=await (0,n.hZ)(async()=>this._client.post("".concat(this._baseUrl,"/project/").concat(t.projectId,"/page"),(t=>{let e=new FormData;return e.append("title",t.title),e})(t))),l={id:(e=(0,r.b)(d,s.data)).id,name:e.name,thumbnail:null!=(a=e.thumbnail)?a:"",description:null!=(i=e.description)?i:"",createdAt:e.created_at,updatedAt:e.updated_at};return{...s,data:l}}async getProjects(t){let e=await (0,n.hZ)(async()=>{var e,a,i;return this._client.get("".concat(this._baseUrl,"/project"),{params:{parent_id:null!=(e=t.parentId)?e:void 0,org_id:null!=(a=t.orgId)?a:void 0,is_personal:null!=(i=t.isPersonal)?i:void 0}})}),a=(t=>{var e;let a=null!=(e=null==t?void 0:t.map(c.vm))?e:[];return v()(a,["updatedAt"],["desc"])})((0,r.b)(S,e.data));return{...e,data:a}}async getPages(t){let e=await (0,n.hZ)(async()=>this._client.get("".concat(this._baseUrl,"/project/").concat(t.projectId,"/page"))),a=(0,r.b)(j,e.data).map(c.n0);return{...e,data:a}}async updateProject(t){let{signal:e,...a}=t,i=await (0,n.hZ)(async()=>this._client.patch("".concat(this._baseUrl,"/project/").concat(a.projectId),(0,w.j)(a),{signal:e})),s={status:(0,r.b)(k,i.data).status};return{...i,data:s}}async updatePage(t){let{signal:e,...a}=t,i=await (0,n.hZ)(async()=>this._client.patch("".concat(this._baseUrl,"/project/").concat(a.projectId,"/page/").concat(a.pageId),(0,w.j)(a),{signal:e})),s={status:(0,r.b)(R,i.data).status};return{...i,data:s}}async deleteProject(t){let{signal:e,...a}=t,i=await (0,n.hZ)(async()=>this._client.delete("".concat(this._baseUrl,"/project/").concat(a.projectId),{signal:e})),s={status:(0,r.b)(m,i.data).status};return{...i,data:s}}async deletePage(t){let{signal:e,...a}=t,i=await (0,n.hZ)(async()=>this._client.delete("".concat(this._baseUrl,"/project/").concat(a.projectId,"/page/").concat(a.pageId),{signal:e})),s={status:(0,r.b)(_,i.data).status};return{...i,data:s}}async getPageGraph(t){let e=await (0,n.hZ)(async()=>this._client.get("".concat(this._baseUrl,"/project/").concat(t.projectId,"/page/").concat(t.pageId,"/graph"))),a=(t=>{if(0===Object.keys(t).length)return{nodes:[],edges:[],viewport:{x:0,y:0,zoom:1}};let e=t.graph;return{nodes:e.nodes,edges:e.edges,viewport:e.viewport}})((0,r.b)(g,e.data));return{...e,data:a}}async updatePageGraph(t){let e=await (0,n.hZ)(async()=>this._client.put("".concat(this._baseUrl,"/project/").concat(t.projectId,"/page/").concat(t.pageId,"/graph"),{nodes:t.graph.nodes,edges:t.graph.edges,viewport:t.graph.viewport})),a={status:(0,r.b)(T,e.data).status};return{...e,data:a}}async getProjectById(t){let e=await (0,n.hZ)(async()=>this._client.get("".concat(this._baseUrl,"/project/").concat(t.projectId))),a=(t=>{let e=t.pages.map(c.n0);return{id:t.id,name:t.name,thumbnail:t.thumbnail||"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,pages:e,metadata:t.metadata||{},folderId:t.folder_id,visibility:t.visibility}})((0,r.b)(I,e.data));return{...e,data:a}}async createTemplate(t){let e=await (0,n.hZ)(async()=>this._client.post("".concat(this._baseUrl,"/template"),(t=>{let e=new FormData;return e.append("project_id",t.projectId),e})(t))),a={id:(0,r.b)(p,e.data).id};return{...e,data:a}}async getTemplates(){let t=await (0,n.hZ)(async()=>this._client.get("".concat(this._baseUrl,"/template"))),e=(t=>{let e=t.map(c.mY);return v()(e,["createdAt"],["desc"])})((0,r.b)($,t.data));return{...t,data:e}}async getTemplateById(t){let e=await (0,n.hZ)(async()=>this._client.get("".concat(this._baseUrl,"/template/").concat(t.templateId))),a=(0,r.b)(f.nj,e.data);console.log({parsedResponse:a});let i=(0,f.Qw)(a);return{...e,data:i}}async updateTemplate(t){let e=await (0,n.hZ)(async()=>this._client.patch("".concat(this._baseUrl,"/template/").concat(t.templateId),(0,w.j)(t))),a={status:(0,r.b)(P,e.data).status};return{...e,data:a}}async deleteTemplate(t){let{signal:e,...a}=t,i=await (0,n.hZ)(async()=>this._client.delete("".concat(this._baseUrl,"/template/").concat(a.templateId),{signal:e})),s={status:(0,r.b)(A,i.data).status};return{...i,data:s}}async runTask(t){let e=await (0,n.hZ)(async()=>this._client.post("".concat(this._baseUrl,"/task/run"),{pageId:t.pageId,projectId:t.projectId,orgId:t.orgId,nodes:t.nodes,edges:t.edges,executionCount:t.executionCount})),a=(0,r.b)(Y,e.data).map(O.JY);return{...e,data:a}}async getTasks(t){var e;let a=await (0,n.hZ)(async()=>{var e,a,i;return this._client.get("".concat(this._baseUrl,"/task/status"),{params:{taskId:null!=(e=t.taskId)?e:void 0,pageId:null!=(a=t.pageId)?a:void 0,projectId:null!=(i=t.projectId)?i:void 0}})}),i=null===(e=(0,r.b)(U,a.data))?[]:e.map(O.JY);return{...a,data:i}}async deleteTask(t){let{signal:e,...a}=t,i=await (0,n.hZ)(async()=>this._client.delete("".concat(this._baseUrl,"/task"),{signal:e,params:{id:a.taskIds.join(",")}})),s={status:(0,r.b)(h,i.data).status};return{...i,data:s}}async deleteSubtask(t){let{signal:e,...a}=t,i=await (0,n.hZ)(async()=>this._client.delete("".concat(this._baseUrl,"/subtask"),{signal:e,params:{id:a.subtaskIds.join(",")}})),s={status:(0,r.b)(b,i.data).status};return{...i,data:s}}constructor(t){this._baseUrl=s.j.FLOW,this._client=t.client}}var M=a(12331),L=a(1654),N=a(32162),x=a(65762),C=a(42203),z=a(59995);let V=o.Ay$.object({width:o.Ay$.number().default(512),height:o.Ay$.number().default(512),duration:o.Ay$.number().optional(),aspectRatio:o.Ay$.string().optional(),extension:o.Ay$.string().optional()}),G=t=>{let e=(0,r.b)(V,JSON.parse(t.metadata),{width:512,height:512,duration:void 0,aspectRatio:void 0,extension:void 0});return{fileExt:t.file_ext,refService:t.ref_service,thumbnailExt:t.thumbnail_ext,title:t.title,metadata:e}};var B=a(61508),Z=a(62956);class F extends L.i{async getAllFlowUserGenerations(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=await this.getAllAssets({service:[M.z1.IMAGE,M.z1.VIDEO],refService:M.z1.IMAGINE_FLOWS,...t}),a={assets:e.data.assets.map(t=>{try{switch(t.service){case M.z1.IMAGE:return(0,B.r)(t);case M.z1.VIDEO:return(0,Z.h)(t);default:return null}}catch(t){return null}}).filter(t=>null!=t)};return{...e,data:a}}async getAllFlowUserAssets(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=await this.getAllAssets({service:[M.z1.USER],refService:M.z1.IMAGINE_FLOWS,...t}),a={assets:e.data.assets.map(t=>{try{switch(t.category){case N.em.IMAGE:let e=(0,r.b)(C.fT,t.url),a=(0,r.b)(C.Ei,t.settings),i=(0,C.Fb)(e),n=G(a);return{...t,settings:n,url:i,tag:x.A.IMAGE_USER_UPLOAD,service:M.z1.USER,endpoint:s.j.ASSETS_UPLOAD,refService:M.z1.IMAGINE_FLOWS};case N.em.VIDEO:let l=(0,r.b)(z.P_,t.url),d=(0,r.b)(z.mU,t.settings),o=(0,z.Jo)(l),c=G(d);return{...t,settings:c,url:o,tag:x.A.VIDEO_USER_UPLOAD,service:M.z1.USER,endpoint:s.j.ASSETS_UPLOAD,refService:M.z1.IMAGINE_FLOWS};default:return null}}catch(t){return null}}).filter(t=>null!=t)};return{...e,data:a}}async uploadFlowUserAsset(t){let e=await this.uploadUserAsset({...t,ref_service:M.eB[M.z1.IMAGINE_FLOWS],metadata:JSON.stringify(t.metadata)}),a=e.data;return{...e,data:a}}constructor(t){super(t)}}var W=a(19533);let H=(0,a(48164).d)(i.A.create({baseURL:W.h.NEXT_PUBLIC_ANPU_API_URL}),{request:!1,response:!1}),J=new F({client:H,asyncBucketUrl:W.h.NEXT_PUBLIC_ASYNC_BUCKET_URL}),X=new D({client:H})}}]);