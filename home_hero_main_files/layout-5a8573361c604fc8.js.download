(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{757:(e,t,a)=>{"use strict";a.d(t,{O:()=>c});var s=a(54568),n=a(7620),r=a(51785),i=a(54140),l=a(33029),o=a(98720),d=a(78848);let c=(0,r.F)(e=>{let{call:t,title:a,description:r,onConfirm:c=()=>Promise.resolve(),onCancel:u=()=>Promise.resolve(),cancelButtonText:m="Cancel",confirmButtonText:p="Continue",variant:x="primary",disableConfirmButton:f=!1,disableCancelButton:b=!1,assetTitle:h,assetIcon:v}=e,[_,g]=(0,n.useState)(!1);return(0,d.jj)()?(0,s.jsx)(o.cj,{defaultOpen:!0,children:(0,s.jsxs)(o.h,{side:"bottom",onInteractOutside:()=>{t.end(!1)},className:"rounded-t-5 flex h-58 flex-col gap-6",children:[(0,s.jsxs)(o.Fm,{className:"flex flex-col items-start justify-between gap-1 self-stretch border-none p-6 pb-0",children:[(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,s.jsx)(o.qp,{className:"text-heading-md text-content-primary font-semibold",children:a}),(0,s.jsx)(o.Ml,{size:"icon-sm",onClick:()=>t.end(!1)})]}),(0,s.jsx)(o.Qs,{className:"text-body-sm text-content-tertiary",children:r})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-between gap-6 self-stretch p-6 pt-0",children:[(0,s.jsxs)("div",{className:"rounded-2 border-border-primary flex h-13 w-full items-center gap-4 border-1 p-2",children:[(0,s.jsx)("div",{className:"rounded-1 border-border-primary relative size-9 overflow-hidden border",children:v}),(0,s.jsx)("span",{className:"text-label-lg text-content-primary font-medium",children:h})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 self-stretch",children:[(0,s.jsx)(i.$,{size:"md",variant:"outline",onClick:async()=>{await u(),t.end(!1)},disabled:b,children:m}),(0,s.jsx)(i.$,{size:"md",variant:x,onClick:async()=>{g(!0),await c(),t.end(!0)},disabled:f||_,children:p})]})]})]})}):(0,s.jsx)(l.lG,{defaultOpen:!0,children:(0,s.jsxs)(l.Cf,{onInteractOutside:()=>{t.end(!1)},className:"bg-background ring-border-primary rounded-4 size-full h-58 max-w-[min(calc(100vw-24px),556px)] flex-col items-end gap-4 ring-1 drop-shadow-sm",children:[(0,s.jsxs)(l.c7,{className:"flex flex-col items-start justify-between gap-1 self-stretch border-none p-6 pb-0",children:[(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,s.jsx)(l.L3,{className:"text-heading-md text-content-primary font-semibold",children:a}),(0,s.jsx)(l.De,{btnProps:{size:"icon-sm"}})]}),(0,s.jsx)(l.rr,{className:"text-body-sm text-content-tertiary",children:r})]}),(0,s.jsxs)(l.R4,{className:"flex flex-col items-start justify-between gap-4 self-stretch p-6 pt-0",children:[(0,s.jsxs)("div",{className:"rounded-2 border-border-primary flex h-13 w-full items-center gap-4 border-1 p-2",children:[(0,s.jsx)("div",{className:"rounded-1 border-border-primary relative size-9 overflow-hidden border",children:v}),(0,s.jsx)("span",{className:"text-label-lg text-content-primary font-medium",children:h})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 self-stretch",children:[(0,s.jsx)(i.$,{size:"md",variant:"outline",onClick:async()=>{await u(),t.end(!1)},disabled:b,children:m}),(0,s.jsx)(i.$,{size:"md",variant:x,onClick:async()=>{g(!0),await c(),t.end(!0)},disabled:f||_,children:p})]})]})]})})})},788:(e,t,a)=>{"use strict";a.d(t,{F:()=>u,c:()=>m});var s=a(54568),n=a(4879),r=a(82806),i=a(7620),l=a(53881),o=a(60095),d=a(19533);let c=(0,i.createContext)(void 0),u=e=>{let{children:t}=e,{socket:a,socketSubscription:u}=(()=>{let[e,t]=(0,i.useState)(null),[a,s]=(0,i.useState)(null),{user:c}=(0,o.u)(),u=(0,i.useRef)(null),m=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(c)return(()=>{let e=(0,r.getCookie)(l.H.IMPERSONATE_USER_TOKEN,{domain:d.h.NEXT_PUBLIC_APP_DOMAIN})||(0,r.getCookie)(l.H.BEARER_TOKEN,{domain:d.h.NEXT_PUBLIC_APP_DOMAIN}),a=new n.Ft(d.h.NEXT_PUBLIC_REALTIME_API_URL,{token:e});a.on("connecting",e=>console.log("connecting",e)).on("connected",e=>console.log("connected over",e.transport)).on("disconnected",e=>console.log("disconnected",e)).connect();let i=a.newSubscription("user:".concat(c.id));u.current=a,m.current=i,t(a),s(i)})(),()=>{u.current&&(t(null),u.current.disconnect()),m.current&&(s(null),m.current.unsubscribe())}},[c]),{socket:e,socketSubscription:a}})(),m=(0,i.useMemo)(()=>({socket:a,socketSubscription:u}),[a,u]);return(0,s.jsx)(c.Provider,{value:m,children:t})},m=()=>{let e=(0,i.useContext)(c);if(!e)throw Error("useSocketContext must be used within a SocketProvider");return e}},3262:(e,t,a)=>{"use strict";a.d(t,{I:()=>d,v:()=>o});var s=a(67933),n=a(27338),r=a(60095),i=a(34267),l=a(29551);let o=e=>{let{orgId:t}=e;return[i.c.ORGS_BASE_TAG,i.c.INVITATIONS,t]},d=e=>{let{enabled:t,...a}=e,{user:i}=(0,r.u)();return(0,s.I)({queryKey:o({orgId:a.orgId}),staleTime:n.I5,queryFn:()=>l.o.getInvitations({...a,pageSize:200}),enabled:!!i&&(null==t||t)})}},4177:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});var s=a(79536);let n=s.Ik({email:s.Rp()})},4187:(e,t,a)=>{"use strict";a.d(t,{$:()=>s});let s={RAKUTEN:"rakuten",POST_AFFILIATE:"pap",UTM:"utm",TAP:"tap",TOLT:"tolt",GROWI:"growi"}},5012:(e,t,a)=>{"use strict";a.d(t,{iT:()=>h,X5:()=>_,FK:()=>g});var s=a(99757),n=a(3149),r=a(27338),i=a(12331),l=a(60095),o=a(99958),d=a(29856),c=a(90416),u=a(29551),m=a(59761),p=a(90916),x=a(54582),f=a(47672);let b=async e=>{let t,{services:a,isDraftFolder:s,isPersonal:n,...r}=e,l={assets:(t=r.parentId&&!s?await u.o.getAllOrganizationAssets({service:a,...r}):await u.o.getAllOrganizationObjects({service:a,isUserOwned:n,...r})).data.assets.map(e=>{try{switch(e.service){case i.z1.APP_IMAGE:return(0,o.v)(e);case i.z1.APP_VIDEO:return(0,d.x)(e);default:return null}}catch(e){return null}}).filter(e=>null!=e)};return{...t,data:l}},h=e=>{let{parentId:t,isPersonal:a,orgId:s,isDraftFolder:n=!1}=e,r=[c.n.APP_ASSETS];return t&&!n&&r.push(t),null!=a&&r.push("".concat(a)),s&&r.push(s),[m.e.INFINITE,...r]},v=void 0,_=()=>{let{selectedFolderId:e,isPersonal:t,isDraftFolder:a}=(0,x.I)(),{user:n}=(0,l.u)(),{selectedOrganizationId:o}=(0,f.v)(),d=(0,s.q)({queryKey:h({parentId:e,isPersonal:t,orgId:o,isDraftFolder:a}),queryFn:async s=>{let{pageParam:n}=s;return await b({services:[i.z1.APP_IMAGE,i.z1.APP_VIDEO],isDraftFolder:a,limit:50,fromId:n,batch:!0,parentId:e,orgId:o,isPersonal:t})},getNextPageParam:e=>{var t;let{assets:a}=e.data;if(!(a.length<50))return null==(t=a[a.length-1])?void 0:t.uuid},staleTime:r.HZ,initialPageParam:v,enabled:!!n&&null!=e});return{...d,isLoading:d.isLoading}},g=()=>{let{selectedFolderId:e}=(0,x.I)(),{isPersonal:t,isDraftFolder:a}=(0,p.X)(),{selectedOrganizationId:s}=(0,f.v)();return(0,n.U)({queryKey:h({parentId:e,isPersonal:t,orgId:s,isDraftFolder:a}),queryFn:async a=>{let{pageParam:n}=a;return await b({services:[i.z1.APP_IMAGE,i.z1.APP_VIDEO],limit:50,fromId:n,batch:!0,parentId:e,orgId:s,isPersonal:t})},getNextPageParam:e=>{var t;let{assets:a}=e.data;if(!(a.length<50))return null==(t=a[a.length-1])?void 0:t.uuid},staleTime:r.HZ,initialPageParam:v})}},5275:(e,t,a)=>{"use strict";a.d(t,{C5:()=>h,MJ:()=>b,Wd:()=>m,eI:()=>x,lR:()=>f,lV:()=>d,zB:()=>u});var s=a(54568),n=a(79649),r=a(7620),i=a(61938),l=a(69183),o=a(11386);let d=i.Op,c=r.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(c.Provider,{value:{name:t.name},children:(0,s.jsx)(i.xI,{...t})})},m=()=>{let e=r.useContext(c),t=r.useContext(p),{getFieldState:a}=(0,i.xW)(),s=(0,i.lN)({name:e.name}),n=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},p=r.createContext({}),x=e=>{let t=r.useId();return(0,s.jsx)(p.Provider,{value:{id:t},children:(0,s.jsx)("div",{"data-slot":"form-item",...e})})},f=e=>{let{className:t,...a}=e,{formItemId:n}=m();return(0,s.jsx)(l.J,{"data-slot":"form-label",className:t,htmlFor:n,...a})},b=e=>{let{...t}=e,{error:a,formItemId:r,formDescriptionId:i,formMessageId:l}=m();return(0,s.jsx)(n.DX,{"data-slot":"form-control",id:r,"aria-describedby":a?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!a,...t})},h=e=>{var t;let{className:a,...n}=e,{error:r,formMessageId:i}=m(),l=r?String(null!=(t=null==r?void 0:r.message)?t:""):n.children;return l?(0,s.jsx)("p",{"data-slot":"form-message",id:i,className:(0,o.cn)("text-content-critical text-label-sm",a),...n,children:l}):null}},9094:(e,t,a)=>{"use strict";a.d(t,{V:()=>d,o:()=>o});var s=a(67933),n=a(27338),r=a(60095),i=a(34267),l=a(29551);let o=e=>[i.c.ORGS_BASE_TAG,i.c.ORGANIZATION_USERS,e],d=e=>{let{enabled:t,...a}=e,{user:i}=(0,r.u)();return(0,s.I)({queryKey:o(a.orgId),staleTime:n.I5,queryFn:()=>l.o.getOrganizationUsers({...a,pageSize:500}),enabled:!!i&&(null==t||t)})}},11280:(e,t,a)=>{"use strict";a.d(t,{R:()=>r});var s=a(16258),n=a(89722);let r=()=>(0,s.n)({mutationFn:e=>{let{collectionId:t,assetUuids:a}=e;return n.H.addAssetsToCollection(t,a)}})},11360:(e,t,a)=>{"use strict";a.d(t,{k:()=>l});var s=a(54568),n=a(36922);a(7620);var r=a(11386);let i=(0,a(615).F)("bg-fill-tertiary-disabled relative h-2 w-full overflow-hidden rounded-full",{variants:{size:{sm:"h-1",lg:"h-1.5"}},defaultVariants:{size:"sm"}});function l(e){let{className:t,value:a,size:l,indicatorClassName:o,...d}=e;return(0,s.jsx)(n.bL,{"data-slot":"progress",className:(0,r.cn)(i({size:l,className:t})),...d,children:(0,s.jsx)(n.C1,{"data-slot":"progress-indicator",className:(0,r.cn)("bg-fill-inverse h-full w-full flex-1 transition-all",o),style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}},13158:(e,t,a)=>{"use strict";a.d(t,{W:()=>l});var s=a(12331),n=a(59761),r=a(74679);let i=e=>{let{parentId:t,isPersonal:a,orgId:i}=e;return[(0,r.Qi)({parentId:null!=t?t:void 0,isPersonal:a,orgId:i}),(0,r.Qi)({services:[s.z1.VIDEO],parentId:null!=t?t:void 0,isPersonal:a,orgId:i}),[n.e.INFINITE,...(0,r.Qi)({parentId:null!=t?t:void 0,isPersonal:a,orgId:i})],[n.e.INFINITE,...(0,r.Qi)({services:[s.z1.VIDEO],parentId:null!=t?t:void 0,isPersonal:a,orgId:i})]]},l=e=>{let{parentId:t,isPersonal:a,orgId:s}=e;return void 0===t?i({parentId:t,isPersonal:a,orgId:s}):[...i({parentId:t,isPersonal:a,orgId:s}),...i({parentId:void 0,isPersonal:a,orgId:s})]}},13496:(e,t,a)=>{"use strict";a.d(t,{A:()=>x,E:()=>p,Jm:()=>v,bs:()=>_,pM:()=>m});var s=a(25826),n=a(52303),r=a(55437),i=a(12995),l=a(65762),o=a(59051),d=a(76376),c=a(32162),u=a(31625);let m=s.Ay$.enum([r.j.GENERATE_APP_IMAGE_ASYNC]),p=s.Ay$.object({data:d.k,style_id:s.Ay$.string(),metadata:u.p}),x=e=>{let t=(0,o.b)(h,JSON.parse(e.metadata));return{data:b((0,o.b)(f,JSON.parse(e.data),{generationType:n.c.IMAGE,imageAppId:-1,videoAppId:-1,aspect_ratio:"1:1"})),styleId:e.style_id,metadata:t}},f=s.Ay$.object({generationType:s.Ay$.literal(n.c.IMAGE),imageAppId:s.Ay$.number(),videoAppId:s.Ay$.number()}).and(s.Ay$.union([s.Ay$.object({image_size:s.Ay$.object({width:s.Ay$.number(),height:s.Ay$.number()}),aspect_ratio:s.Ay$.never().optional()}),s.Ay$.object({aspect_ratio:s.Ay$.string(),image_size:s.Ay$.never().optional()})])).and(s.Ay$.record(s.Ay$.string(),s.Ay$.unknown())),b=e=>{var t,a;let{aspect_ratio:s,image_size:r,imageAppId:i,videoAppId:l,generationType:o,...d}=e;return r?{aspectHeight:r.height,aspectWidth:r.width,generationType:n.c.IMAGE,imageAppId:i,videoAppId:l,imageSize:r,...d}:{aspectHeight:Number(null!=(t=s.split(":")[1])?t:1),aspectWidth:Number(null!=(a=s.split(":")[0])?a:1),generationType:n.c.IMAGE,imageAppId:i,videoAppId:l,aspectRatio:s,...d}},h=s.Ay$.object({placeholderUuid:s.Ay$.string().optional(),slug:s.Ay$.string().optional()}),v=s.Ay$.object({generation:c.aB,inputs:c.aB,thumbnail:c.aB,variation:c.aB}),_=e=>({generation:(0,i._)(e.generation),inputs:e.inputs,thumbnail:(0,i._)(e.thumbnail),variation:e.variation});s.Ay$.literal(l.A.APP_IMAGE_GENERATION)},13553:(e,t,a)=>{"use strict";a.d(t,{j:()=>l});var s=a(55822),n=a(98796),r=a(66727);let i=Object.fromEntries(Object.values(r.D).map(e=>[e,!1])),l=(0,s.v)()((0,n.eh)((e,t)=>({...i,openDialog:t=>e(()=>({[t]:!0})),closeDialog:t=>e(()=>({[t]:!1})),setDialogOpen:(t,a)=>e(()=>({[t]:a})),toggleDialog:t=>e(e=>({[t]:!e[t]})),checkIsDialogOpen:e=>!!t()[e],checkIsAnyDialogOpen:()=>{let e=t();return Object.values(r.D).some(t=>e[t])},closeAll:()=>{let t=Object.values(r.D).reduce((e,t)=>({...e,[t]:!1}),{});e(()=>t)},closeAllExcept:a=>{let s=new Set(a),n=t(),i=Object.values(r.D).reduce((e,t)=>({...e,[t]:!!s.has(t)&&n[t]}),{});e(()=>i)},checkIsAnyDialogOpenExcept:e=>{let a=new Set(e),s=t();return Object.values(r.D).some(e=>s[e]&&!a.has(e))}})))},14619:(e,t,a)=>{"use strict";a.d(t,{ThemeProvider:()=>o});var s=a(54568),n=a(62942),r=a(68309),i=a(16001);let l=[{pathname:a(20844).ze.IMAGINE_1_5,exact:!0,forcedTheme:"dark",dynamic:!1}],o=e=>{let{children:t}=e,a=(0,n.usePathname)();return(0,s.jsx)(r.N,{forcedTheme:(e=>{let t=l.find(t=>{let{pathname:a,exact:s,dynamic:n}=t;return(0,i.W)({pathname:e,targetPath:a,exact:s,dynamic:n})});return null==t?void 0:t.forcedTheme})(a),enableSystem:!0,attribute:"class",disableTransitionOnChange:!0,children:t})}},15652:(e,t,a)=>{"use strict";a.d(t,{DowntimeOverlayRoot:()=>n});var s=a(54568);a(7620);let n=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"bg-background flex h-screen w-full flex-col items-center gap-32 p-8 text-center [&_*]:relative",children:t})}},16001:(e,t,a)=>{"use strict";a.d(t,{G:()=>n,W:()=>s});let s=e=>{let{pathname:t,targetPath:a,exact:s=!0,dynamic:n=!1}=e;return n?t.includes(a):s?t===a:t.startsWith(a)},n=(e,t)=>{let a=e;return a&&a.startsWith("/")&&(a=a.slice(1)),new URL(a,t).href}},16750:(e,t,a)=>{"use strict";a.d(t,{B:()=>s});let s=(0,a(615).F)("text-content-tertiary text-label-md px-2 pt-2 pb-1 font-medium",{variants:{variant:{primary:"bg-surface-primary-variant",secondary:"bg-surface-elevated"},sticky:{true:"sticky top-0 left-0 z-1",false:""}},defaultVariants:{variant:"primary",sticky:!1}})},16811:(e,t,a)=>{"use strict";a.d(t,{y:()=>s});let s={IMAGE_GENERATED_EVENT:"image_generated_event",IMAGE_EDITED_EVENT:"image_edited_event",CLEAR_EDITOR_SELECTION_EVENT:"clear_editor_selection_event",ASSETS_DROPPED_ON_FOLDER_EVENT:"assets_dropped_on_folder_event",VIDEO_GENERATION_STARTED_EVENT:"video_generation_started_event",IMAGE_GENERATION_STARTED_EVENT:"image_generation_started_event"}},22399:(e,t,a)=>{"use strict";a.d(t,{n:()=>i});var s=a(54568),n=a(98720),r=a(11386);let i=e=>{let{children:t,isOpen:a,handleOpenChange:i,title:l,description:o,className:d,showHeader:c=!0}=e;return(0,s.jsx)(n.cj,{open:a,onOpenChange:i,children:(0,s.jsxs)(n.h,{className:(0,r.cn)("rounded-t-5 mx-auto",d),side:"bottom",children:[c&&(0,s.jsxs)(n.Fm,{className:"p-3",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(n.qp,{className:"text-heading-md font-semibold",children:l}),o&&(0,s.jsx)(n.Qs,{className:"text-content-tertiary text-body-sm",children:o})]}),(0,s.jsx)(n.Ml,{})]}),t]})})}},25011:(e,t,a)=>{"use strict";a.d(t,{px:()=>_,vB:()=>v});var s=a(25826),n=a(55437),r=a(59051),i=a(12331),l=a(32162),o=a(31625),d=a(37328),c=a(12995),u=a(65762);let m=s.Ay$.enum([n.j.GENERATE_TRANSFER_MOTION_ASYNC]),p=s.Ay$.literal(d.FE.IMAGE_TO_VIDEO),x=s.Ay$.object({aspect_ratio:s.Ay$.string(),file_url:s.Ay$.string(),reference_url:s.Ay$.string(),style_id:s.Ay$.string(),duration:s.Ay$.string(),resolution:s.Ay$.string().optional(),variation:p,metadata:o.p}),f=s.Ay$.object({placeholderUuid:s.Ay$.string().optional()});s.Ay$.literal(u.A.TRANSFER_MOTION_GENERATION);let b=s.Ay$.object({generation:l.aB,inputs:l.aB,thumbnail:l.aB}),h=s.Ay$.union([m]),v=e=>{let t=(0,r.b)(h,e.endpoint);if(t===n.j.GENERATE_TRANSFER_MOTION_ASYNC)return(e=>{let t=(e=>{let t=(0,r.b)(f,JSON.parse(e.metadata));return{aspectRatio:e.aspect_ratio,fileUrl:e.file_url,referenceUrl:e.reference_url,styleId:e.style_id,duration:Number(e.duration),variation:e.variation,metadata:t}})((0,r.b)(x,e.settings,{aspect_ratio:"1:1",file_url:"",reference_url:"",style_id:"",duration:"1",variation:d.FE.IMAGE_TO_VIDEO,metadata:"{}"})),a=(e=>({generation:(0,c._)(e.generation),thumbnail:(0,c._)(e.thumbnail),inputs:(0,c._)(e.inputs)}))((0,r.b)(b,e.url,{generation:[],thumbnail:[],inputs:[]}));return{...e,settings:t,url:a,tag:u.A.TRANSFER_MOTION_GENERATION,service:i.z1.MOTION}})({...e,endpoint:t})},_=e=>({assets:e.assets.map(e=>{try{return v(e)}catch(e){return null}}).filter(e=>null!=e)})},26834:(e,t,a)=>{Promise.resolve().then(a.bind(a,15652)),Promise.resolve().then(a.bind(a,61343)),Promise.resolve().then(a.bind(a,83728)),Promise.resolve().then(a.bind(a,88512)),Promise.resolve().then(a.bind(a,92414)),Promise.resolve().then(a.bind(a,14619)),Promise.resolve().then(a.t.bind(a,27261,23)),Promise.resolve().then(a.t.bind(a,73970,23)),Promise.resolve().then(a.t.bind(a,44760,23)),Promise.resolve().then(a.t.bind(a,41893,23)),Promise.resolve().then(a.bind(a,66630)),Promise.resolve().then(a.t.bind(a,88766,23)),Promise.resolve().then(a.t.bind(a,32925,23))},29523:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(22360);let n=e=>{e.current&&(e.current.refresh(),e.current.destroy(),e.current=null,document.querySelectorAll("ubdiv").forEach(e=>{e.remove()}),document.querySelectorAll("umodal").forEach(e=>{e.remove()}),localStorage.removeItem(s.C.UBWC))}},29856:(e,t,a)=>{"use strict";a.d(t,{x:()=>d});var s=a(55437),n=a(97706),r=a(59051),i=a(12331),l=a(65762),o=a(19136);let d=e=>{let t=(0,r.b)(n.Nz,e.endpoint);if(t===s.j.GENERATE_APP_VIDEO_ASYNC)return(e=>{let t=(0,r.b)(n._C,e.settings),a=(0,n.I5)(t),s=(0,r.b)(n.N5,e.url),d=(0,n.R6)(s);return{...e,settings:a,url:d,tag:l.A.APP_VIDEO_GENERATION,service:i.z1.APP_VIDEO,refService:void 0,type:o.KJ.OBJECT}})({...e,endpoint:t})}},30042:(e,t,a)=>{"use strict";a.d(t,{AddToCollectionBody:()=>j});var s=a(54568),n=a(61773),r=a(83922),i=a(54140),l=a(48750),o=a(38806),d=a(33787),c=a(49896),u=a(51874),m=a(60095),p=a(46626),x=a(10987),f=a(11280),b=a(48135),h=a(67734),v=a(16258),_=a(89722),g=a(90543);let y=e=>{var t;let{assetId:a,collectionId:n,isAdded:r}=e,{user:l}=(0,m.u)(),{mutate:o,status:c}=(0,f.R)(),{mutate:y,status:E}=(0,v.n)({mutationFn:e=>{let{collectionId:t,assetUuids:a}=e;return _.H.removeAssetsFromCollection(t,a)}}),I=(0,d.P)(a),N=(0,b.C)(n),j=(0,h.x)(null!=(t=null==l?void 0:l.username)?t:null),{serviceErrorHandler:A}=(0,g.z)();return"pending"===c||"pending"===E?(0,s.jsx)(i.$,{variant:"ghost",size:"icon-md",disabled:!0,children:(0,s.jsx)(x.y,{className:"size-4"})}):r?(0,s.jsx)(i.$,{variant:"ghost",size:"icon-md",className:"",onClick:()=>y({collectionId:n,assetUuids:[a]},{onSuccess:()=>{u.oR.success("Asset removed from collection"),I(),N()},onError:e=>{A(e)}}),children:(0,s.jsx)(p.cFy,{isActivated:!0})}):(0,s.jsx)(i.$,{variant:"ghost",size:"icon-md",onClick:()=>o({collectionId:n,assetUuids:[a]},{onSuccess:()=>{u.oR.success("Asset added to collection"),I(),N(),j()},onError:e=>{A(e)}}),children:(0,s.jsx)(p.c11,{})})};var E=a(75036);let I=()=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.E,{className:"rounded-2 size-[65px]"}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(E.E,{className:"h-5 w-40"}),(0,s.jsx)(E.E,{className:"h-4 w-24"})]})]}),N=()=>(0,s.jsx)("div",{className:"flex flex-col gap-4",children:Array.from({length:6}).map((e,t)=>(0,s.jsx)(I,{},t))}),j=e=>{let{newCollectionDialogName:t}=e,[a]=(0,r.ZA)(o.r.ADD_TO_COLLECTION_MODAL),{openDialog:u}=(0,c.s)(t),{data:m,isLoading:p,isError:x}=(0,d.Y)(a);return console.log("Collections for asset:",m),(0,s.jsxs)("div",{className:"tablet:pt-0 flex flex-col gap-6 pb-6",children:[(0,s.jsxs)("div",{className:"tablet:px-6 flex w-full justify-between px-4",children:[(0,s.jsx)("h3",{className:"text-body-md font-semibold",children:"Collections"}),(0,s.jsx)(i.$,{variant:"link-ai",size:"sm",onClick:u,children:"New Collection"})]}),(0,s.jsx)(l.F,{className:"scrollbar-none max-h-[400px] overflow-y-auto",children:(0,s.jsxs)("div",{className:"tablet:px-6 flex flex-col gap-4 px-4",children:[p&&(0,s.jsx)(N,{}),x&&(0,s.jsx)("div",{children:"Error"}),m&&m.map(e=>{var t;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.coverUrls&&e.coverUrls.length>0?(0,s.jsx)(n.default,{src:null!=(t=e.coverUrls[0])?t:"",alt:e.name,width:65,height:65,className:"rounded-2 size-[65px] object-cover"}):(0,s.jsx)("div",{className:"rounded-2 bg-fill-secondary size-[65px]"}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("h4",{className:"text-body-sm font-semibold",children:e.name}),(0,s.jsxs)("p",{className:"text-body-xs text-content-secondary",children:[e.totalAssets," Items"]})]})]}),(0,s.jsx)(y,{assetId:null!=a?a:"",collectionId:e.uuid,isAdded:e.isAdded})]},e.id)})})]})})]})}},30744:(e,t,a)=>{"use strict";a.d(t,{u:()=>l});var s=a(12331),n=a(59761),r=a(74679);let i=e=>{let{parentId:t,isPersonal:a,orgId:i}=e;return[(0,r.Qi)({parentId:null!=t?t:void 0,isPersonal:a,orgId:i}),(0,r.Qi)({services:[s.z1.IMAGE],parentId:null!=t?t:void 0,isPersonal:a,orgId:i}),[n.e.INFINITE,...(0,r.Qi)({parentId:null!=t?t:void 0,isPersonal:a,orgId:i})],[n.e.INFINITE,...(0,r.Qi)({services:[s.z1.IMAGE],parentId:null!=t?t:void 0,isPersonal:a,orgId:i})]]},l=e=>{let{parentId:t,isPersonal:a,orgId:s}=e;return void 0===t?i({parentId:t,isPersonal:a,orgId:s}):[...i({parentId:t,isPersonal:a,orgId:s}),...i({parentId:void 0,isPersonal:a,orgId:s})]}},33142:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(54568),n=a(40916),r=a(7620),i=a(11386);function l(e){let{className:t,defaultValue:a,value:l,min:o=0,max:d=100,includeRange:c=!0,...u}=e,m=r.useMemo(()=>Array.isArray(l)?l:Array.isArray(a)?a:[o,d],[l,a,o,d]);return(0,s.jsxs)(n.bL,{"data-slot":"slider",defaultValue:a,value:l,min:o,max:d,className:(0,i.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...u,children:[(0,s.jsx)(n.CC,{"data-slot":"slider-track",className:(0,i.cn)("bg-fill-tertiary-disabled relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:c&&(0,s.jsx)(n.Q6,{"data-slot":"slider-range",className:(0,i.cn)("bg-fill-inverse absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:m.length},(e,t)=>(0,s.jsx)(n.zi,{"data-slot":"slider-thumb",className:"border-border-inverse bg-fill-primary ring-surface-primary-alternate block size-4 cursor-pointer rounded-full border-[3px] ring-2 transition-colors focus-visible:ring-2 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50"},t))]})}},33400:(e,t,a)=>{"use strict";a.d(t,{DI:()=>n,V8:()=>d,oP:()=>o,sF:()=>r,u$:()=>l});var s=a(79536);let n=e=>s.Ik({result:e});s.Ik({}).loose();let r={HAS_SEEN_ONBOARDING_PERSONA_MODAL:"hasSeenOnboardingPersonaModal",HAS_SEEN_USER_TRAINING_MODAL:"hasSeenUserTrainingModal",HAS_SEEN_IMAGE_TRAINING_MODEL_TIPS_SCREEN:"hasSeenImageTrainingModelTipsScreen",HAS_SEEN_NPS_SURVEY_FORM:"hasSeenNPSSurveyForm",HAS_SEEN_GENERAL_IMAGE_GENERATION_SURVEY_FORM:"hasSeenGeneralImageGenerationSurveyForm",HAS_SEEN_GENERAL_IMAGE_EDIT_SURVEY_FORM:"hasSeenGeneralImageEditSurveyForm"};s.eu("IMAGINE_WEB");let i=s.Ik({id:s.ai(),status:s.zM(),name:s.Yj()}),l=s.Ik({status:s.zM()}),o=s.Ik({flags:s.YO(i)}),d=s.Ik({flagId:s.ai(),status:s.zM()})},33618:(e,t,a)=>{"use strict";a.d(t,{D:()=>f});var s=a(7620),n=a(55437),r=a(92184),i=a(36270),l=a(59051),o=a(79536);let d=o.Ik({user_id:o.Yj(),name:o.Yj().nullable(),username:o.Yj(),email:o.Yj().nullable(),description:o.Yj().nullable(),facebook_url:o.Yj().nullable(),instagram_url:o.Yj().nullable(),linkedin_url:o.Yj().nullable(),pinterest_url:o.Yj().nullable(),twitter_url:o.Yj().nullable(),tiktok_url:o.Yj().nullable(),behance_url:o.Yj().nullable(),dribbble_url:o.Yj().nullable(),youtube_url:o.Yj().nullable(),views:o.ai(),downloads:o.ai(),bookmarks:o.ai(),profile_image_key:o.Yj().nullable(),profile_banner_key:o.Yj().nullable(),updated_at:o.Yj().optional()}),c=o.Ik({status:o.Yj(),profile:d}),u=e=>{var t;let a=null!=(t=e.profile.updated_at)?t:new Date().toISOString();return{userId:e.profile.user_id,name:e.profile.name,username:e.profile.username,email:e.profile.email,description:e.profile.description,facebookUrl:e.profile.facebook_url,instagramUrl:e.profile.instagram_url,linkedinUrl:e.profile.linkedin_url,pinterestUrl:e.profile.pinterest_url,twitterUrl:e.profile.twitter_url,tiktokUrl:e.profile.tiktok_url,behanceUrl:e.profile.behance_url,dribbbleUrl:e.profile.dribbble_url,youtubeUrl:e.profile.youtube_url,views:e.profile.views,downloads:e.profile.downloads,bookmarks:e.profile.bookmarks,profileImageKey:e.profile.profile_image_key,profileBannerKey:e.profile.profile_banner_key,updatedAt:a}};var m=a(25826);m.Ay$.object({name:m.Ay$.string().optional(),username:m.Ay$.string().nullable().optional(),description:m.Ay$.string().nullable().optional(),facebook_url:m.Ay$.string().nullable().optional(),instagram_url:m.Ay$.string().nullable().optional(),linkedin_url:m.Ay$.string().nullable().optional(),pinterest_url:m.Ay$.string().nullable().optional(),twitter_url:m.Ay$.string().nullable().optional(),tiktok_url:m.Ay$.string().nullable().optional(),behance_url:m.Ay$.string().nullable().optional(),dribbble_url:m.Ay$.string().nullable().optional(),youtube_url:m.Ay$.string().nullable().optional(),banner:m.Ay$.file().nullable().optional(),avatar:m.Ay$.file().nullable().optional()});let p=m.Ay$.object({status:m.Ay$.string()});class x{async getMyProfile(){let e=await (0,r.hZ)(async()=>await this._client.get(n.j.PROFILE)),t=u((0,l.b)(c,e.data));return{...e,data:t}}async getProfileByUsername(e){let t=await (0,r.hZ)(async()=>await this._client.get(n.j.PROFILE_BY_USERNAME.replace(":username",e))),a=u((0,l.b)(c,t.data));return{...t,data:a}}async updateUserProfile(e){let t=(0,i.j)(e),a=await (0,r.hZ)(async()=>await this._client.put(n.j.PROFILE,t)),s=(0,l.b)(p,a.data);return{...a,data:s}}constructor({client:e}){this._client=e}}let f=new x({client:a(31201).x});(0,s.cache)(async e=>await f.getProfileByUsername(e))},33787:(e,t,a)=>{"use strict";a.d(t,{P:()=>d,Y:()=>o});var s=a(67933),n=a(87606),r=a(7620),i=a(90416),l=a(89722);let o=e=>(0,s.I)({queryKey:[i.n.GET_COLLECTIONS_FOR_ASSET,e],queryFn:()=>l.H.getCollectionsForAsset(null!=e?e:""),select:e=>e.data,enabled:!!e}),d=e=>{let t=(0,n.jE)();return(0,r.useCallback)(()=>t.invalidateQueries({queryKey:[i.n.GET_COLLECTIONS_FOR_ASSET,e]}),[t,e])}},34596:(e,t,a)=>{"use strict";a.d(t,{n:()=>s});let s=(0,a(55822).v)(e=>({wasWidgetPreviouslyOpened:!1,setWasWidgetPreviouslyOpened:t=>e({wasWidgetPreviouslyOpened:t})}))},35284:(e,t,a)=>{"use strict";a.d(t,{g:()=>l});var s=a(62942),n=a(7620),r=a(62384),i=a(49896);let l=e=>{let{dialogName:t,paramKey:a,paramValue:l,handleOnClose:o,handleOnOpen:d}=e,{isOpen:c,setDialogOpen:u,closeDialog:m}=(0,i.s)(t),p=(0,s.useSearchParams)(),x=p.get(a),f=(0,s.usePathname)();return(0,n.useEffect)(()=>{if(!l&&x)return void u(!0);u(x===l)},[a,l,p,u,x]),(0,n.useEffect)(()=>{c&&d&&d()},[d,c]),{isOpen:c,handleOpenChange:e=>{if(e)return;let t=new URLSearchParams(p);t.delete(a);let s=()=>{m();let e=p.get(r.u.TAB);e&&t.set("tab",e),window.history.replaceState(null,"","".concat(f,"?").concat(t))};s(),o&&o(s)}}}},36348:(e,t,a)=>{"use strict";a.d(t,{M:()=>m,p:()=>u});var s=a(89329),n=a(59051),r=a(33400);let i=(0,r.DI)(r.oP),l=(0,r.DI)(r.u$),o=(0,r.DI)(r.V8);class d{async getSingleUserFlag(e){var t;let{name:a,platform:s="IMAGINE_WEB",requestOptions:r}=e,i=await this._client.get("/user/flags",{...null!=r?r:{},params:{name:a,platform:s,...null!=(t=null==r?void 0:r.params)?t:{}}}),o=(e=>{let{result:t}=e;return t})((0,n.b)(l,i.data));return{...i,data:o}}async getAllUserFlags(){var e;let{requestOptions:t,platform:a="IMAGINE_WEB"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=await this._client.get("/user/flags/all",{...null!=t?t:{},params:{platform:a,...null!=(e=null==t?void 0:t.params)?e:{}}}),r=(e=>{let{result:t}=e;return t})((0,n.b)(i,s.data));return{...s,data:r}}async updateUserFlag(e){let{payload:t,platform:a="IMAGINE_WEB",requestOptions:s}=e,r=await this._client.post("/user/flags",{...t,platform:a},null!=s?s:void 0),i=(e=>{let{result:t}=e;return t})((0,n.b)(o,r.data));return{...r,data:i}}constructor({client:e}){this._client=e}}var c=a(19533);let u=(0,a(48164).d)(s.A.create({baseURL:c.h.NEXT_PUBLIC_FLAGS_API_URL})),m=new d({client:u})},37964:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var s=a(5012);let n=e=>{let{parentId:t,isPersonal:a,orgId:n}=e;return void 0===t?[(0,s.iT)({parentId:t,isPersonal:a,orgId:n})]:[(0,s.iT)({parentId:t,isPersonal:a,orgId:n}),(0,s.iT)({parentId:void 0,isPersonal:a,orgId:n})]}},38806:(e,t,a)=>{"use strict";a.d(t,{r:()=>s});let s={HIGHLIGHTS:"highlights",ZOOM:"zoom",ORIENTATION:"orientation",MEDIA_TYPE:"media-type",SORT_BY:"sort-by",CREATE:"create",COLLECTION_ID:"collection-id",ASSET_QUERY_MODAL:"asset",ADD_TO_COLLECTION_MODAL:"add-to-collection",COLLECTION_NAME:"collection-name"}},39160:(e,t,a)=>{"use strict";a.d(t,{J:()=>u,s:()=>m});var s=a(67933),n=a(87606),r=a(16258),i=a(82806),l=a(53881),o=a(19533),d=a(58910);let c="get_user_persona",u=()=>{let e=(0,i.getCookie)(l.H.IMPERSONATE_USER_TOKEN,{domain:o.h.NEXT_PUBLIC_APP_DOMAIN})||(0,i.getCookie)(l.H.BEARER_TOKEN,{domain:o.h.NEXT_PUBLIC_APP_DOMAIN});return(0,s.I)({queryKey:[c],queryFn:async()=>(await d.y.getUserPersona({bearerToken:null!=e?e:""})).data,enabled:!!e})},m=()=>{let e=(0,i.getCookie)(l.H.IMPERSONATE_USER_TOKEN,{domain:o.h.NEXT_PUBLIC_APP_DOMAIN})||(0,i.getCookie)(l.H.BEARER_TOKEN,{domain:o.h.NEXT_PUBLIC_APP_DOMAIN}),t=(0,n.jE)();return(0,r.n)({mutationFn:async t=>(await d.y.updateUserPersona({personaItems:t,bearerToken:null!=e?e:""})).data,onMutate:async e=>{await t.cancelQueries({queryKey:[c]});let a=t.getQueryData([c]);return t.setQueryData([c],t=>{let a=[...(null==t?void 0:t.persona)||[]].concat(e);return{...t,persona:a}}),{previousPersona:a}},onError:(e,a,s)=>{(null==s?void 0:s.previousPersona)&&t.setQueryData([c],s.previousPersona)},onSettled:()=>{t.invalidateQueries({queryKey:[c]})}})}},39381:(e,t,a)=>{"use strict";a.d(t,{O:()=>m,b:()=>p});var s=a(54568),n=a(7620),r=a(60095),i=a(86374),l=a(16258),o=a(11960),d=a(19533),c=a(29523);let u=(0,n.createContext)(null),m=e=>{let{children:t}=e,a=(0,n.useRef)(null),{user:m}=(0,r.u)(),p=(0,i.c)(),{mutate:x}=(e=>{let{userbackRef:t}=e;return(0,l.n)({mutationFn:async()=>{(0,c.Z)(t);let e=await (0,o.A)(d.h.NEXT_PUBLIC_USERBACK_GLOBAL_ACCESS_TOKEN,{autohide:!1});return t.current=e,e}})})({userbackRef:a});return(0,n.useEffect)(()=>{m&&p&&x(void 0,{onSuccess:()=>{var e;null==(e=a.current)||e.identify(m.id,p)}})},[m,p,x]),(0,s.jsx)(u.Provider,{value:{userbackRef:a,initializeGlobalSurvey:x},children:t})},p=()=>{let e=(0,n.useContext)(u);if(!e)throw Error("useUserbackContext must be used within a UserbackProvider");return e}},48135:(e,t,a)=>{"use strict";a.d(t,{C:()=>d,L:()=>o});var s=a(67933),n=a(87606),r=a(7620),i=a(90416),l=a(89722);let o=e=>(0,s.I)({queryKey:[i.n.GET_COLLECTION_ASSETS,e,500],queryFn:()=>l.H.getCollectionAssets(e,{limit:500}),select:e=>e.data}),d=e=>{let t=(0,n.jE)();return(0,r.useCallback)(()=>{t.invalidateQueries({queryKey:[i.n.GET_COLLECTION_ASSETS,e,500]})},[t,e])}},49759:(e,t,a)=>{"use strict";a.d(t,{g:()=>n,t:()=>s});let s={REGULAR:"regular",PRODUCT_HUNT:"product_hunt"},n={IMAGE:"image",VIDEO:"video"}},49896:(e,t,a)=>{"use strict";a.d(t,{s:()=>i});var s=a(7620),n=a(73905),r=a(13553);let i=e=>{let{openDialog:t,closeDialog:a,setDialogOpen:i,toggleDialog:l,checkIsDialogOpen:o,closeAll:d,...c}=(0,r.j)((0,n.k)(t=>({openDialog:t.openDialog,closeDialog:t.closeDialog,setDialogOpen:t.setDialogOpen,toggleDialog:t.toggleDialog,checkIsDialogOpen:t.checkIsDialogOpen,closeAll:t.closeAll,[e]:t[e]}))),u=(0,s.useCallback)(()=>{t(e)},[t,e]),m=(0,s.useCallback)(()=>{a(e)},[a,e]),p=(0,s.useCallback)(t=>{i(e,t)},[i,e]);return{openDialog:u,closeDialog:m,setDialogOpen:p,toggleDialog:(0,s.useCallback)(()=>{l(e)},[l,e]),checkIsDialogOpen:(0,s.useCallback)(()=>o(e),[o,e]),closeAll:d,isOpen:c[e]}}},51912:(e,t,a)=>{"use strict";a.d(t,{P:()=>s});let s=(0,a(91039).default)(()=>Promise.all([a.e(6855),a.e(7295)]).then(a.t.bind(a,7295,23)),{loadableGenerated:{webpack:()=>[7295]},ssr:!1})},52303:(e,t,a)=>{"use strict";a.d(t,{c:()=>n,d:()=>r});var s=a(25826);let n={IMAGE:"image",VIDEO:"video"},r=s.Ay$.literal(Object.values(n))},53e3:(e,t,a)=>{"use strict";a.d(t,{G:()=>o,d:()=>d});var s=a(67933),n=a(27338),r=a(60095),i=a(34267),l=a(29551);let o=e=>{let{orgId:t}=e;return[i.c.ORGS_BASE_TAG,i.c.ORGANIZATION_DETAILS,null!=t?t:""]},d=e=>{let{enabled:t,...a}=e,{user:i}=(0,r.u)();return(0,s.I)({queryKey:o({orgId:a.id}),staleTime:n.I5,queryFn:()=>l.o.getOrganizationDetails(a),enabled:!!i&&(null==t||t)})}},53163:(e,t,a)=>{"use strict";a.d(t,{KA:()=>r,ge:()=>s,i7:()=>n});let s=(e,t)=>{document.addEventListener(e,t)},n=(e,t)=>{document.removeEventListener(e,t)},r=(e,t)=>{let a=new CustomEvent(e,{detail:t});document.dispatchEvent(a)}},54828:(e,t,a)=>{"use strict";a.d(t,{y:()=>s});let s={ALL_FLAGS:"all-flags",SINGLE_FLAG:"single-flag"}},61343:(e,t,a)=>{"use strict";a.d(t,{GlobalModals:()=>aF});var s=a(54568),n=a(7620),r=a(96578),i=a(757),l=a(66727),o=a(82806),d=a(223),c=a.n(d),u=a(62942),m=a(3418),p=a(178),x=a(30650),f=a(60095),b=a(35044),h=a(33029),v=a(45822),_=a(90820),g=a(22360),y=a(20844),E=a(3397),I=a(52948),N=a(13553),j=a(49896),A=a(69472),O=a(61773),S=a(49759),k=a(54140);let T={CloseButton:e=>{let{onClose:t}=e;return(0,s.jsx)("div",{className:"tablet:block hidden",children:(0,s.jsx)(h.De,{btnProps:{size:"icon-sm"},onClick:t,tabIndex:-1})})},CTA:e=>{let{onUpgrade:t,ctaText:a}=e;return(0,s.jsx)("div",{className:"bg-background tablet:py-0 sticky bottom-0 mt-auto w-full px-2 py-2",children:(0,s.jsx)(k.$,{variant:"ai",size:"lg",onClick:t,tabIndex:-2,className:"w-full",children:a})})},Title:e=>{let{title:t,titleKeyword:a}=e;return(0,s.jsxs)("h1",{className:"text-heading-lg mobile:text-heading-2xl font-semibold",children:[t," ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"bg-gradient-to-r from-[#8A3FFC] to-[#B182FF] bg-clip-text text-transparent",children:a})]})},Description:e=>{let{description:t}=e;return(0,s.jsx)("p",{className:"text-body-sm text-content-tertiary",children:t})}},C={Thumbnail:e=>{let{asset:t,assetType:a,title:n,thumbnail:r,onClose:i}=e;return(0,s.jsxs)("div",{className:"rounded-b-2 aspect-square max-h-[372px] shrink space-y-2 overflow-clip",children:[(0,s.jsx)("div",{className:"tablet:hidden sticky top-2 flex justify-end",children:(0,s.jsx)(h.De,{btnProps:{size:"icon-sm"},onClick:i})}),a===S.g.IMAGE&&(0,s.jsx)(O.default,{src:t,alt:n,width:355,height:404,className:"rounded-2 mx-auto h-full object-cover"}),a===S.g.VIDEO&&(0,s.jsx)("video",{loop:!0,muted:!0,autoPlay:!0,playsInline:!0,src:t,poster:r,className:"rounded-2 tablet:max-h-none mx-auto h-full max-h-[332px] w-auto object-cover"})]})},Content:e=>{let{title:t,titleKeyword:a,description:n,ctaText:r,onClose:i,onUpgrade:l}=e;return(0,s.jsxs)("div",{className:"tablet:basis-[404px] flex shrink grow basis-[131px] flex-col items-end gap-4 overflow-y-auto",children:[(0,s.jsx)(T.CloseButton,{onClose:i}),(0,s.jsxs)("div",{className:"mobile:p-4 space-y-4 p-2",children:[(0,s.jsx)(T.Title,{title:t,titleKeyword:a}),(0,s.jsx)(T.Description,{description:n})]}),(0,s.jsx)(T.CTA,{ctaText:r,onUpgrade:l})]})}},P=()=>{let{promotionCampaign:e}=(0,E.bO)(),t=(0,u.usePathname)(),{setUpgradeModalParams:a}=(0,A.i)(),{user:r}=(0,f.u)(),{isOpen:i}=(0,A.i)(),{checkIsAnyDialogOpenExcept:d}=(0,N.j)(),{isOpen:O,closeDialog:S,setDialogOpen:k}=(0,j.s)(l.D.PROMO_MODAL),T=d([l.D.PROMO_MODAL]),{data:P,isLoading:D}=(0,I.aR)(),{activeStripePlanName:$}=(null==P?void 0:P.subscription)?(0,v.B6)(P.subscription):{},w=new Set(e.visibleTo),R=x.O$.filter(e=>!w.has(e)),M=()=>{var t,a;let s=null!=(a=null==(t=e.popup)?void 0:t.repeatIntervalInHours)?a:24,n=c()().add(s,"hours").toDate();(0,o.setCookie)(p.e.HAS_SEEN_PROMO_MODAL,"true",{expires:n}),S()};if((0,n.useEffect)(()=>{k((0,o.getCookie)(p.e.HAS_SEEN_PROMO_MODAL)!==m.J.TRUE)},[k]),D||!O||T||!e.isLive||!e.popup||!r||i||!w.has(null!=$?$:b.M4.FREE)||t.startsWith(y.ze.JOIN)||t.startsWith(y.ze.ACCEPT_INVITE))return null;let{asset:L,assetType:U,thumbnail:G,ctaText:z,title:F,titleKeyword:B,description:q}=e.popup;return(0,s.jsx)(h.lG,{open:O,onOpenChange:M,children:(0,s.jsxs)(h.Cf,{overlayProps:{className:"backdrop-blur-md"},className:"tablet:max-w-3xl tablet:h-auto h-[min(calc(100dvh-32px),768px)] min-h-[388px] max-w-[min(calc(100vw-48px),380px)] drop-shadow-none",onOpenAutoFocus:e=>e.preventDefault(),children:[(0,s.jsx)(h.L3,{hidden:!0,children:"Promotion Modal"}),(0,s.jsxs)(h.R4,{className:"tablet:flex-row flex flex-col items-stretch justify-center gap-2 p-2",children:[(0,s.jsx)(C.Thumbnail,{asset:L,thumbnail:G,assetType:U,onClose:M,title:"".concat(F," ").concat(B)}),(0,s.jsx)(C.Content,{title:F,titleKeyword:B,description:q,onClose:M,onUpgrade:()=>{localStorage.setItem(g.C.ADD_TO_CART_CTA,_.J.PROMOTION_POPUP),a({isOpen:!0,upgradeablePlanNames:R}),M()},ctaText:z})]})]})})};var D=a(98457),$=a(38806),w=a(30042);let R=e=>{let{newCollectionDialogName:t}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(D.QueryParamModal,{dialogName:l.D.ADD_TO_COLLECTION_MODAL,paramKey:$.r.ADD_TO_COLLECTION_MODAL,title:"Add to collection",className:"tablet:max-w-[556px] tablet:gap-6",description:"Add this asset to your collection",children:(0,s.jsx)(w.AddToCollectionBody,{newCollectionDialogName:t})})})};var M=a(90819),L=a.n(M),U=a(83922),G=a(62384),z=function(e){return e.DOWNGRADE="downgrade",e.UPGRADE="upgrade",e}({}),F=a(75889),B=a(19603),q=a(27261),V=a.n(q);let K=e=>{let{modalTitle:t,tryAgainHandler:a,isLoading:n=!1}=e;return(0,s.jsxs)(h.Cf,{className:"ring-border-primary z-[1000] w-[496px] max-w-[496px] min-w-[496px] ring-1 ring-inset",overlayProps:{className:"bg-black/50 z-[999] backdrop-blur-[6px]"},children:[(0,s.jsxs)(h.c7,{className:"h-auto flex-row justify-between p-3 pl-6",children:[(0,s.jsx)(h.L3,{className:"text-label-lg font-medium",children:t}),(0,s.jsx)(h.De,{btnProps:{className:"static"}})]}),(0,s.jsxs)(h.R4,{className:"gap-4 p-6 pb-4",children:[(0,s.jsx)("h4",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{className:"text-content-secondary text-label-xl font-semibold",children:"Error"})}),(0,s.jsxs)("p",{className:"text-body-sm text-content-secondary",children:["An error occurred while"," ","Upgrade Plan"===t?"upgrading":"downgrading"," your plan. Please try again later. If the issue persist please contact our"," ",(0,s.jsx)(V(),{className:"text-content-primary",href:y.ze.SUPPORT,children:"customer support"})]})]}),(0,s.jsx)(h.Es,{className:"border-0 p-4 pt-0",children:(0,s.jsx)(k.$,{className:"w-full",onClick:a,disabled:n,children:"Try Again"})})]})};var Q=a(87606),H=a(51874),J=a(34991),Y=a(80293);let W=e=>{let{closeHandler:t,modalTitle:a}=e,r=(0,Q.jE)();return(0,n.useEffect)(()=>{try{setTimeout(()=>{r.invalidateQueries({queryKey:[J.D.TOKEN_COUNT],refetchType:"all"}),r.invalidateQueries({queryKey:[Y.D.USER_SUBSCRIPTION],refetchType:"all"})},2e3)}catch(e){H.oR.error(e instanceof Error?e.message:"Something went wrong while refreshing the subscription")}},[r]),(0,s.jsxs)(h.Cf,{className:"ring-border-primary z-[1000] w-[496px] max-w-[496px] min-w-[496px] ring-1 ring-inset",overlayProps:{className:"bg-black/50 backdrop-blur-[6px] z-[999]"},children:[(0,s.jsxs)(h.c7,{className:"h-auto flex-row justify-between p-3 pl-6",children:[(0,s.jsx)(h.L3,{className:"text-label-lg font-medium",children:a}),(0,s.jsx)(h.De,{btnProps:{className:"static"}})]}),(0,s.jsxs)(h.R4,{className:"gap-4 p-6 pb-8",children:[(0,s.jsx)("h4",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{className:"text-content-secondary text-label-xl font-semibold",children:"Success"})}),(0,s.jsx)("p",{className:"text-body-sm text-content-secondary",children:"Your subscription plan has been updated! refresh your page to see the changes."})]}),(0,s.jsx)(h.Es,{className:"border-0 p-4 pt-0",children:(0,s.jsx)(k.$,{className:"w-full",onClick:t,children:"Refresh"})})]})},X={LATER:"LATER",SUCCESS:"SUCCESS",ERROR:"ERROR"};var Z=a(10987),ee=a(1640),et=a(75036),ea=a(33652);let es=e=>{let{fromPlanCurrency:t,fromPlanPrice:a,fromPlanName:n,toPlanCurrency:r,toPlanPrice:i,toPlanName:l,formattedDueDate:o,amountDue:d,tax:c,isLoading:u=!1}=e,{locale:m}=(0,f.u)();return(0,s.jsxs)("div",{className:"flex flex-col items-start gap-6 self-stretch pb-2",children:[(0,s.jsx)("h3",{className:"text-content-secondary text-heading-xs font-semibold",children:"Summary"}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-3 self-stretch",children:[(0,s.jsxs)("div",{className:"text-content-secondary text-label-md flex items-center justify-between self-stretch capitalize",children:[(0,s.jsxs)("span",{children:["From ",n]}),u?(0,s.jsx)(et.E,{className:"h-5 w-20"}):(0,s.jsx)("span",{children:(0,ea.v)({currency:t,value:a,locale:m})})]}),(0,s.jsxs)("div",{className:"text-content-secondary text-label-md flex items-center justify-between self-stretch capitalize",children:[(0,s.jsxs)("span",{children:["To ",l]}),u?(0,s.jsx)(et.E,{className:"h-5 w-20"}):(0,s.jsx)("span",{children:(0,ea.v)({currency:r,value:i,locale:m})})]}),(0,s.jsx)(ee.w,{decorative:!0,className:"border-border-primary border-b border-dashed bg-transparent"}),(0,s.jsxs)("div",{className:"text-content-secondary text-label-md flex items-center justify-between self-stretch capitalize",children:[(0,s.jsx)("span",{children:"Subtotal"}),u?(0,s.jsx)(et.E,{className:"h-5 w-20"}):(0,s.jsx)("span",{children:(0,ea.v)({currency:r,value:d-c,locale:m})})]}),(0,s.jsxs)("div",{className:"text-content-secondary text-label-md flex items-center justify-between self-stretch capitalize",children:[(0,s.jsx)("span",{children:"Estimated Tax"}),u?(0,s.jsx)(et.E,{className:"h-5 w-20"}):(0,s.jsx)("span",{children:(0,ea.v)({currency:r,value:c,locale:m})})]}),(0,s.jsx)(ee.w,{decorative:!0,className:"border-border-primary h-0 border-b bg-transparent"}),(0,s.jsxs)("div",{className:"text-label-md text-content-primary flex items-center justify-between self-stretch",children:[(0,s.jsxs)("span",{className:"font-medium",children:["Total amount due on ",o]}),u?(0,s.jsx)(et.E,{className:"h-5 w-20"}):(0,s.jsx)("span",{className:"font-semibold",children:(0,ea.v)({currency:r,value:d,locale:m})})]})]})]})},en=e=>{var t,a,n,r;let{moveToTab:i,changeToPlan:l,product:o,activeSubscription:d}=e,{mutateAsync:c,isPending:u}=(0,I._Z)({product:o}),m=null==d||null==(a=d.subscription)||null==(t=a.stripe)?void 0:t.StripePrice,{stripeExpiresIn:p}=(0,v.B6)(null!=(r=null==d?void 0:d.subscription)?r:null),x=async()=>{try{await c({priceId:l.stripePriceId}),i(X.SUCCESS)}catch(e){i(X.ERROR)}};return m?(0,s.jsxs)(h.Cf,{className:"ring-border-primary z-[1000] w-[496px] max-w-[496px] min-w-[496px] ring-1 ring-inset",overlayProps:{className:"bg-black/50 backdrop-blur-[6px] z-[999]"},children:[(0,s.jsxs)(h.c7,{className:"h-auto flex-row justify-between p-3 pl-6",children:[(0,s.jsx)(h.L3,{className:"text-label-lg font-medium",children:"Downgrade Plan"}),(0,s.jsx)(h.De,{btnProps:{className:"static"}})]}),(0,s.jsxs)(h.R4,{className:"gap-6 overflow-hidden overflow-y-auto p-6 pb-4",children:[(0,s.jsx)("p",{className:"text-body-sm text-content-secondary",children:"At the end of your billing cycle, your subscription plan will automatically renew and update to your new plan."}),(0,s.jsx)(es,{fromPlanCurrency:m.currency,fromPlanPrice:m.price,fromPlanName:"".concat(m.billingInterval," ").concat(null==(n=m.StripeProduct)?void 0:n.name),toPlanCurrency:l.currency,toPlanPrice:l.price,toPlanName:"".concat(l.billingInterval," ").concat(l.name),formattedDueDate:p,amountDue:l.price,tax:0})]}),(0,s.jsx)(h.Es,{className:"gap-3 border-0 p-4 pt-0",children:(0,s.jsx)(k.$,{className:"w-full",onClick:x,disabled:u,children:u?(0,s.jsx)(Z.y,{className:"size-5"}):"Confirm Change"})})]}):null},er="Downgrade Plan",ei=e=>{let{changeToPlan:t,open:a,setIsOpen:r,product:i,activeSubscription:l,setSubscriptionQueryStates:o}=e,[d,c]=(0,n.useState)(X.LATER),{mutateAsync:u,isPending:m}=(0,I._Z)({product:i}),p=t.StripePrice[0]?{...t.StripePrice[0],name:t.name}:void 0,x=e=>{e||o({[G.u.PRICE_ID]:null,[G.u.SUBSCRIPTION_ACTION]:null}),r(e)};if((0,n.useEffect)(()=>{a&&c(X.LATER)},[a]),!p)return null;let f=async()=>{try{await u({priceId:p.stripePriceId}),c(X.SUCCESS)}catch(e){c(X.ERROR)}};return(0,s.jsxs)(h.lG,{open:a,onOpenChange:x,children:[(0,s.jsx)(B.s,{children:(0,s.jsx)(h.c7,{children:er})}),(0,s.jsx)(B.s,{children:(0,s.jsx)(h.rr,{children:"Downgrade your plan to ".concat(t.name,".")})}),(0,s.jsxs)(F.Tabs,{value:d,onValueChange:c,children:[(0,s.jsx)(F.av,{value:X.LATER,children:(0,s.jsx)(en,{activeSubscription:l,product:i,moveToTab:c,changeToPlan:p})}),(0,s.jsx)(F.av,{value:X.SUCCESS,children:(0,s.jsx)(W,{closeHandler:()=>x(!1),modalTitle:er})}),(0,s.jsx)(F.av,{value:X.ERROR,children:(0,s.jsx)(K,{tryAgainHandler:f,modalTitle:er,isLoading:m})})]})]})},el=e=>{let{subscriptions:t,product:a,activeSubscription:r}=e,[i,l]=(0,U.ab)({[G.u.PRICE_ID]:U.tU,[G.u.SUBSCRIPTION_ACTION]:U.tU}),o=i[G.u.SUBSCRIPTION_ACTION],d=i[G.u.PRICE_ID],[c,u]=(0,n.useState)(!1),m=(0,n.useMemo)(()=>{let e=L()(Object.values(t).flatMap(e=>e)).find(e=>e.StripePrice.map(e=>e.stripePriceId===d).reduce((e,t)=>e||t,!1));return e?(e.StripePrice=e.StripePrice.filter(e=>e.stripePriceId===d),e):null},[d,t]);return((0,n.useEffect)(()=>{d&&m&&u(o===z.DOWNGRADE)},[m,u,o,d]),m&&o===z.DOWNGRADE)?(0,s.jsx)(ei,{activeSubscription:r,open:c,setIsOpen:u,changeToPlan:m,product:a,setSubscriptionQueryStates:l}):null};var eo=a(41009),ed=a(2830),ec=a(11386),eu=a(615);let em=(0,eu.F)("focus-visible:ring-2 focus-visible:outline-none aria-checked:focus-visible:ring-border-inverse-hover focus-visible:ring-border-tertiary-hover focus-visible:border-border-tertiary-hover focus-visible:ring-offset-2 focus-visible:ring-offset-border-primary group aspect-square rounded-full border-2 border-border-tertiary hover:border-border-tertiary-hover text-content-primary aria-checked:border-none aria-checked:bg-surface-inverse aria-checked:disabled:bg-fill-inverse-disabled aria-checked:hover:bg-fill-inverse-hover disabled:border-border-tertiary-disabled aria-checked:active:bg-fill-inverse-active disabled:cursor-not-allowed",{variants:{size:{sm:"size-4",md:"size-5"}},defaultVariants:{size:"md"}}),ep=e=>{let{className:t,...a}=e;return(0,s.jsx)(ed.bL,{"data-slot":"radio-group",className:(0,ec.cn)("grid gap-3",t),...a})},ex=e=>{let{className:t,size:a,...n}=e;return(0,s.jsx)(ed.q7,{"data-slot":"radio-group-item",className:(0,ec.cn)("group",em({size:a}),t),...n,children:(0,s.jsx)(ed.C1,{"data-slot":"radio-group-indicator",className:(0,ec.cn)("flex items-center justify-center",a),children:(0,s.jsx)("div",{className:(0,ec.cn)("bg-background flex items-center justify-center rounded-full transition-colors duration-300 [.sm_&]:size-1.5",a),children:(0,s.jsx)("div",{className:"bg-background group-disabled:bg-fill-primary-disabled size-2 rounded-full transition-colors duration-300 [.sm_&]:size-1"})})})})};ex.displayName=ed.q7.displayName;let ef={IMMEDIATE:"IMMEDIATE",LATER:"LATER"},eb={OPTIONS:"OPTIONS",SUCCESS:"SUCCESS",ERROR:"ERROR"},eh=e=>{var t,a,r,i,l,o,d,u;let{moveToTab:m,selectedTimeFrame:p,setSelectedTimeFrame:x,changeToPlan:f,product:b,activeSubscription:_}=e,[g,y]=(0,n.useState)(!1),{stripeExpiresIn:E}=(0,v.B6)(null!=(l=null==_?void 0:_.subscription)?l:null),N=null==_||null==(a=_.subscription)||null==(t=a.stripe)?void 0:t.StripePrice,j=(null==N?void 0:N.billingInterval)==="yearly"&&"monthly"===f.billingInterval,{data:A,isLoading:O,isError:S}=(0,I.Ko)({priceId:f.stripePriceId,enabled:p===ef.IMMEDIATE,product:b}),T=(0,I.vY)({product:b}),C=(0,I._Z)({product:b}),P=p===ef.IMMEDIATE&&O||!N||T.isPending||C.isPending,D=S?0:null!=(o=null==A?void 0:A.amount)?o:0,$=null!=(d=null==A?void 0:A.tax)?d:0,w=p===ef.LATER?E:c()().format("MMM D, YYYY"),R=S?0:(null!=(u=f.price)?u:0)-(D-$),M=async()=>{try{await T.mutateAsync({priceId:f.stripePriceId}),m(eb.SUCCESS)}catch(e){m(eb.ERROR)}},L=async()=>{try{await C.mutateAsync({priceId:f.stripePriceId}),m(eb.SUCCESS)}catch(e){m(eb.ERROR)}};return((0,n.useEffect)(()=>{p!==ef.LATER&&D<0&&(x(ef.LATER),y(!0),H.oR.warning("Current plan value exceeds the target plan. Please select another plan or change at the end of your subscription."))},[D,p,x]),N)?(0,s.jsxs)(h.Cf,{className:"ring-border-primary z-[1000] w-[496px] max-w-[496px] min-w-[496px] ring-1 ring-inset",children:[(0,s.jsxs)(h.c7,{className:"h-auto flex-row justify-between p-3 pl-6",children:[(0,s.jsx)(h.L3,{className:"text-label-lg font-medium",children:"Upgrade Plan"}),(0,s.jsx)(h.De,{})]}),(0,s.jsxs)(h.R4,{className:"gap-8 overflow-hidden overflow-y-auto p-6 pb-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start gap-6 self-stretch",children:[(0,s.jsx)("h3",{className:"text-content-secondary text-heading-xs font-semibold",children:"Time Frame"}),(0,s.jsxs)(ep,{value:p,onValueChange:x,children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 select-none aria-disabled:pointer-events-none aria-disabled:opacity-30","aria-disabled":j||g,children:[(0,s.jsx)(ex,{value:ef.IMMEDIATE,id:ef.IMMEDIATE,disabled:j||g}),(0,s.jsx)("label",{htmlFor:ef.IMMEDIATE,className:"text-body-sm text-content-secondary",children:"Change immediately with allocation"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 select-none",children:[(0,s.jsx)(ex,{value:ef.LATER,id:ef.LATER}),(0,s.jsx)("label",{htmlFor:ef.LATER,className:"text-body-sm text-content-secondary",children:"Change at the end of subscription period"})]})]}),(0,s.jsx)("p",{className:"text-body-sm text-content-secondary",children:p===ef.IMMEDIATE?"Changing the plan right now will allocate your current subscriptions remaining ".concat(eo.q.PLURAL," and time to the new one."):"Changing the plan at the end of subscription period will automatically update your plan to the newly selected."})]}),p===ef.LATER?(0,s.jsx)(es,{fromPlanCurrency:N.currency,fromPlanPrice:N.price,fromPlanName:"".concat(N.billingInterval," ").concat(null==(r=N.StripeProduct)?void 0:r.name),toPlanCurrency:f.currency,toPlanPrice:f.price,toPlanName:"".concat(f.billingInterval," ").concat(f.name),formattedDueDate:w,amountDue:f.price,tax:0}):(0,s.jsx)(es,{fromPlanCurrency:N.currency,fromPlanPrice:R,fromPlanName:"".concat(N.billingInterval," ").concat(null==(i=N.StripeProduct)?void 0:i.name),toPlanCurrency:f.currency,toPlanPrice:f.price,toPlanName:"".concat(f.billingInterval," ").concat(f.name),formattedDueDate:w,amountDue:D,tax:$,isLoading:O})]}),(0,s.jsx)(h.Es,{className:"border-0 p-4 pt-0",children:(0,s.jsx)(k.$,{className:"w-full",onClick:()=>{p===ef.IMMEDIATE?M():L()},disabled:P,children:T.isPending||C.isPending?(0,s.jsx)(Z.y,{className:"size-5"}):"Confirm Change"})})]}):null},ev="Upgrade Plan",e_=e=>{let{changeToPlan:t,open:a,setIsOpen:r,product:i,activeSubscription:l,setSubscriptionQueryStates:o}=e,[d,c]=(0,n.useState)(eb.OPTIONS),[m,p]=(0,n.useState)(ef.IMMEDIATE),x=(0,u.usePathname)(),{mutateAsync:f,isPending:b}=(0,I._Z)({product:i}),{mutateAsync:v,isPending:_}=(0,I.vY)({product:i}),g=t.StripePrice[0]?{...t.StripePrice[0],name:t.name}:void 0;if((0,n.useEffect)(()=>{a&&(c(eb.OPTIONS),p(ef.IMMEDIATE))},[a]),!g)return null;let y=async()=>{if(m===ef.LATER)try{await f({priceId:null==g?void 0:g.stripePriceId}),c(eb.SUCCESS)}catch(e){c(eb.ERROR)}else try{await v({priceId:null==g?void 0:g.stripePriceId}),c(eb.SUCCESS)}catch(e){c(eb.ERROR)}};return(0,s.jsxs)(h.lG,{onOpenChange:e=>{e||o({[G.u.PRICE_ID]:null,[G.u.SUBSCRIPTION_ACTION]:null}),r(e)},open:a,children:[(0,s.jsx)(B.s,{children:(0,s.jsx)(h.c7,{children:ev})}),(0,s.jsx)(B.s,{children:(0,s.jsx)(h.rr,{children:"Upgrade your plan to ".concat(t.name," and enjoy the benefits of the new plan. Choose a time frame that suits you best.")})}),(0,s.jsxs)(F.Tabs,{value:d,onValueChange:e=>{c(e)},children:[(0,s.jsx)(F.av,{value:eb.OPTIONS,children:(0,s.jsx)(eh,{activeSubscription:l,product:i,moveToTab:c,selectedTimeFrame:m,setSelectedTimeFrame:p,changeToPlan:g})}),(0,s.jsx)(F.av,{value:eb.SUCCESS,children:(0,s.jsx)(W,{closeHandler:()=>{window.location.href=x},modalTitle:ev})}),(0,s.jsx)(F.av,{value:eb.ERROR,children:(0,s.jsx)(K,{isLoading:b||_,tryAgainHandler:y,modalTitle:ev})})]})]})},eg=e=>{let{subscriptions:t,product:a,activeSubscription:r}=e,[i,l]=(0,U.ab)({[G.u.PRICE_ID]:U.tU,[G.u.SUBSCRIPTION_ACTION]:U.tU}),o=i[G.u.SUBSCRIPTION_ACTION],d=i[G.u.PRICE_ID],[c,u]=(0,n.useState)(!1),m=(0,n.useMemo)(()=>{let e=L()(Object.values(t).flatMap(e=>e)).find(e=>e.StripePrice.map(e=>e.stripePriceId===d).reduce((e,t)=>e||t,!1));return e?(e.StripePrice=e.StripePrice.filter(e=>e.stripePriceId===d),e):null},[d,t]);return((0,n.useEffect)(()=>{d&&m&&u(o===z.UPGRADE)},[m,u,o,d]),m&&o===z.UPGRADE)?(0,s.jsx)(e_,{activeSubscription:r,open:c,setIsOpen:u,changeToPlan:m,product:a,setSubscriptionQueryStates:l}):null},ey=()=>{let{data:e}=(0,I.Yu)(),{data:t}=(0,I.aR)();return t&&e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eg,{activeSubscription:t,product:"imagine",subscriptions:e}),(0,s.jsx)(el,{activeSubscription:t,product:"imagine",subscriptions:e})]}):null};var eE=a(97315),eI=a(46626);function eN(e){let{...t}=e;return(0,s.jsx)(eE._s.Root,{"data-slot":"drawer",...t})}let ej=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,ec.cn)("flex h-full flex-1 flex-col gap-1 self-stretch",t),...a})};function eA(e){let{...t}=e;return(0,s.jsx)(eE._s.Portal,{"data-slot":"drawer-portal",...t})}function eO(e){let{className:t,...a}=e;return(0,s.jsx)(eE._s.Overlay,{"data-slot":"drawer-overlay",className:(0,ec.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 bg-neutral-black/50 fixed inset-0 z-50",t),...a})}function eS(e){let{className:t,children:a,overlayProps:n,noVaul:r=!1,...i}=e;return(0,s.jsxs)(eA,{"data-slot":"drawer-portal",children:[(0,s.jsx)(eO,{...n}),(0,s.jsxs)(eE._s.Content,{"data-slot":"drawer-content",className:(0,ec.cn)("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...i,children:[!r&&(0,s.jsx)("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),a]})]})}function ek(e){let{className:t,...a}=e;return(0,s.jsx)(eE._s.Title,{"data-slot":"drawer-title",className:(0,ec.cn)("text-foreground font-semibold",t),...a})}function eT(e){let{className:t,...a}=e;return(0,s.jsx)(eE._s.Description,{"data-slot":"drawer-description",className:(0,ec.cn)("text-muted-foreground text-sm",t),...a})}var eC=a(78848);let eP={Root:e=>{let{children:t,open:a,onOpenChange:n}=e;return(0,eC.jj)()?(0,s.jsx)(eN,{open:a,onOpenChange:n,children:t}):(0,s.jsx)(h.lG,{open:a,onOpenChange:n,children:t})},Content:e=>{let{children:t,dialogProps:a,drawerProps:n}=e;return(0,eC.jj)()?(0,s.jsx)(eS,{...n,children:t}):(0,s.jsx)(h.Cf,{...a,children:t})},Title:e=>{let{children:t,dialogProps:a,drawerProps:n}=e;return(0,eC.jj)()?(0,s.jsx)(ek,{...n,children:t}):(0,s.jsx)(h.L3,{...a,children:t})},Description:e=>{let{children:t,dialogProps:a,drawerProps:n}=e;return(0,eC.jj)()?(0,s.jsx)(eT,{...n,children:t}):(0,s.jsx)(h.rr,{...a,children:t})},Body:e=>{let{children:t,dialogProps:a,drawerProps:n}=e;return(0,eC.jj)()?(0,s.jsx)(ej,{...n,children:t}):(0,s.jsx)(h.R4,{...a,children:t})}};var eD=a(53605);let e$=()=>{let{setIsOpen:e}=(0,A.i)(),{activeStripePlanName:t}=(0,eD.c)(),[,a]=(0,U.ZA)(G.u.TOP_UP_MODAL_OPEN,U.cr);return t&&t!==b.M4.FREE?(0,s.jsx)(k.$,{size:"lg",variant:"secondary",onClick:()=>{e(!1),a(!0)},className:"tablet:w-fit w-full",children:"Buy credit packs"}):null};var ew=a(49013),eR=a(65327);let eM=e=>{var t,a;let{title:r,description:i,plansToDisplay:l,onClose:o,hideTabs:d}=e,{billingInterval:c}=(0,eD.c)(),{defaultInterval:u}=(0,E.bO)().subscriptionPlansInfo,[m,p]=(0,n.useState)(),x=null!=(t=Object.keys(l).every(e=>4===l[e].length))&&t;return(0,s.jsxs)(h.R4,{className:"relative overflow-auto px-3.5 pt-8 pb-12",children:[(0,s.jsx)(eR.e,{title:r,description:i}),(0,s.jsx)(ew.t,{subscriptionItems:l,hideTabs:d,activeTab:null!=(a=null!=m?m:c)?a:u,setActiveTab:p}),!x&&(0,s.jsxs)("div",{className:"tablet:flex-nowrap mt-8 flex flex-wrap items-center justify-center gap-2 self-stretch",children:[(0,s.jsx)(e$,{}),(0,s.jsx)(k.$,{asChild:!0,variant:"outline",size:"lg",className:"tablet:w-fit w-full",onClick:o,children:(0,s.jsx)(V(),{href:y.ze.SUBSCRIPTION,children:"Explore plans"})})]})]})},eL=e=>{var t,a;let{plansToDisplay:n,title:r,description:i,isError:l,isLoading:o,onClose:d,hideTabs:c,redirectRoute:u,generationTool:m}=e,p=null!=(t=Object.keys(n).every(e=>2===n[e].length))&&t,x=null!=(a=Object.keys(n).every(e=>1===n[e].length))&&a;return(0,s.jsxs)(h.Cf,{className:(0,ec.cn)("tablet:max-h-[calc(100vh-116px)] tablet:rounded-4 tablet:max-w-[calc(100%-16px)] tablet:px-6 desktop-l:max-w-[1700px] z-[100] max-h-svh w-full max-w-max gap-0 overflow-auto rounded-none",{"tablet:max-w-[min(calc(100%-16px),908px)] w-full":p,"size-full max-h-[min(calc(100vh-16px),var(--upgrade-access-modal-single-plan-height))] max-w-[min(calc(100%-16px),520px)] lg:max-w-[min(calc(100%-16px),1024px)]":x}),overlayProps:{className:"backdrop-blur-[6px]"},style:{"--upgrade-access-modal-single-plan-height":"896px"},children:[(0,s.jsxs)(B.s,{children:[(0,s.jsx)(h.L3,{children:r}),(0,s.jsx)(h.rr,{children:"Upgrade to a new plan"})]}),(0,s.jsx)(h.De,{btnProps:{size:"icon-sm",className:"sticky z-[50] ml-auto top-4 "}}),(0,s.jsx)(eM,{title:r,description:i,isError:l,isLoading:o,plansToDisplay:n,onClose:d,hideTabs:c,redirectRoute:u,generationTool:m})]})},eU=()=>{let{isOpen:e,setIsOpen:t,title:a,redirectRoute:r,setTitle:i,setUpgradeModalParams:l,description:o,setDescription:d}=(0,A.i)(),{user:c}=(0,f.u)(),{promotionCampaign:m}=(0,E.bO)(),{isError:p,isLoading:b}=(0,I.Yu)(),h=(()=>{let{data:e}=(0,I.Yu)(),{upgradeablePlanNames:t}=(0,A.i)(),{subscribedPriceItem:a}=(0,eD.c)();return(0,n.useMemo)(()=>{let s;if(!e)return null;if(a){var n,r,i;let t=null!=(i=null!=(r=a.name)?r:null==(n=a.StripeProduct)?void 0:n.name)?i:"Standard";s=Object.keys(e).reduce((a,s)=>(a[s]=e[s].filter(e=>x.I3.indexOf(e.name)>x.I3.indexOf(t)),a),{})}else s=e;return Object.keys(s).reduce((e,a)=>(e[a]=s[a].filter(e=>t.includes(e.name)),e),{})},[e,a,t])})(),v=(0,u.useSearchParams)(),_=(0,u.useRouter)(),g=(0,u.usePathname)(),y="true"===v.get(G.u.SHOW_UPGRADE_MODAL),N=(0,n.useMemo)(()=>!h||Object.values(h).every(e=>0===e.length),[h]),j=(0,n.useCallback)(()=>{let e=new URLSearchParams(v.toString());e.delete(G.u.SHOW_UPGRADE_MODAL);let t="".concat(g).concat(e.size?"?".concat(e):"");_.replace(t)},[v,g,_]),O=(0,n.useCallback)(()=>{t(!1),i(x.r_.DEFAULT.TITLE),d(x.r_.DEFAULT.DESCRIPTION),j()},[t,i,j,d]);return((0,n.useEffect)(()=>{if(!c)return;let e=new Set(m.visibleTo);y&&(l({isOpen:!0,upgradeablePlanNames:x.O$.filter(t=>!e.has(t))}),j())},[c,O,N,j,l,y,m.visibleTo]),!h||N)?null:(0,s.jsx)(eP.Root,{open:e,onOpenChange:t,children:(0,s.jsx)(eL,{title:a,description:o,isError:p,isLoading:b,plansToDisplay:h,onClose:O,hideTabs:!1,redirectRoute:r})})};var eG=a(18010),ez=a(66238),eF=a(54388),eB=a(99588);let eq=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(B.s,{children:[(0,s.jsxs)(eP.Title,{children:["Top up your ",eo.q.PLURAL]}),(0,s.jsxs)(eP.Description,{children:["Running low on ",eo.q.PLURAL,"? Purchase"," ",eo.q.PLURAL," "]})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"text-heading-md font-semibold",children:["Buy ",eo.q.PLURAL]}),(0,s.jsx)(h.De,{})]}),(0,s.jsx)("p",{className:"text-body-sm text-content-tertiary",children:"Get access to more generations"})]})]});var eV=a(87552),eK=a(53513);let eQ=e=>{let{selectedPriceId:t}=e,{buyCreditsOfferings:a}=(0,E.bO)(),n=a[t];if(n)return(0,s.jsxs)("div",{className:"rounded-4 text-body-xs border-border-primary relative w-full space-y-4 overflow-hidden border p-4",children:[n.discountPercentage&&(0,s.jsxs)(eV.E,{className:"bg-fill-brand-secondary text-content-brand text-label-sm pointer-events-none absolute top-2.5 right-2.5 font-medium",children:[n.discountPercentage,"% off"]}),(0,s.jsx)("p",{className:"font-medium",children:"Includes: "}),(0,s.jsx)("div",{className:"space-y-3",children:n.offerings.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-end justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eI.Srz,{className:"size-4 min-w-4"}),(0,s.jsx)("p",{className:"line-clamp-2",children:e.text})]}),e.info&&(0,s.jsxs)(eK.m_,{children:[(0,s.jsx)(eK.k$,{children:(0,s.jsx)(eI.Cd2,{className:"text-content-tertiary size-4.5"})}),(0,s.jsx)(eK.ZI,{children:e.info})]})]},t))})]})},eH=()=>(0,s.jsxs)("div",{className:"rounded-4 text-body-xs border-border-primary relative w-full max-w-[290px] space-y-4 overflow-hidden border p-4",children:[(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 absolute top-0 left-0 -z-10 h-[198px] w-full animate-pulse opacity-80 blur-[100px]"}),(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-4 w-16 animate-pulse"}),(0,s.jsx)("div",{className:"rounded-4 space-y-3",children:Array.from({length:3},(e,t)=>(0,s.jsxs)("div",{className:"rounded-4 flex items-end justify-between gap-2",children:[(0,s.jsxs)("div",{className:"rounded-4 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 size-4 min-w-4 animate-pulse"}),(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-4 w-32 animate-pulse"})]}),0===t&&(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 size-4.5 animate-pulse"})]},t))})]}),eJ=()=>(0,s.jsxs)("div",{className:"flex min-h-[304px] flex-col gap-4",children:[(0,s.jsxs)("div",{className:"rounded-4 space-y-2",children:[(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-8 w-24 animate-pulse"}),(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-4 w-32 animate-pulse"})]}),(0,s.jsxs)("div",{className:"rounded-4 flex h-full flex-col justify-between gap-6",children:[(0,s.jsxs)("div",{className:"rounded-4",children:[(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-4 w-20 animate-pulse"}),(0,s.jsxs)("div",{className:"relative mt-2 w-[290px]",children:[(0,s.jsx)("div",{className:"bg-surface-tertiary h-1 w-full animate-pulse rounded-full"}),(0,s.jsx)("div",{className:"pointer-events-none absolute top-1/2 right-0 left-0 -z-10 flex w-[290px] -translate-y-1/2 justify-between",children:Array.from({length:5},(e,t)=>(0,s.jsx)("div",{className:"bg-surface-tertiary size-2 animate-pulse rounded-full"},t))})]})]}),(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-10 w-full animate-pulse"})]})]});var eY=a(19533),eW=a(16001),eX=a(73583);let eZ=e=>{let{isLoading:t,selectedPriceId:a}=e,[n]=(0,U.ZA)(G.u.PRODUCT_ID,(0,U.M1)(b.Ve.options)),r=(0,I.lM)({product:null!=n?n:"imagine",successUrl:(0,eW.G)(y.ze.HOME,window.location.origin),cancelUrl:(0,eW.G)(y.ze.HOME,window.location.origin)}),{isRevenueCatActiveAndNotStripeActive:i}=(0,eD.c)(),l=(0,s.jsx)("button",{className:"rounded-4 bg-fill-brand text-label-xl group text-content-fixed-inverse relative mt-6 flex h-14 w-full items-center justify-center overflow-hidden font-medium",disabled:t||r.isPending||i,onClick:()=>{r.mutate(null!=a?a:"",{onSuccess:eX.M,onError:eX.j})},children:r.isPending?(0,s.jsx)(Z.y,{className:"size-5"}):(0,s.jsxs)("div",{className:"rounded-4 bg-fill-brand text-label-xl group text-content-fixed-inverse relative flex h-14 w-full items-center justify-center overflow-hidden font-medium",children:[(0,s.jsxs)("span",{className:"z-10 flex items-center justify-center gap-2",children:["Buy credits",(0,s.jsx)(eI.JLc,{className:"size-4.5 transition-transform group-hover:translate-x-1"})]}),(0,s.jsx)("span",{className:"absolute top-2.5 left-1/2 h-[179px] w-4/5 -translate-x-1/2 animate-[float_2400ms_infinite] rounded-[50%] bg-[#CB89FEB8] blur-md"})]})});return i?(0,s.jsxs)(eK.m_,{children:[(0,s.jsx)(eK.k$,{asChild:!0,children:(0,s.jsx)("span",{className:"inline-flex w-full",children:l})}),(0,s.jsx)(eK.ZI,{children:"You can manage your subscription on the mobile app."})]}):l},e0=e=>{let{selectedPrice:t,minPrice:a,discountPercentage:n,currency:r,selectedPlanTokens:i}=e,{locale:l}=(0,f.u)(),o=t-n/100*t,d=(0,ea.v)({value:o,currency:r,locale:l}),c=(0,ea.v)({value:Number((e=>{let[t,a=""]=e.toFixed(10).split(".");if(a){let e=a.search(/[1-9]/);if(e>=2)return t+"."+a.slice(0,e+1)}return e.toFixed(2)})(t/(i||1))),currency:r,locale:l});return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("h4",{className:(0,ec.cn)("text-heading-md flex items-center gap-[11px] font-semibold transition-all duration-300 ease-out",{"text-content-brand":t!==a,"text-display-xs":d.length<=5,"text-heading-md":d.length>5}),children:[d,o!==t&&(0,s.jsxs)("span",{className:(0,ec.cn)("text-content-tertiary-disabled relative font-medium",{"text-heading-xs":d.length<=5,"text-body-sm":d.length>5}),children:[(0,s.jsx)("span",{className:"bg-content-tertiary absolute top-1/2 h-0.5 w-full -rotate-[15deg] rounded-full"}),(0,ea.v)({value:t,currency:r,locale:l})]})]}),(0,s.jsx)("p",{className:"text-body-sm text-content-secondary transition-all duration-300 ease-out",children:i&&"Total credits: ".concat(i.toLocaleString()," (").concat(c," / credit)")})]})};var e1=a(33142);let e3=e=>{let{stripePlan:t,onClick:a,value:n}=e,{locale:r}=(0,f.u)();return(0,s.jsx)("button",{className:"group flex cursor-pointer flex-col items-center gap-1 first:items-start last:items-end",onClick:a,children:(0,s.jsx)("span",{className:(0,ec.cn)("text-label-sm text-center",{"text-content-tertiary":t.stripePriceId!==n,"text-content-secondary":t.stripePriceId===n}),children:(0,ea.v)({value:t.price,currency:t.currency,locale:r,options:{notation:"compact",maximumFractionDigits:1}})})})},e2=e=>{let{minPrice:t,maxPrice:a,sortedStripePrices:r,onChange:i,value:l}=e,o=(a-t)/(r.length-1),[d,c]=(0,n.useState)(t),u=r.reduce((e,a,s)=>{let{stripePriceId:n}=a;return e[t+o*s]=n,e},{});return(0,s.jsxs)("div",{className:"relative w-full space-y-2",children:[(0,s.jsx)(e1.A,{value:[d],step:o,min:t,max:a,className:"[&_[data-slot=slider-thumb]]:border-border-secondary [&_[data-slot=slider-thumb]]:bg-fill-inverse relative z-10 w-full [&_[data-slot=slider-range]]:transition-all [&_[data-slot=slider-range]]:duration-200 [&_[data-slot=slider-range]]:ease-out [&_[data-slot=slider-thumb]]:size-5 [&_[data-slot=slider-thumb]]:transition-transform [&_[data-slot=slider-thumb]]:duration-200 [&_[data-slot=slider-thumb]]:ease-out [&_[data-slot=slider-track]]:h-1",onValueChange:e=>{let[a]=e;return(e=>{let t=u[e];t&&(i(t),c(e))})(null!=a?a:t)}}),(0,s.jsx)("div",{className:"pointer-events-none absolute top-0 right-0 left-0 z-20 flex w-full justify-between",children:r.map((e,a)=>{let n=t+o*a;return(0,s.jsx)("div",{className:(0,ec.cn)("bg-background h-1 w-2 transition-opacity duration-200",{"opacity-0":n<=d})},e.id)})}),(0,s.jsx)("div",{className:"absolute top-3 right-0 left-0 z-0 flex w-full cursor-pointer justify-between",children:r.map(e=>(0,s.jsx)(e3,{value:l,stripePlan:e,onClick:()=>{let t=Object.keys(u).find(t=>u[Number(t)]===e.stripePriceId);t&&(i(e.stripePriceId),c(Number(t)))}},e.id))})]})},e5=e=>{var t,a,n,r;let{stripePrices:i,value:l,onChange:o,isLoading:d}=e,{buyCreditsOfferings:c}=(0,E.bO)(),u=c[l],m=i.sort((e,t)=>e.price-t.price);if(!m[0])return;let p=(null==(t=m[0])?void 0:t.price)||0,x=(null==(a=m.at(-1))?void 0:a.price)||0,f={...m.find(e=>{let{stripePriceId:t}=e;return t===l})||m[0],...u};return(0,s.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,s.jsx)(e0,{minPrice:p,currency:f.currency,selectedPrice:f.price,selectedPlanTokens:null!=(n=f.tokens)?n:0,discountPercentage:null!=(r=f.discountPercentage)?r:0}),(0,s.jsx)(e2,{value:l,onChange:o,minPrice:p,maxPrice:x,sortedStripePrices:m})]}),(0,s.jsx)("div",{children:(0,s.jsx)(eZ,{isLoading:d,selectedPriceId:l})})]})},e4=()=>{var e,t,a,r;let[i,l]=(0,U.ZA)(G.u.TOP_UP_MODAL_OPEN,U.cr.withDefault(!1)),{aggregator:o}=(0,eB.p)(),{computeUserAnalyticsInfo:d}=(0,eF.U)(),{data:c,isLoading:u}=(0,I.XE)({product:"imagine",enabled:!0}),m=null==c||null==(t=c[0])||null==(e=t.StripePrice[0])?void 0:e.stripePriceId,[p,x]=(0,n.useState)();return(0,n.useEffect)(()=>{x(m)},[m]),(0,n.useEffect)(()=>{if(!i)return;let{page:e,userStatus:t,userPlan:a,userPlanPeriod:s,source:n,id:r}=d();t!==ez.k.FREE&&o.log(eG.M.buyCredits.withProperties({page_name:e,source:n,user_account_status:t,user_plan:a,user_plan_period:s,distinct_id:r}))},[o,d,i]),(0,s.jsx)(eP.Root,{open:i,onOpenChange:()=>{l(e=>!e),x(m)},children:(0,s.jsx)(eP.Content,{dialogProps:{className:"flex w-full max-w-[655px] flex-col items-start gap-6 p-6"},drawerProps:{className:"p-4 mobile:p-6 rounded-t-6 border-none",noVaul:!0},children:(0,s.jsxs)(eP.Body,{dialogProps:{className:"flex flex-col gap-6"},drawerProps:{className:"flex flex-col gap-6 !outline-none overflow-hidden"},children:[(0,s.jsx)(eq,{}),(0,s.jsx)("div",{className:"flex w-full flex-col gap-6 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[u?(0,s.jsx)(eJ,{}):(0,s.jsx)(e5,{value:null!=p?p:"",onChange:e=>{x(e)},stripePrices:c&&null!=(r=null==(a=c[0])?void 0:a.StripePrice)?r:[],isLoading:u}),u?(0,s.jsx)(eH,{}):(0,s.jsx)(eQ,{selectedPriceId:null!=p?p:""})]})})]})})})};var e6=a(49645),e7=a(27583),e8=a(37583),e9=a(81491),te=a(60357),tt=a(87146);let ta=e=>{let{dialog:t}=e,{isVisible:a,closeAnnouncementDialog:r,translateY:i}=(e=>{let{data:t,isPending:a}=(0,tt.en)(e.flagName),{mutate:s}=(0,tt.Jl)(),{paths:r=[]}=e,i=(0,eC.hM)(),l=(0,te.DE)(),o=(0,u.usePathname)(),[d,c]=(0,n.useState)(0),[m,p]=(0,n.useState)(!0),x=(0,n.useMemo)(()=>!r.length||r.some(e=>(0,eW.W)({pathname:o,targetPath:e,exact:!0})),[r,o]),f=(0,n.useMemo)(()=>!a&&!(null==t?void 0:t.status)&&m&&x,[a,t,m,x]);return(0,n.useEffect)(()=>{if(!l||!f)return;let e=()=>{let e=document.getElementById(e9.G.PROMPT_BOX),t=document.getElementById(e9.G.ANNOUNCEMENT_DIALOG);if(!t)return;let a=null==e?void 0:e.getBoundingClientRect(),s=t.getBoundingClientRect();if(a&&a.right>=s.left){let e=8*!i;c(-(a.height+e))}else c(0)};e();let t=()=>e();return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[i,f,l,o]),{isVisible:f,closeAnnouncementDialog:()=>{p(!1),e.flagName&&s({flag:e.flagName,status:!0})},translateY:d}})(t),{title:l,description:o,ctaText:d,ctaLink:c,asset:m,assetType:p,thumbnail:x}=t;return(0,s.jsx)(e6.N,{children:a&&(0,s.jsxs)(e7.P.div,{id:e9.G.ANNOUNCEMENT_DIALOG,initial:{opacity:0,scale:.95,y:0},animate:{opacity:1,scale:1,y:i},exit:{opacity:0,scale:.95,y:0},transition:{duration:.2,ease:"easeIn"},className:"border-border-primary rounded-4 bg-surface-primary-variant fixed right-4 bottom-8 z-50 flex w-64 flex-col gap-2 overflow-hidden border p-3 pb-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"rounded-2.5 relative h-50 max-h-50 overflow-hidden",children:["image"===p?(0,s.jsx)(O.default,{src:m,alt:l,width:264,height:216,className:"object-cover",draggable:!1}):(0,s.jsx)("video",{src:m,poster:x,autoPlay:!0,muted:!0,loop:!0,className:"object-cover",draggable:!1}),(0,s.jsx)(k.$,{variant:"img-hover-cta",size:"icon-xs",shape:"pill",className:"absolute top-1.5 right-1.5",onClick:r,children:(0,s.jsx)(eI.w0d,{})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"text-body-sm space-y-0.5",children:[(0,s.jsx)("h1",{className:"font-medium",children:l}),(0,s.jsx)("p",{className:"text-content-tertiary",children:o})]}),(0,s.jsx)(k.$,{size:"sm",className:"w-full",asChild:!0,children:(0,s.jsxs)(e8.i,{href:c,onClick:r,children:[(0,s.jsx)("span",{children:d}),(0,s.jsx)(eI.vKP,{})]})})]})]})})},ts=()=>{let{announcementDialogs:e}=(0,E.bO)();if(!e.enabled)return null;let{dialogs:t=[]}=e;return t.map(e=>(0,s.jsx)(ta,{dialog:e},e.flagName))};var tn=a(90060),tr=a(98502),ti=a(61938);let tl={SIGN_IN:"sign-in"};var to=a(82873),td=a(8017),tc=a(4177),tu=a(63638),tm=a(61523);let tp=()=>{let{authModalCarouselAssets:e}=(0,E.bO)(),t=(0,tm.gU)(),[a,r]=(0,n.useState)(0),i=e[a];return(0,n.useEffect)(()=>{if(!t.api)return;let e=()=>{var e,a;r(null!=(a=null==(e=t.api)?void 0:e.selectedScrollSnap())?a:0)};return t.api.on("select",e),e(),()=>{var a;null==(a=t.api)||a.off("select",e)}},[t.api]),(0,n.useEffect)(()=>{if(i&&"image"===i.type){let e=setTimeout(()=>{var e;null==(e=t.api)||e.scrollNext()},4e3);return()=>{clearTimeout(e)}}},[t.api,i]),(0,s.jsx)(tm.Wk,{className:"ml-0 size-full",children:e.map((e,a)=>(0,s.jsxs)(tm.A7,{className:"relative size-full pl-0",children:["image"===e.type?(0,s.jsx)(O.default,{src:e.src,alt:"Imagine Generation ".concat(a+1),className:"object-cover object-center",fill:!0,loading:"eager",priority:0===a}):(0,s.jsx)("video",{src:e.src,className:"size-full object-cover object-top",poster:e.poster,ref:e=>{let a=()=>{var e;null==(e=t.api)||e.scrollNext()};return null==e||e.addEventListener("ended",a),()=>{null==e||e.removeEventListener("ended",a)}},muted:!0,playsInline:!0,autoPlay:!0}),(0,s.jsx)("div",{className:"text-content-primary-inverse-disabled text-label-sm absolute right-5.5 bottom-5.5 font-medium",children:"Generated by ImagineArt"})]},a))})},tx=()=>(0,s.jsx)(tm.FN,{plugins:[(0,tu.A)({})],opts:{loop:!0,duration:25},className:"desktop:w-1/2 rounded-4 laptop:block hidden size-full w-[40%] overflow-hidden shadow-[0_0_24px_0_rgba(var(--elevation-lg))]",children:(0,s.jsx)(tp,{})}),tf=e=>{let{onClick:t}=e,a=(()=>{var e;let t=(0,u.useSearchParams)(),a=(0,u.usePathname)();return null!=(e=t.get(G.u.REDIRECT))?e:y.f3.has(a)?y.ze.HOME:a})();return(0,s.jsxs)(k.$,{variant:"secondary",className:"flex w-full max-w-[394px] gap-2",shape:"pill",size:"lg",onClick:()=>{null==t||t(),(0,td.fH)({slug:tl.SIGN_IN,productName:eY.h.NEXT_PUBLIC_APP_NAME_FOR_AUTH,authBaseUrl:new URL(eY.h.NEXT_PUBLIC_VYRO_AUTH_URL),redirect:a,open:"discord"})},children:[(0,s.jsx)(eI.ujJ,{}),"Continue with Discord"]})};var tb=a(38035),th=a.n(tb),tv=a(89829);let t_=()=>(0,s.jsx)(k.$,{variant:"secondary",type:"button",className:"w-full max-w-[394px]",shape:"pill",size:"lg",children:(0,s.jsx)(Z.y,{className:"my-auto size-4"})}),tg=e=>{let{onClick:t}=e,a=(0,te.DE)(),n=(0,tv._n)();return a?(0,s.jsx)(th(),{appId:eY.h.NEXT_PUBLIC_FACEBOOK_APP_ID,render:e=>{let{onClick:a}=e;return n.isPending?(0,s.jsx)(t_,{}):(0,s.jsxs)(k.$,{variant:"secondary",className:"flex w-full max-w-[394px] gap-2",shape:"pill",size:"lg",disabled:n.isPending,onClick:()=>{null==t||t(),null==a||a()},children:[(0,s.jsx)(eI.T9F,{}),"Continue with Facebook"]})},onSuccess:e=>{let{accessToken:t}=e;return n.mutate({payload:{access_token:t}})}}):(0,s.jsx)(t_,{})},ty=e=>{let{onClick:t}=e,a=(0,tv.hq)(),n=(0,tr.mg)({onSuccess:e=>{a.mutate({payload:{access_token:e.code}})},flow:"auth-code"});return(0,s.jsx)(k.$,{className:"flex w-full max-w-[394px] gap-2",shape:"pill",size:"lg",onClick:()=>{t&&t(),n()},children:a.isPending?(0,s.jsx)(Z.y,{className:"my-auto size-4"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eI.fTL,{}),"Continue with Google"]})})};var tE=a(99161);let tI=()=>(0,s.jsx)("div",{className:"laptop:pb-6 flex max-w-[390px] items-center px-4 pb-4",children:(0,s.jsxs)("span",{className:"text-content-tertiary text-body-sm text-center",children:["By proceeding, you agree to our"," ",(0,s.jsx)(k.$,{variant:"link-ai",className:"underline",size:"link-sm",asChild:!0,children:(0,s.jsx)(e8.i,{href:y.x2.TERMS_AND_CONDITIONS,target:"_blank",children:"Terms of use"})})," ","Read our"," ",(0,s.jsx)(k.$,{variant:"link-ai",className:"underline",size:"link-sm",asChild:!0,children:(0,s.jsx)(V(),{href:tE.m.IMAGINE_PRIVACY_POLICY,target:"_blank",children:"Privacy Policy"})})]})}),tN={GOOGLE:"google",FACEBOOK:"facebook",DISCORD:"discord",EMAIL:"email"};var tj=a(79501),tA=a(70167);let tO=()=>{let e=(0,ti.mN)({resolver:(0,tn.u)(tc.w)}),{fireDiscordEvent:t,fireFacebookEvent:a,fireGoogleEvent:r,fireEmailEvent:i}=(()=>{let{computeToolNameForAnalytics:e}=(0,tj.t)(),t=(0,n.useCallback)(t=>{localStorage.setItem(g.C.AUTH_TOOL,e()),localStorage.setItem(g.C.AUTH_SOURCE,t)},[e]),a=(0,n.useCallback)(()=>{t(tN.GOOGLE)},[t]),s=(0,n.useCallback)(()=>{t(tN.FACEBOOK)},[t]),r=(0,n.useCallback)(()=>{t(tN.DISCORD)},[t]),i=(0,n.useCallback)(()=>{t(tN.EMAIL)},[t]);return(0,n.useMemo)(()=>({fireGoogleEvent:a,fireFacebookEvent:s,fireDiscordEvent:r,fireEmailEvent:i}),[r,s,a,i])})(),l=(()=>{let e=(0,u.useSearchParams)(),t=(0,te.DE)(),{user:a}=(0,f.u)();return t&&!a&&e.get(tA.Y.SHOW_AUTH)===m.J.TRUE})(),o=(0,ti.FH)({control:e.control,name:"email"}),d=!((null==o?void 0:o.length)>0),c=e.handleSubmit(e=>{let{email:t}=e;i(),(0,td.fH)({slug:tl.SIGN_IN,productName:eY.h.NEXT_PUBLIC_APP_NAME_FOR_AUTH,authBaseUrl:new URL(eY.h.NEXT_PUBLIC_VYRO_AUTH_URL),email:t})});return(0,s.jsx)(h.lG,{open:l,children:(0,s.jsxs)(h.Cf,{className:"bg-surface-primary scrollbar-none !rounded-0 tablet:p-6 tablet:!rounded-4 z-[51] flex h-screen w-screen gap-6 overflow-scroll p-0",children:[(0,s.jsxs)(B.s,{children:[(0,s.jsx)(h.L3,{children:"Auth Modal"}),(0,s.jsx)(h.rr,{children:"Enter your credentials to continue"})]}),(0,s.jsxs)("div",{className:"bg-surface-primary-variant laptop:w-[60%] desktop:w-1/2 tablet:rounded-4 flex size-full flex-col items-center justify-between shadow-[0_0_24px_0_rgba(var(--elevation-lg))]",children:[(0,s.jsx)("div",{className:"invisible"}),(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-y-10 px-6",children:[(0,s.jsx)(eI.u9d,{className:"size-[38px]"}),(0,s.jsxs)("div",{className:"flex w-full max-w-[520px] flex-col gap-12",children:[(0,s.jsx)("h4",{className:"text-content-primary text-heading-xl text-center font-semibold",children:"Sign in"}),(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-6",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-4",children:[(0,s.jsx)(tr.G_,{clientId:eY.h.NEXT_PUBLIC_GOOGLE_CLIENT_ID,children:(0,s.jsx)(ty,{onClick:r})}),(0,s.jsx)(tg,{onClick:a}),(0,s.jsx)(tf,{onClick:t})]}),(0,s.jsxs)("div",{className:"mx-auto flex w-[296px] items-center justify-center gap-4",children:[(0,s.jsx)(ee.w,{className:"shrink"}),(0,s.jsx)("span",{className:"text-body-sm text-content-secondary",children:"or"}),(0,s.jsx)(ee.w,{className:"shrink"})]}),(0,s.jsxs)("form",{className:"flex w-full flex-col items-center gap-6",onSubmit:c,children:[(0,s.jsxs)("div",{className:"flex w-full max-w-[394px] flex-col items-start gap-y-1.5",children:[(0,s.jsx)("label",{htmlFor:"email",className:"text-label-md text-content-secondary block",children:"Email Address"}),(0,s.jsx)(to.p,{id:"email",start:(0,s.jsx)(eI.aZ_,{}),type:"email",size:"xl",wrapperClassName:"max-w-[394px] h-12",variant:"secondary-variant",className:"h-12 w-full max-w-[394px]",placeholder:"Enter your email",...e.register("email")})]}),(0,s.jsx)(k.$,{variant:"secondary",type:"submit",shape:"pill",size:"lg",className:"w-full max-w-[394px]",disabled:d,children:"Continue"})]})]})]})]}),(0,s.jsx)(tI,{})]}),(0,s.jsx)(tx,{})]})})};var tS=a(25281),tk=a(93343),tT=a(44089),tC=a(25826),tP=a(53881),tD=a(5275),t$=a(98221),tw=a(98720),tR=a(16258),tM=a(58910),tL=a(90543);let tU={EMAIL:"email",USER_ID:"userId",STRIPE_CUSTOMER_ID:"stripeCustomerId"},tG=tC.Ay$.object({item:tC.Ay$.string().min(1,{message:"This field is required"}),type:tC.Ay$.enum(tU)}),tz=()=>{let[e,t]=(0,n.useState)(!1),a=(0,ti.mN)({resolver:(0,tn.u)(tG),defaultValues:{item:"",type:tU.EMAIL}}),{mutate:r}=(0,tR.n)({mutationFn:async e=>(await tM.y.impersonateUser(e)).data}),{serviceErrorHandler:i}=(0,tL.z)(),l=(0,ti.FH)({control:a.control,name:"type"});return(0,s.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:a.handleSubmit(async e=>{let a;t(!0);let s=(0,o.getCookie)(tP.H.BEARER_TOKEN,{domain:eY.h.NEXT_PUBLIC_APP_DOMAIN});if(!s){H.oR.error("No bearer token found"),t(!1);return}if(e.type===tU.EMAIL)a={bearerToken:s,email:e.item};else if(e.type===tU.USER_ID)a={bearerToken:s,userId:e.item};else if(e.type===tU.STRIPE_CUSTOMER_ID)a={bearerToken:s,stripeCustomerId:e.item};else throw Error("Invalid type");r(a,{onSuccess:e=>{let{token:t}=e,a=new Date(Date.now()+18e5);(0,o.setCookie)(tP.H.IMPERSONATE_USER_TOKEN,t,{expires:a,domain:eY.h.NEXT_PUBLIC_APP_DOMAIN}),tS.i3.start(),H.oR.success("Impersonation started"),window.location.reload()},onError:e=>{if(e instanceof tT.pe){var a;H.oR.error(null==(a=e.response)?void 0:a.data.message)}else i(e);t(!1)}})}),children:[(0,s.jsxs)(tD.lV,{...a,children:[(0,s.jsx)(tD.zB,{control:a.control,name:"type",render:e=>{let{field:t}=e;return(0,s.jsxs)(tD.eI,{className:"flex flex-col gap-1.5",children:[(0,s.jsx)(tD.lR,{children:"Select type of login"}),(0,s.jsx)(tD.MJ,{children:(0,s.jsxs)(t$.l6,{...t,onValueChange:t.onChange,children:[(0,s.jsxs)(t$.bq,{size:"lg",children:[(0,s.jsx)(t$.yv,{placeholder:"Select type of login"}),(0,s.jsx)(t$.I6,{})]}),(0,s.jsxs)(t$.gC,{children:[(0,s.jsx)(t$.eb,{size:"lg",value:tU.EMAIL,children:"Email"}),(0,s.jsx)(t$.eb,{size:"lg",value:tU.USER_ID,children:"User ID"}),(0,s.jsx)(t$.eb,{size:"lg",value:tU.STRIPE_CUSTOMER_ID,children:"Stripe Customer ID"})]})]})}),(0,s.jsx)(tD.C5,{})]})}}),(0,s.jsx)(tD.zB,{control:a.control,name:"item",render:e=>{let{field:t}=e;return(0,s.jsxs)(tD.eI,{className:"flex flex-col gap-1.5",children:[(0,s.jsxs)(tD.lR,{children:["Enter ",l]}),(0,s.jsx)(tD.MJ,{children:(0,s.jsx)(to.p,{placeholder:"Enter ".concat(l),size:"lg",...t})}),(0,s.jsx)(tD.C5,{})]})}})]}),(0,s.jsx)(k.$,{type:"submit",size:"lg",disabled:e,children:"Impersonate"})]})},tF=()=>{let e=(()=>{let{user:e}=(0,f.u)();return!!(null==e?void 0:e.isAdmin)})();return(()=>{let{user:e}=(0,f.u)();return!!(null==e?void 0:e.isImpersonated)})()?(0,s.jsx)(tk.Z,{children:(0,s.jsxs)(eK.m_,{children:[(0,s.jsx)(eK.k$,{asChild:!0,children:(0,s.jsx)(k.$,{className:"fixed inset-y-0 right-0 z-50 my-auto h-25 rounded-r-none",size:"icon-xs",variant:"error",onClick:()=>{(0,o.deleteCookie)(tP.H.IMPERSONATE_USER_TOKEN,{domain:eY.h.NEXT_PUBLIC_APP_DOMAIN}),tS.i3.start(),H.oR.success("Impersonation ended"),window.location.reload()},children:(0,s.jsx)(eI.w0d,{className:"stroke-2"})})}),(0,s.jsx)(eK.ZI,{side:"left",children:"End Impersonation"})]})}):e?(0,s.jsxs)(tw.cj,{children:[(0,s.jsx)(tk.Z,{children:(0,s.jsxs)(eK.m_,{children:[(0,s.jsx)(eK.k$,{asChild:!0,children:(0,s.jsx)(tw.CG,{asChild:!0,children:(0,s.jsx)(k.$,{className:"fixed inset-y-0 right-0 z-50 my-auto h-25 rounded-r-none",size:"icon-xs",variant:"primary",children:(0,s.jsx)(eI.m_v,{})})})}),(0,s.jsx)(eK.ZI,{side:"left",children:"Impersonate User"})]})}),(0,s.jsxs)(tw.h,{className:"flex w-[calc(min(--spacing(100),100vw))] flex-col gap-8 p-4 pt-12",children:[(0,s.jsx)(tw.Ml,{className:"absolute top-2 left-2"}),(0,s.jsxs)(tw.Fm,{className:"flex flex-col items-start gap-1",children:[(0,s.jsx)(tw.qp,{className:"text-heading-sm",children:"Impersonate User"}),(0,s.jsx)(tw.Qs,{children:"Impersonate a user to see their account."})]}),(0,s.jsx)(tz,{})]})]}):null};var tB=a(33400);let tq=()=>(0,j.s)(l.D.ONBOARDING_MODAL),tV=()=>(0,j.s)(l.D.TRAINING_MODAL),tK={ONBOARDING_SURVEY_MODAL:"onboarding-survey-modal",USER_TRAINING_MODAL:"user-training-modal"},tQ=["basic","advanced"],tH={PLAYED_SECTIONS_MAP:"user-training-modal-played-sections-map",HAS_SEEN_USER_TRAINING_MODAL_ONCE:"has-seen-user-training-modal-once"},tJ=()=>((()=>{let{openDialog:e}=tq(),{openDialog:t}=tV(),{featureFlags:a}=(0,E.bO)(),s=!0===a[tK.USER_TRAINING_MODAL],{user:r}=(0,f.u)(),i=(0,te.DE)(),{data:l,isLoading:o}=(0,tt.en)(tB.sF.HAS_SEEN_ONBOARDING_PERSONA_MODAL),{data:d,isLoading:c}=(0,tt.en)(tB.sF.HAS_SEEN_USER_TRAINING_MODAL);return(0,n.useEffect)(()=>{let a=new URLSearchParams(window.location.search).get(tP._.IS_SIGNUP)===m.J.TRUE;o||c||!i||(r&&!(null==l?void 0:l.status)&&a?e():s&&r&&!(null==d?void 0:d.status)&&"true"!==localStorage.getItem(tH.HAS_SEEN_USER_TRAINING_MODAL_ONCE)&&(t(),localStorage.setItem(tH.HAS_SEEN_USER_TRAINING_MODAL_ONCE,"true")))},[null==l?void 0:l.status,null==d?void 0:d.status,o,c,i,e,t,s,r])})(),null);var tY=a(11360),tW=a(79649);let tX=(0,eu.F)("rounded-full w-full flex items-center font-medium ring-border-secondary ring-[1.5px] text-content-primary hover:bg-fill-secondary data-[state=selected]:ring-border-inverse data-[state=selected]:bg-fill-secondary disabled:ring-border-secondary-disabled disabled:text-content-primary-disabled transition-all duration-300 cursor-pointer disabled:cursor-not-allowed disabled:bg-transparent",{variants:{size:{xs:"h-6 px-2 gap-1 text-label-xs data-[chip-start=true]:pl-1.5 data-[chip-end=true]:pr-1.5",sm:"h-7 px-2.5 gap-1 text-label-sm data-[chip-start=true]:pl-2 data-[chip-end=true]:pr-[7px]",md:"h-8 px-3 gap-1.5 text-label-md data-[chip-start=true]:pl-3 data-[chip-end=true]:pr-2",lg:"h-10 px-4 gap-2 text-label-lg data-[chip-start=true]:pl-4 data-[chip-end=true]:pr-[11px]",none:""}},defaultVariants:{size:"md"}}),tZ=(0,eu.F)("",{variants:{size:{xs:"size-3",sm:"size-3.5 data-[slot=chip-end]:pl-[3px]",md:"size-4 data-[slot=chip-end]:pl-[3px]",lg:"size-4.5 data-[slot=chip-end]:pl-[5px]",none:"size-3.5"}}}),t0=e=>{let{onClick:t,className:a,isActive:n,disabled:r,size:i,children:l,start:o,end:d}=e;return(0,s.jsxs)("button",{type:"button",className:(0,ec.cn)(tX({size:i}),a),"data-state":n?"selected":"idle",onClick:t,disabled:r,"data-chip-start":!!o,"data-chip-end":!!d,children:[o&&(0,s.jsx)(tW.DX,{"data-slot":"chip-start",className:(0,ec.cn)(tZ({size:i})),children:o}),l,d&&(0,s.jsx)(tW.DX,{"data-slot":"chip-end",className:(0,ec.cn)(tZ({size:i})),children:d})]})};var t1=a(71387),t3=a(96450),t2=a(39160);let t5={0:t1.E.ONBOARDING_USER_PERSONA_ANSWER,1:t1.E.ONBOARDING_USER_INITIAL_GOAL,2:t1.E.ONBOARDING_USER_CADENCE,3:t1.E.ONBOARDING_USER_MEDIA_TYPE,4:t1.E.ONBOARDING_USER_MEMBERS},t4=e=>{let{chips:t,multipleChips:a}=e,[r,i]=(0,n.useState)([]),{setShouldShowNextButton:l,setOnNextClick:o,currentStepData:d,currentStep:c}=am(),u=(0,t3.Q)(c),m=(0,eC.hM)(),{data:p}=(0,t2.J)(),{mutate:x}=(0,t2.s)();return(0,n.useEffect)(()=>{o(()=>{var e;let t=r.join(", "),a=t5[u.current];null!=a&&sessionStorage.setItem(a,t),x([...(null==p?void 0:p.persona)||[],{question:null!=(e=null==d?void 0:d.heading)?e:"",answer:t}]),i([])})},[null==d?void 0:d.heading,u,r,o,x,null==p?void 0:p.persona]),(0,n.useEffect)(()=>{r.length>0?l(!0):l(!1)},[r,l]),(0,s.jsx)("div",{className:"flex w-full flex-wrap items-center gap-4 py-4",children:t.map(e=>(0,s.jsx)(t0,{size:m?"md":"lg",className:"w-fit whitespace-nowrap",isActive:r.includes(e),onClick:()=>(e=>{a?r.includes(e)?i(r.filter(t=>t!==e)):i([...r,e]):r.includes(e)?i([]):i([e])})(e),children:(0,s.jsx)("span",{className:"text-label-lg font-medium",children:e})},e))})};var t6=a(1532),t7=a(38427);let t8=e=>{let{isBestValuePlan:t}=e;return t?(0,s.jsx)("div",{className:"text-body-sm rounded-b-1.5 absolute top-0 right-5 flex h-7 w-27.5 items-center justify-center bg-[#FFE1C0] px-2 py-1 font-semibold whitespace-nowrap text-[#A25400]",children:"Most Popular"}):null};var t9=a(53326),ae=a(30484);let at=e=>{let{isBestValuePlan:t,label:a,labelWithoutFail:n,searchParams:r,subscriptionPlan:i,btnProps:l}=e,{handleClick:o,isPendingPlanChange:d}=(e=>{let{searchParams:t,labelWithoutFail:a,subscriptionPlan:s}=e,{logAddToCart:n}=(0,ae.c)(),[r,i]=(0,U.ab)({[G.u.PRICE_ID]:U.tU,[G.u.SUBSCRIPTION_ACTION]:U.tU}),{mutate:l}=(0,I.Fe)({product:"imagine",successUrl:(0,t9.G)(y.ze.SUBSCRIPTION_SUCCESS,window.location.origin),cancelUrl:(0,t9.G)(y.ze.HOME,window.location.origin)}),o=e=>{l({priceId:e},{onSuccess:eX.M})},{isStripeFailed:d,isInvoicePastDue:c,isPendingPlanChange:u}=(0,eD.c)(),{mutate:m}=(0,I.V_)({product:"imagine"}),p=()=>{i({[G.u.PRICE_ID]:t[G.u.PRICE_ID],[G.u.SUBSCRIPTION_ACTION]:t[G.u.SUBSCRIPTION_ACTION]})};return{handleClick:async()=>{let e=s.StripePrice[0];if(!e)return void H.oR.error("There was an error while going to stripe billing");try{switch(a){case"Get Started":n(e),o(e.stripePriceId);break;case"Current Plan":(d||c)&&m(void 0,{onSuccess:eX.M,onError:eX.j});break;case"Downgrade":case"Upgrade":if(d)return void o(e.stripePriceId);u||p();break;case"Change Term":u||p()}}catch(e){H.oR.error(e instanceof Error?e.message:"There was an error while redirecting to stripe")}},isPendingPlanChange:u}})({searchParams:r,labelWithoutFail:n,subscriptionPlan:i}),{variant:c,disabled:u,className:m}=null!=l?l:{};return(0,s.jsx)("div",{className:"mt-auto flex justify-center px-4",children:(0,s.jsx)(k.$,{onClick:o,className:(0,ec.cn)("w-full max-w-[250px]",m),disabled:null!=u?u:d||"Current Plan"===a,variant:(null!=c?c:t)?"ai":"secondary",...l,children:a})})},aa=e=>{var t;let{name:a,totalPrice:n,monthlyPrice:r,billingInterval:i,tokens:l}=e,{planNameMapping:o}=(0,E.bO)();return(0,s.jsxs)("div",{className:"flex flex-col gap-4 px-6",children:[(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsx)("p",{className:"text-heading-xs font-semibold",children:null!=(t=o[a])?t:a})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"text-heading-xl font-medium",children:r}),(0,s.jsx)("div",{className:(0,ec.cn)("text-body-xs text-content-secondary"),children:(0,s.jsx)("p",{children:"per month"})})]}),(0,s.jsxs)("p",{className:"text-label-sm text-content-tertiary",children:["billed ",i," as ",n]})]}),(0,s.jsxs)("div",{className:"text-label-md text-content-secondary font-semibold",children:[(0,ea.Z)(l)," ",eo.q.PLURAL,"/",(0,v.sr)(i),"*"]})]})},as=e=>{let{offerings:t,offeringHeading:a,planName:n}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-6 px-4",children:[(0,s.jsx)("p",{className:"text-body-sm font-semibold",children:a}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 px-2",children:[(0,s.jsx)(eI.PzS,{className:"size-3.5 stroke-[2]"}),(0,s.jsx)("p",{className:"text-body-sm",children:e.heading}),e.tooltip&&(0,s.jsxs)(eK.m_,{children:[(0,s.jsx)(eK.k$,{className:"ml-auto",children:(0,s.jsx)(eI.mo0,{className:"size-4"})}),(0,s.jsx)(eK.ZI,{className:"max-w-[250px]",align:"center",children:(0,s.jsx)("p",{children:e.tooltip})})]})]},"".concat(n,"-").concat(t)))})]})},an={Basic:"Everything in the Free plan, plus:",Standard:"Everything in the Basic plan, plus:",Ultimate:"Everything in the Standard plan, plus:",Premium:"Everything in the Ultimate plan, plus:",Creator:"Everything in the Premium plan, plus:",Custom:"Everything in the Creator plan, plus:",Enterprise:"Everything in the Custom plan, plus:"},ar=e=>{var t,a,r,i,l,o,d,c;let{subscriptionPlan:u}=e,{label:m,searchParams:p,isBestValuePlan:x,stripePrice:b,locale:h,labelWithoutFail:_,offerings:g}=(e=>{let{locale:t}=(0,f.u)(),a=e.StripePrice[0],{subscriptionPlansInfo:s,bestValuePlanName:r}=(0,E.bO)(),i=(0,n.useMemo)(()=>{var t,n;return a?null==(n=s[a.billingInterval])||null==(t=n[e.name])?void 0:t.offerings.slice(0,4):[]},[s,a,e.name]),l=e.name===r,{isPendingPlanChange:o,stripeSubscription:d,subscribedPriceItem:c,isLegacyUser:u,isInvoiceIncomplete:m,isStripeFailed:p,isInvoicePastDue:x}=(0,eD.c)(),b=null==d?void 0:d.newPriceId,h=o&&b===e.id,{searchParams:_,label:g}=(0,v.Ei)({currentPriceItem:e,subscribedPriceItem:c,isPendingChange:h,isLegacyUser:u,isInvoiceIncomplete:m});return{label:(p||x)&&"Current Plan"===g?"Pay Invoice":g,searchParams:_,isBestValuePlan:l,stripePrice:a,labelWithoutFail:g,locale:t,offerings:i}})(u);return(0,s.jsxs)("div",{className:(0,ec.cn)("bg-background rounded-3 text-content-primary border-border-secondary relative flex min-h-[487px] w-full max-w-[300px] flex-col gap-4 overflow-visible border py-6",{"border-fill-brand":x}),children:[(0,s.jsx)(t8,{isBestValuePlan:x}),(0,s.jsx)(aa,{name:u.name,monthlyPrice:(0,ea.v)({value:(0,v._K)({price:null!=(t=null==b?void 0:b.price)?t:0,billingInterval:null!=(a=null==b?void 0:b.billingInterval)?a:"monthly"}),currency:null!=(r=null==b?void 0:b.currency)?r:"USD",locale:h}),totalPrice:(0,ea.v)({value:null!=(i=null==b?void 0:b.price)?i:0,currency:null!=(l=null==b?void 0:b.currency)?l:"USD",locale:h}),billingInterval:null!=(o=null==b?void 0:b.billingInterval)?o:"monthly",tokens:null!=(d=null==b?void 0:b.tokens)?d:0,isBestValuePlan:x}),(0,s.jsx)(ee.w,{className:"bg-border-secondary w-full"}),(0,s.jsx)(as,{offerings:null!=g?g:[],offeringHeading:null!=(c=an[u.name])?c:"",planName:u.name}),(0,s.jsx)(at,{isBestValuePlan:x,label:m,searchParams:p,labelWithoutFail:_,subscriptionPlan:u})]})},ai=e=>{var t;let{subscriptionItems:a,activeTab:n}=e,r=(0,t6.J)(a,n);return(0,s.jsx)("div",{className:"mx-auto w-full shrink-0 overflow-x-auto pt-8",children:(0,s.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-center gap-4",children:[null==(t=a[n])?void 0:t.map(e=>{var t;return(0,s.jsx)(ar,{subscriptionPlan:e},null==(t=e.StripePrice[0])?void 0:t.id)}),(0,s.jsx)(t7.a,{resolvedFontSize:r})]})})},al={weekly:null,monthly:null,quarterly:15,yearly:30,one_time:null},ao=e=>{let{subscriptionItems:t,defaultInterval:a="monthly",hideTabs:r=!1}=e,[i,l]=(0,n.useState)(a);return(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[!r&&(0,s.jsx)(F.Tabs,{value:i,defaultValue:a,onValueChange:e=>l(e),className:"flex items-center justify-center",children:(0,s.jsx)(F.j7,{className:"bg-surface-secondary w-fit gap-1 rounded-full p-1",children:Object.keys(t).map(e=>(0,s.jsx)(F.GI,{layoutId:"subscription-tab",value:e,variant:"primary",size:"sm",className:"data-[state=active]:text-content-primary data-[state=active]:bg-transparent",activeProps:{className:"group-data-[state=active]:bg-surface-primary-variant"},isActive:i===e,outline:!1,children:(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{className:"capitalize",children:e}),al[e]&&(0,s.jsxs)("div",{className:(0,ec.cn)("bg-surface-primary text-content-brand flex h-4.5 w-15 items-center justify-center rounded-full px-2 text-[10px] leading-2 font-bold transition-colors duration-300",{"text-content-primary":i!==e}),children:[al[e],"% off"]})]})},e))})}),(0,s.jsx)(ai,{subscriptionItems:t,activeTab:i})]})},ad={heading:"Select a plan",childComponent:(0,s.jsx)(()=>{let{data:e}=(0,I.Yu)(),{setShouldShowNextButton:t}=am();return((0,n.useEffect)(()=>{t(!1)},[t]),e)?(0,s.jsx)(ao,{subscriptionItems:e}):null},{}),shouldShowSkipButton:!0},ac=(0,n.createContext)(null),au=e=>{let{children:t,setIsOpen:a}=e,{onboardingSurveyModal:{questionnaireSteps:r}}=(0,E.bO)(),[i,l]=(0,n.useState)(0),[o,d]=(0,n.useState)(!1),c=(0,n.useRef)(()=>{}),u=(0,n.useMemo)(()=>{let e=r.map(e=>({heading:e.heading,description:e.description,childComponent:(0,s.jsx)(t4,{chips:e.options,multipleChips:e.multiple}),shouldShowSkipButton:e.shouldShowSkipButton}));return e.push(ad),e},[r]),m=i===u.length-1,p=u[i],x=()=>{m&&a(!1)};return(0,s.jsx)(ac.Provider,{value:{currentStep:i,setCurrentStep:l,shouldShowNextButton:o,setOnNextClick:e=>{c.current=e},setShouldShowNextButton:d,shouldShowBackButton:i>0,isLastStep:m,nextHandler:()=>{c.current(),x(),l(i+1)},backHandler:()=>{l(i-1)},skipHandler:()=>{x(),l(i+1)},totalSteps:u.length,currentStepData:p},children:t})},am=()=>{let e=(0,n.useContext)(ac);if(!e)throw Error("useOnboardingModal must be used within an OnboardingModalProvider");return e},ap=()=>{let{onboardingSurveyModal:{assets:e}}=(0,E.bO)(),t=(0,tm.gU)(),[a,r]=(0,n.useState)(0),i=e[a];return(0,n.useEffect)(()=>{if(!t.api)return;let e=()=>{var e,a;r(null!=(a=null==(e=t.api)?void 0:e.selectedScrollSnap())?a:0)};return t.api.on("select",e),e(),()=>{var a;null==(a=t.api)||a.off("select",e)}},[t.api]),(0,n.useEffect)(()=>{if(i&&"image"===i.type){let e=setTimeout(()=>{var e;null==(e=t.api)||e.scrollNext()},4e3);return()=>{clearTimeout(e)}}},[t.api,i]),(0,s.jsx)(tm.Wk,{className:"ml-0 size-full",children:e.map((e,a)=>(0,s.jsxs)(tm.A7,{className:"relative size-full pl-0",children:["image"===e.type?(0,s.jsx)(O.default,{src:e.src,alt:"Imagine Generation ".concat(a+1),className:"object-cover object-center",fill:!0,loading:"eager",priority:0===a}):(0,s.jsx)("video",{src:e.src,className:"size-full object-cover object-top",poster:e.poster,ref:e=>{let a=()=>{var e;null==(e=t.api)||e.scrollNext()};return null==e||e.addEventListener("ended",a),()=>{null==e||e.removeEventListener("ended",a)}},muted:!0,playsInline:!0,autoPlay:!0}),(0,s.jsx)("div",{className:"text-content-primary-inverse-disabled text-label-sm absolute right-5.5 bottom-5.5 font-medium",children:"Generated by ImagineArt"})]},a))})},ax=()=>(0,s.jsx)(tm.FN,{plugins:[(0,tu.A)({})],opts:{loop:!0,duration:25},className:"rounded-4 bg-background tablet:block relative hidden size-full overflow-hidden shadow-[0_0_24px_0_rgba(var(--elevation-lg))]",children:(0,s.jsx)(ap,{})}),af=()=>{let{currentStep:e,shouldShowNextButton:t,nextHandler:a,shouldShowBackButton:n,backHandler:r,skipHandler:i,isLastStep:l,currentStepData:o,totalSteps:d}=am();if(!o)return null;let{heading:c,description:u,shouldShowSkipButton:m,childComponent:p}=o;return(0,s.jsxs)("div",{className:"flex size-full items-center gap-6 overflow-y-auto",children:[(0,s.jsxs)("div",{className:(0,ec.cn)("bg-surface-primary-variant rounded-4 laptop:gap-14 flex size-full shrink-0 flex-col gap-4 overflow-y-auto shadow-[0_0_24px_0_rgba(var(--elevation-lg))]",{"tablet:w-[60%] laptop:w-[55%]":!l}),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between py-4 pr-6 pl-3.5",children:[n&&(0,s.jsxs)(k.$,{variant:"ghost",size:"sm",onClick:r,children:[(0,s.jsx)(eI.YJP,{className:"size-4"})," Back"]}),m&&(0,s.jsx)(k.$,{variant:"link-secondary",size:"sm",className:"ml-auto",onClick:i,children:"Skip"})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-4 px-6",children:[(0,s.jsx)(tY.k,{className:"tablet:max-w-[316px] max-w-[218px]",value:e/d*100}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-heading-lg desktop-sm:text-heading-xl text-content-primary font-semibold",children:c}),u&&(0,s.jsx)("p",{className:"text-body-sm text-content-tertiary",children:u})]})]}),(0,s.jsx)("div",{className:"flex w-full px-6",children:p}),(0,s.jsx)("div",{className:(0,ec.cn)("tablet:p-5 mt-auto w-full px-5 pb-5 opacity-0 transition-opacity duration-500",{"opacity-100":t,hidden:l}),children:(0,s.jsx)(k.$,{className:"w-full",variant:"ai",size:"lg",onClick:a,disabled:!t,children:"Next"})})]}),!l&&(0,s.jsx)(ax,{})]})};var ab=a(71930),ah=a(22282);let av=()=>{let{isOpen:e,setDialogOpen:t}=tq(),{openDialog:a}=tV(),{mutate:n}=(0,tt.Jl)(),{data:r}=(0,tt.en)(tB.sF.HAS_SEEN_USER_TRAINING_MODAL),{featureFlags:i}=(0,E.bO)(),{fireOnboardingSurveyEvent:l}=(()=>{let{aggregator:e}=(0,eB.p)(),{computeUserAnalyticsInfo:t}=(0,eF.U)();return{fireOnboardingSurveyEvent:()=>{var a,s,n,r,i;let{email:l,id:o}=t();e.log(eG.M.onboardingSurvey.withProperties({app_name:ab.C.IMAGINE_ONE,studio_name:ab.C.IMAGINE_ONE,email:l,distinct_id:o,user_persona:null!=(a=sessionStorage.getItem(t1.E.ONBOARDING_USER_PERSONA_ANSWER))?a:ah.Q,initial_goal:null!=(s=sessionStorage.getItem(t1.E.ONBOARDING_USER_INITIAL_GOAL))?s:ah.Q,cadence:null!=(n=sessionStorage.getItem(t1.E.ONBOARDING_USER_CADENCE))?n:ah.Q,media_type:null!=(r=sessionStorage.getItem(t1.E.ONBOARDING_USER_MEDIA_TYPE))?r:ah.Q,members:null!=(i=sessionStorage.getItem(t1.E.ONBOARDING_USER_MEMBERS))?i:ah.Q}))}}})(),o=e=>{e||((null==r?void 0:r.status)||a(),l(),n({flag:tB.sF.HAS_SEEN_ONBOARDING_PERSONA_MODAL,status:!0})),t(e)};return!1===i[tK.ONBOARDING_SURVEY_MODAL]?null:(0,s.jsx)(h.lG,{open:e,onOpenChange:o,children:(0,s.jsx)(h.Cf,{onOpenAutoFocus:e=>{e.preventDefault()},className:"bg-background-alternate desktop-l:max-w-[1654px] desktop:max-w-[1370px] desktop:max-h-[calc(min(908px,100vh-48px))] desktop-l:max-h-[calc(min(1096px,100vh-100px))] rounded-4 tablet:max-h-[calc(100vh-42px)] tablet:max-w-[calc(100vw-42px)] desktop-sm:max-w-[1232x] desktop-sm:max-h-[calc(min(817px,100vh-48px))] laptop:max-w-[976px] laptop:max-h-[calc(min(672px,100vh-48px))] size-full max-h-[100vh] max-w-[100vh] overflow-hidden p-6",children:(0,s.jsxs)(au,{setIsOpen:o,children:[(0,s.jsxs)(B.s,{children:[(0,s.jsx)(h.L3,{children:"Onboarding"}),(0,s.jsx)(h.rr,{children:"Welcome to the Onboarding Modal"})]}),(0,s.jsx)(af,{})]})})})};var a_=a(48750),ag=a(80597);let ay=()=>{let[e,t]=(0,U.ZA)(G.u.SUBSCRIPTION_MODAL,U.cr.withDefault(!1));return(0,s.jsx)(h.lG,{open:e,modal:!0,onOpenChange:e=>{t(e)},children:(0,s.jsxs)(h.Cf,{overlayProps:{className:"hidden"},onOpenAutoFocus:e=>{e.preventDefault()},className:"bg-background inset-x-0 top-15 flex h-[calc(100vh-3.75rem)] translate-none flex-col gap-0 rounded-none border-0 border-none p-0 shadow-none ring-0 outline drop-shadow-none",children:[(0,s.jsxs)(h.c7,{className:"justify-end border-0",children:[(0,s.jsxs)(B.s,{children:[(0,s.jsx)(h.L3,{children:"Subscription"}),(0,s.jsx)(h.rr,{children:"Manage your subscription and billing details."})]}),(0,s.jsx)(h.De,{})]}),(0,s.jsx)(a_.F,{type:"hover",className:"scrollbar-none w-full overflow-y-auto",children:(0,s.jsx)(ag.Subscription,{})})]})})};var aE=a(51912),aI=a(17685);let aN=JSON.parse('{"v":"4.8.0","meta":{"g":"LottieFiles AE 3.5.3","a":"","k":"","d":"","tc":""},"fr":60,"ip":0,"op":90,"w":512,"h":512,"nm":"06 Party 1","assets":[{"id":"comp_0","layers":[{"ind":1,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[256,256,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[596,558],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":29.6,"ix":5},"lc":1,"lj":1,"ml":4,"nm":"Stroke 1"},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"Fill 1"},{"ty":"tr","p":{"a":0,"k":[-13,-3],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":0,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","cix":2,"ix":1}],"ip":0,"op":90,"st":0},{"ind":2,"ty":4,"nm":"Elastic Control Layer","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[256,256,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":5,"nm":"Elastic Controller","np":5,"ix":1,"en":1,"ef":[{"ty":0,"nm":"Amplitude","ix":1,"v":{"a":0,"k":20,"ix":1}},{"ty":0,"nm":"Frequency","ix":2,"v":{"a":0,"k":60,"ix":2}},{"ty":0,"nm":"Decay","ix":3,"v":{"a":0,"k":90,"ix":3}}]}],"shapes":[],"ip":0,"op":90,"st":0},{"ind":3,"ty":4,"nm":"Layer 13","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":26,"s":[-72.8]},{"t":35,"s":[0]}],"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[387.937,358.808,0],"to":[-59.661,-45.476,0],"ti":[-8.339,47.476,0]},{"t":33,"s":[287.971,139.95,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-42.6,-63.4]],"o":[[0,0],[0,0]],"v":[[5.929,-58.05],[10.029,58.05]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":4,"ty":4,"nm":"Layer 12","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":26,"s":[41.7]},{"t":37,"s":[0]}],"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[417.937,375.308,0],"to":[-43.348,-50.464,0],"ti":[62.348,-5.536,0]},{"t":34,"s":[186.85,246.526,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[101.8,-29]],"o":[[0,0],[0,0]],"v":[[84.15,23.374],[-84.15,-16.226]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":5,"ty":4,"nm":"Layer 11","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[319.937,301.308,0],"to":[-22.989,-28.135,0],"ti":[22.989,28.135,0]},{"t":30,"s":[182,132.5,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-13.4],[13.4,0],[0,13.4],[-13.4,0]],"o":[[0,13.4],[-13.4,0],[0,-13.4],[13.4,0]],"v":[[24.3,0],[0,24.3],[-24.3,0],[0,-24.3]],"c":true},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":6,"ty":4,"nm":"Layer 10","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":26,"s":[86]},{"t":37,"s":[0]}],"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[383.937,341.308,0],"to":[-59.989,-83.089,0],"ti":[-5.011,-122.911,0]},{"t":34,"s":[107,314.771,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[32.7,-35.3]],"o":[[0,0],[0,0]],"v":[[35.3,-16.171],[-35.3,16.229]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":7,"ty":4,"nm":"Layer 9","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[369.937,304.308,0],"to":[-53.231,-116.035,0],"ti":[-3.936,-160.632,0]},{"t":30,"s":[131.55,361.1,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[-124.45,105.1,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-124.7,105.1],[-124.2,105.1]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":8,"ty":4,"nm":"Layer 8","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[399.937,393.308,0],"to":[-53.948,-40.385,0],"ti":[53.948,40.385,0]},{"t":37,"s":[76.25,151,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[-179.75,-105,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-180,-105],[-179.5,-105]],"c":false},"ix":2},"nm":"Path 2"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":9,"ty":4,"nm":"Layer 6","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":5,"s":[0]},{"t":15,"s":[-105]}],"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":5,"s":[287.971,139.95,0],"to":[21.661,45.56,0],"ti":[-21.661,-45.56,0]},{"t":15,"s":[417.937,413.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-42.6,-63.4]],"o":[[0,0],[0,0]],"v":[[5.929,-58.05],[10.029,58.05]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0},{"ind":10,"ty":4,"nm":"Layer 5","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":3,"s":[186.85,246.526,0],"to":[45.181,31.464,0],"ti":[-45.181,-31.464,0]},{"t":17,"s":[457.937,435.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[101.8,-29]],"o":[[0,0],[0,0]],"v":[[84.15,23.374],[-84.15,-16.226]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0},{"ind":11,"ty":4,"nm":"Layer 4","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[182,132.5,0],"to":[38.823,47.135,0],"ti":[-38.823,-47.135,0]},{"t":19,"s":[414.937,415.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-13.4],[13.4,0],[0,13.4],[-13.4,0]],"o":[[0,13.4],[-13.4,0],[0,-13.4],[13.4,0]],"v":[[24.3,0],[0,24.3],[-24.3,0],[0,-24.3]],"c":true},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0},{"ind":12,"ty":4,"nm":"Layer 3","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":0,"k":0,"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":1,"s":[107,314.771,0],"to":[48.823,13.089,0],"ti":[-48.823,-13.089,0]},{"t":18,"s":[399.937,393.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[32.7,-35.3]],"o":[[0,0],[0,0]],"v":[[35.3,-16.171],[-35.3,16.229]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0},{"ind":13,"ty":4,"nm":"Layer 7","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":2,"s":[131.55,361.1,0],"to":[47.898,9.368,0],"ti":[-47.898,-9.368,0]},{"t":16,"s":[418.937,417.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[-124.45,105.1,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-124.7,105.1],[-124.2,105.1]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0},{"ind":14,"ty":4,"nm":"Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":4,"s":[76.25,151,0],"to":[53.948,40.385,0],"ti":[-53.948,-40.385,0]},{"t":20,"s":[399.937,393.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[-179.75,-105,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-180,-105],[-179.5,-105]],"c":false},"ix":2},"nm":"Path 2"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0}]}],"layers":[{"ind":1,"ty":4,"nm":"Mask","td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-45,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[315.663,298.508,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.77,"y":0},"t":17,"s":[345.663,338.508,0],"to":[0,0,0],"ti":[0,0,0]},{"t":22,"s":[315.663,298.508,0]}],"ix":2,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[313.164,303.508,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":5,"nm":"Elastic Controller","np":5,"ix":1,"en":1,"ef":[{"ty":0,"nm":"Amplitude","ix":1,"v":{"a":0,"k":20,"ix":1}},{"ty":0,"nm":"Frequency","ix":2,"v":{"a":0,"k":60,"ix":2}},{"ty":0,"nm":"Decay","ix":3,"v":{"a":0,"k":90,"ix":3}}]}],"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[75.661,0.707],[0,0],[0,0],[-133.025,-28.157],[-3.11,5.922]],"o":[[0,0],[-75.661,-0.707],[0,0],[2.22,3.794],[201.636,42.68],[0,0]],"v":[[110.598,-47.223],[6.201,-8.135],[-139.647,-35.838],[-308.645,148.575],[-42.809,440.307],[438.695,338.857]],"c":true},"ix":2},"nm":"Path 1"},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"Fill 1"},{"ty":"tr","p":{"a":0,"k":[308.58,478.862],"ix":2},"a":{"a":0,"k":[-11,170.875],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":3,"s":[100,100]},{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":13,"s":[120,100]},{"i":{"x":[0.833,0.833],"y":[0.833,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":18,"s":[120,100]},{"t":22,"s":[100,100]}],"ix":3,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","cix":2,"ix":1},{"ty":"tr","p":{"a":0,"k":[308.955,479.074],"ix":2},"a":{"a":0,"k":[308.955,479.074],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":3,"s":[100,100]},{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":13,"s":[100,65]},{"i":{"x":[0.833,0.833],"y":[1,0.833]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":21,"s":[100,65]},{"t":25,"s":[100,100]}],"ix":3,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","cix":2,"ix":1}],"ip":0,"op":90,"st":0},{"ind":2,"ty":0,"nm":"Party Particles","tt":2,"refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[256,256,0],"ix":2},"a":{"a":0,"k":[256,256,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":512,"h":512,"ip":0,"op":90,"st":0},{"ind":3,"ty":4,"nm":"Layer 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-45,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[315.663,298.508,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.77,"y":0},"t":17,"s":[345.663,338.508,0],"to":[0,0,0],"ti":[0,0,0]},{"t":22,"s":[315.663,298.508,0]}],"ix":2,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[313.164,303.508,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":5,"nm":"Elastic Controller","np":5,"ix":1,"en":1,"ef":[{"ty":0,"nm":"Amplitude","ix":1,"v":{"a":0,"k":20,"ix":1}},{"ty":0,"nm":"Frequency","ix":2,"v":{"a":0,"k":60,"ix":2}},{"ty":0,"nm":"Decay","ix":3,"v":{"a":0,"k":90,"ix":3}}]}],"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[5.586,9.546],[0,0]],"o":[[0,0],[-5.162,9.829],[0,0],[0,0]],"v":[[110.598,-47.223],[1.704,163.495],[-22.974,164.131],[-139.647,-35.838]],"c":false},"ix":2},"nm":"Path 1"},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[-0.919,-24.678],[-69.791,2.333],[0.919,24.678],[69.791,-2.475]],"o":[[0.849,24.749],[69.791,-2.475],[-0.849,-24.749],[-69.791,2.333]],"v":[[-141.485,-43.617],[-13.57,-3.241],[111.235,-52.243],[-16.681,-92.619]],"c":true},"ix":2},"nm":"Path 2"},{"ty":"tr","p":{"a":0,"k":[308.58,478.862],"ix":2},"a":{"a":0,"k":[-11,170.875],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":3,"s":[100,100]},{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":13,"s":[120,100]},{"i":{"x":[0.833,0.833],"y":[0.833,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":18,"s":[120,100]},{"t":22,"s":[100,100]}],"ix":3,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","cix":2,"ix":1},{"ty":"tr","p":{"a":0,"k":[308.955,479.074],"ix":2},"a":{"a":0,"k":[308.955,479.074],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":3,"s":[100,100]},{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":13,"s":[100,65]},{"i":{"x":[0.833,0.833],"y":[1,0.833]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":21,"s":[100,65]},{"t":25,"s":[100,100]}],"ix":3,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","cix":2,"ix":1},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"gr","it":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-21.708,0.636],[-18.243,4.384]],"o":[[18.031,2.899],[22.91,-0.849],[0,0]],"v":[[-120.935,25.999],[-60.548,29.393],[2.031,21.261]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"tr","p":{"a":0,"k":[309.513,479.025],"ix":2},"a":{"a":0,"k":[-57.188,120.375],"ix":1},"s":{"a":0,"k":[100,100],"ix":3,"x":"var $bm_rt;\\n$bm_rt = content(\'Group 2\').content(\'Group 2\').transform.scale;"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":40,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1},{"ty":"tr","p":{"a":0,"k":[308.373,479.032],"ix":2},"a":{"a":0,"k":[308.373,479.032],"ix":1},"s":{"a":0,"k":[100,100],"ix":3,"x":"var $bm_rt;\\n$bm_rt = content(\'Group 2\').transform.scale;"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","cix":2,"ix":3},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":40,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 2"}],"ip":0,"op":90,"st":0}],"markers":[]}'),aj=()=>{var e;let t=(0,u.usePathname)(),a=(0,Q.jE)(),[r,i]=(0,U.ZA)(G.u.CHECKOUT_SESSION_ID,U.tU.withDefault("")),[l,o]=(0,n.useState)(!1),{buyCreditsSuccess:d}=(0,E.bO)(),{data:c}=(0,aI.kd)(),m=null!=(e=null==c?void 0:c.total)?e:0;(0,n.useEffect)(()=>{r&&!t.includes(y.ze.SUBSCRIPTION_SUCCESS)&&setTimeout(async()=>{await a.invalidateQueries({queryKey:[J.D.TOKEN_COUNT],refetchType:"all"}),o(!0)},2e3)},[r,t,a]);let p=e=>{e||i(null),o(e)};return(0,s.jsx)(eP.Root,{open:l,onOpenChange:p,children:(0,s.jsx)(eP.Content,{dialogProps:{className:"max-w-[700px] gap-0 p-0"},drawerProps:{className:"p-4 mobile:p-6 rounded-t-6 border-none",noVaul:!0},children:(0,s.jsxs)(eP.Body,{dialogProps:{className:"relative flex flex-col items-center gap-8 p-6"},drawerProps:{className:"relative flex flex-col items-center tablet:gap-8 gap-4 !outline-none overflow-hidden"},children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsxs)("div",{className:"bg-fill-brand relative flex size-16 items-center justify-center overflow-hidden rounded-full",children:[(0,s.jsx)(aE.P,{animationData:aN,className:"size-10",loop:!0}),(0,s.jsx)("span",{className:"absolute top-2.5 left-1/2 h-[100px] w-4/5 -translate-x-1/2 animate-[float_2400ms_infinite] rounded-[50%] bg-[#CB89FEB8] blur-md"})]}),(0,s.jsx)(h.De,{btnProps:{className:"absolute tablet:top-3 top-0 tablet:right-3 right-0 z-10"}})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("h2",{className:"text-heading-md",children:"Credits have been added to your account"}),(0,s.jsx)("p",{className:"text-body-sm text-content-secondary",children:"Thank you for purchasing!"})]}),(0,s.jsxs)("div",{className:"rounded-10 border-border-primary w-[535px] space-y-4 border pt-4 pr-4 pb-6 pl-4",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center gap-2",children:[d&&d.icon&&(0,s.jsx)("div",{className:"border-border-primary flex size-10 items-center justify-center rounded-full border p-2",children:(0,s.jsx)(O.default,{src:d.icon,alt:"",width:16,height:16,className:"size-4"})}),(0,s.jsx)("h3",{className:"text-label-lg",children:d.title})]}),(0,s.jsx)("div",{className:"tablet:grid-cols-2 tablet:gap-x-12 tablet:gap-y-4 grid grid-cols-1 gap-4",children:d.features.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.icon&&(0,s.jsx)(O.default,{src:e.icon,alt:"",width:18,height:18,className:"size-4.5"}),(0,s.jsx)("span",{className:"text-label-sm",children:e.name})]},t))})]}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("span",{className:"text-body-sm text-content-secondary",children:"Total credit balance:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eI.Luh,{className:"text-content-tertiary size-4"}),(0,s.jsxs)("span",{className:"text-body-sm text-content-tertiary",children:[m.toLocaleString()," credits"]})]})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[(0,s.jsxs)("button",{onClick:()=>p(!1),className:"rounded-4 bg-fill-brand text-label-xl group text-content-fixed-inverse relative flex h-14 w-full items-center justify-center overflow-hidden font-medium",children:[(0,s.jsxs)("span",{className:"z-10 flex items-center justify-center gap-2",children:["Let's continue",(0,s.jsx)(eI.JLc,{className:"size-4.5 transition-transform group-hover:translate-x-1"})]}),(0,s.jsx)("span",{className:"absolute top-2.5 left-1/2 h-[179px] w-4/5 -translate-x-1/2 animate-[float_2400ms_infinite] rounded-[50%] bg-[#CB89FEB8] blur-md"})]}),(0,s.jsx)(V(),{href:y.x2.USAGE_ANALYTICS,className:"text-body-sm text-content-tertiary hover:text-content-primary text-center transition-colors",children:"See credit usage"})]})]})})})},aA=(0,n.createContext)(null),aO=e=>{let{children:t,setIsOpen:a}=e,[r,i]=(0,n.useState)(0),l=(0,n.useRef)(null),{mutate:o}=(0,tt.Jl)(),[d,c]=(0,n.useState)(()=>{let e=localStorage.getItem(tH.PLAYED_SECTIONS_MAP);return e?JSON.parse(e):{basic:{},advanced:{}}}),[u,m]=(0,n.useState)("basic"),{userTrainingModal:p}=(0,E.bO)(),x=(0,n.useCallback)(e=>{let t=Object.keys(p).find(t=>p[t].some(t=>t.id===e));t&&(m(t),i(p[t].findIndex(t=>t.id===e)))},[p]),f=p[u][r],b=(0,n.useCallback)(function(){let{shouldCloseOnEnd:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldCloseOnEnd:!0},t=r+1,s=t>=p[u].length?tQ[tQ.indexOf(u)+1]:u;s!==u?i(0):i(t),s?m(null!=s?s:"basic"):e&&a(!1)},[r,u,a,p]),h=()=>l.current?l.current.currentTime:0,v=()=>l.current?l.current.duration:0;(0,n.useEffect)(()=>{localStorage.setItem(tH.PLAYED_SECTIONS_MAP,JSON.stringify(d))},[d]),(0,n.useEffect)(()=>{(null==f?void 0:f.id)!=null&&c(e=>({...e,[u]:{...e[u],[f.id]:!0}}))},[null==f?void 0:f.id,u]),(0,n.useEffect)(()=>{Object.values(d).reduce((e,t)=>e+Object.values(t).length,0)===p.basic.length+p.advanced.length&&o({flag:tB.sF.HAS_SEEN_USER_TRAINING_MODAL,status:!0})},[d,o,p.advanced.length,p.basic.length]);let _=(0,n.useMemo)(()=>({currentItemIndex:r,setCurrentItemIndex:i,playedItemsMap:d,videoRef:l,currentSection:u,setCurrentSection:m,userTrainingModal:p,currentItem:f,handleSelect:x,handleNextVideo:b,getVideoCurrentTime:h,getVideoDuration:v}),[f,r,u,b,x,d,p]);return(0,s.jsx)(aA.Provider,{value:_,children:t})},aS=()=>{let e=(0,n.useContext)(aA);if(!e)throw Error("useUserTrainingModalContext must be used within a UserTrainingModalProvider");return e},ak=e=>{let{className:t}=e,{handleNextVideo:a}=aS();return(0,s.jsxs)(k.$,{className:t,onClick:()=>{a({shouldCloseOnEnd:!0})},variant:"secondary",size:"md",children:["Next Video",(0,s.jsx)(eI.b1q,{className:"size-3.5"})]})},aT=()=>{let{currentItem:e}=aS();return(0,s.jsxs)("div",{className:"tablet:px-0 flex items-center justify-between px-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("p",{className:"text-content-primary text-body-lg laptop:text-heading-xs font-semibold",children:null==e?void 0:e.title}),(0,s.jsx)("p",{className:"text-content-secondary text-body-sm tablet:text-label-lg",children:null==e?void 0:e.description})]}),(0,s.jsx)(ak,{className:"tablet:flex hidden"})]})};function aC(e){let{progress:t,size:a=120,strokeWidth:n=8,containerClassName:r,backgroundCircleClassName:i,progressCircleClassName:l,showPercentage:o=!0}=e,d=Math.min(100,Math.max(0,t)),c=(a-n)/2,u=2*c*Math.PI;return(0,s.jsxs)("div",{className:(0,ec.cn)("relative inline-flex items-center justify-center",r),children:[(0,s.jsxs)("svg",{width:a,height:a,className:"-rotate-90 transform",children:[(0,s.jsx)("circle",{cx:a/2,cy:a/2,r:c,stroke:"currentColor",strokeWidth:n,fill:"transparent",className:(0,ec.cn)("text-surface-secondary transition-all duration-300 ease-in-out",i)}),(0,s.jsx)("circle",{cx:a/2,cy:a/2,r:c,stroke:"currentColor",strokeWidth:n,fill:"transparent",strokeDasharray:u,strokeDashoffset:u-d/100*u,strokeLinecap:"round",className:(0,ec.cn)("text-fill-brand transition-all duration-300 ease-in-out",l)})]}),o&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-lg font-semibold text-gray-900",children:[Math.round(d),"%"]})})]})}var aP=a(87740),aD=a.n(aP);c().extend(aD());let a$=e=>{let{item:t}=e,{currentItem:a,playedItemsMap:r,handleSelect:i,getVideoCurrentTime:l,getVideoDuration:o}=aS(),[d,u]=(0,n.useState)(l),m=(null==a?void 0:a.id)===t.id,p=o(),x=c().duration(p,"seconds"),f=x.minutes(),b=x.seconds();return(0,n.useEffect)(()=>{if(m){let e=setInterval(()=>{u(l)},500);return()=>clearInterval(e)}},[l,m]),(0,s.jsx)("button",{className:"rounded-2 group data-[watched=true]:text-content-tertiary text-content-secondary data-[active=true]:text-content-primary text-body-sm tablet:text-body-md data-[active=true]:bg-fill-brand-secondary-disabled hover:bg-surface-primary h-10 w-full cursor-pointer px-4 py-2 text-start transition-all duration-300 active:scale-95 data-[active=true]:font-medium","data-active":m,"data-watched":r.basic[t.id]||r.advanced[t.id],onClick:()=>i(t.id),children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(eI.PzS,{className:"text-border-tertiary group-data-[watched=true]:text-fill-brand transition-colors duration-300 group-data-[active=true]:hidden"}),(0,s.jsx)(aC,{progress:p>0?Math.round(d/p*100):0,showPercentage:!1,size:24,strokeWidth:3,backgroundCircleClassName:"text-fill-brand-secondary-active",containerClassName:"hidden group-data-[active=true]:inline-flex"}),t.title,(0,s.jsx)("span",{className:"text-label-xs text-content-tertiary ml-auto hidden group-data-[active=true]:inline-block",children:b>0&&(f>0?"".concat(f," min"):"".concat(b," sec"))}),(0,s.jsx)(eI.saN,{className:"text-content-tertiary ml-auto hidden size-4 group-hover:inline-block group-data-[active=true]:hidden"})]})})},aw=e=>{let{heading:t,items:a}=e,{playedItemsMap:r}=aS(),i=(0,n.useMemo)(()=>{let e=Object.keys(r[t]).length,s=a.length;return s>0?Math.round(e/s*100):0},[t,a,r]);return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-content-secondary text-body-sm font-medium capitalize",children:t}),(0,s.jsx)(aC,{progress:i,showPercentage:!1,size:24,strokeWidth:4})]}),(0,s.jsx)("div",{className:"rounded-3 border-border-primary flex w-full flex-col gap-2 border px-2 py-4",children:a.map(e=>(0,s.jsx)(a$,{item:e},e.id))})]})},aR=()=>{let{currentItem:e}=aS();return(0,s.jsxs)(k.$,{onClick:()=>{e&&window.open(e.redirectTo,"_self")},variant:"ghost",children:["Try it yourself",(0,s.jsx)(eI.oA3,{})]})};var aM=a(68309),aL=a(40916);let aU=()=>{var e,t;let{videoRef:a,handleNextVideo:r}=aS(),[i,l]=(0,n.useState)(!1),[o,d]=(0,n.useState)(0),[c,u]=(0,n.useState)(!0),[m,p]=(0,n.useState)(!1),x=()=>{a.current&&(m?a.current.pause():a.current.play(),p(!m))},f=()=>{l(!!document.fullscreenElement)};return(0,n.useEffect)(()=>{let e=a.current,t=()=>{a.current&&d(a.current.currentTime)},s=()=>{a.current&&(a.current.play().catch(()=>{}),u(!1))},n=()=>{a.current&&u(!0)},i=()=>{r({shouldCloseOnEnd:!1}),p(!1)};return e&&(e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",s),e.addEventListener("loading",n),e.addEventListener("play",()=>p(!0)),e.addEventListener("pause",()=>p(!1)),e.addEventListener("ended",i)),document.addEventListener("fullscreenchange",f),()=>{e&&(e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",s),e.removeEventListener("play",()=>p(!0)),e.removeEventListener("pause",()=>p(!1)),e.removeEventListener("loading",n),e.removeEventListener("ended",i)),document.removeEventListener("fullscreenchange",f)}},[r,p,a]),(0,s.jsxs)("div",{onClick:e=>{!e.target.closest('[data-slot="slider"]')&&a.current&&(a.current.pause(),x())},onKeyDown:e=>{(" "===e.key||"Enter"===e.key)&&(e.preventDefault(),!e.target.closest('[data-slot="slider"]')&&a.current&&(a.current.pause(),x()))},role:"button",tabIndex:0,className:(0,ec.cn)("absolute inset-0 opacity-0 transition-opacity duration-300 hover:opacity-100",{"opacity-100":!m||c}),children:[(0,s.jsx)("button",{onClick:x,className:"tablet:size-20 absolute top-1/2 left-1/2 flex size-13 -translate-x-1/2 -translate-y-1/2 items-center justify-center rounded-full bg-[rgba(0,0,0,0.34)] backdrop-blur-lg transition-transform duration-200 focus-visible:outline-none active:scale-90 [&_svg]:size-8",children:c?(0,s.jsx)(Z.y,{className:"text-content-fixed-inverse size-10"}):m?(0,s.jsx)(eI.I7s,{className:"text-content-fixed-inverse"}):(0,s.jsx)(eI.SFX,{className:"text-content-fixed-inverse"})}),(0,s.jsxs)("div",{className:"group absolute inset-x-6 bottom-6.5 flex items-center gap-6 py-2",children:[(0,s.jsx)(aL.bL,{"data-slot":"slider",min:0,max:(null==(e=a.current)?void 0:e.duration)||0,value:[o],onValueChange:e=>{let t=e[0];a.current&&"number"==typeof t&&(a.current.currentTime=t,d(t))},className:"relative flex w-full touch-none items-center transition-transform duration-300 select-none group-hover:scale-y-130",children:(0,s.jsx)(aL.CC,{className:"bg-fill-inverse-disabled relative h-1.5 w-full grow overflow-hidden rounded-full",children:(0,s.jsx)(aL.Q6,{className:"bg-fill-secondary absolute h-full"})})}),(0,s.jsx)("div",{className:"text-content-primary-inverse-disabled text-label-xs tabular-nums",children:c?(0,s.jsx)(Z.y,{className:"size-3"}):(e=>{let t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t,":").concat(a.toString().padStart(2,"0"))})((null==(t=a.current)?void 0:t.duration)||0)}),(0,s.jsx)("button",{onClick:()=>{a.current&&(i?document.exitFullscreen&&document.exitFullscreen():a.current.requestFullscreen&&a.current.requestFullscreen())},className:"transition-colors hover:scale-105",children:(0,s.jsx)(eI.mSu,{className:"text-content-primary-inverse size-4"})})]})]})},aG=()=>{let{currentItem:e,videoRef:t,currentSection:a,currentItemIndex:n,userTrainingModal:r}=aS(),{theme:i}=(0,aM.D)(),l="dark"===i?null==e?void 0:e.dark:null==e?void 0:e.light;return(0,s.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,s.jsxs)("div",{className:"tablet:rounded-3 relative overflow-hidden",children:[(0,s.jsx)("video",{ref:t,src:null==l?void 0:l.video,poster:null==l?void 0:l.poster,className:"h-[498px] w-full object-cover focus-visible:outline-none",playsInline:!0,preload:"metadata",children:(0,s.jsx)("track",{kind:"captions"})}),(0,s.jsx)(aU,{})]}),(0,s.jsxs)("p",{className:"text-body-xs text-content-tertiary tablet:hidden text-center font-medium",children:[(0,s.jsx)("span",{className:"capitalize",children:a})," ",n+1," of ",r[a].length]})]})},az=()=>{let{isOpen:e,setDialogOpen:t}=tV(),{userTrainingModal:a,featureFlags:n}=(0,E.bO)();return!1===n[tK.USER_TRAINING_MODAL]?null:(0,s.jsx)(h.lG,{open:e,onOpenChange:t,children:(0,s.jsx)(aO,{setIsOpen:t,children:(0,s.jsxs)(h.Cf,{onOpenAutoFocus:e=>{e.preventDefault()},className:"scrollbar-none tablet:rounded-4 tablet:px-8 tablet:pt-14 tablet:max-h-[848px] tablet:max-w-[calc(min(100vw-48px,1370px))] size-full max-h-[100vh] overflow-y-auto rounded-none p-0 pt-14 pb-8",children:[(0,s.jsxs)(B.s,{children:[(0,s.jsx)(h.L3,{children:"User Training"}),(0,s.jsx)(h.rr,{children:"Welcome to your training. This is an onboarding training modal."})]}),(0,s.jsx)(h.HM,{asChild:!0,children:(0,s.jsxs)(k.$,{variant:"ghost",size:"sm",className:"absolute top-5 right-5",children:[(0,s.jsx)("span",{className:"tablet:inline-block hidden",children:"Close"}),(0,s.jsx)("span",{className:"tablet:hidden",children:(0,s.jsx)(eI.w0d,{})})]})}),(0,s.jsxs)(h.R4,{className:"gap-6",children:[(0,s.jsx)("div",{className:"tablet:px-0 flex items-center justify-between px-4",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-heading-sm laptop:text-heading-md text-content-primary font-semibold",children:"Let's get started!"}),(0,s.jsxs)("p",{className:"tablet:text-body-md text-body-sm text-content-primary",children:["Watch these quick tutorials to make the most of Imagine One as we set you up."," "]})]})}),(0,s.jsxs)("div",{className:"laptop:flex-row flex h-full flex-col-reverse gap-6",children:[(0,s.jsx)("div",{className:"laptop:max-w-[358px] tablet:px-0 flex w-full flex-col gap-6 px-4",children:tQ.map(e=>(0,s.jsx)(aw,{heading:e,items:a[e]},e))}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-6 pt-8",children:[(0,s.jsx)(aT,{}),(0,s.jsx)(aG,{}),(0,s.jsxs)("div",{className:"tablet:justify-end tablet:px-0 flex items-center justify-between px-4",children:[(0,s.jsx)(aR,{}),(0,s.jsx)(ak,{className:"tablet:hidden"})]})]})]})]})]})})})},aF=()=>(0,s.jsxs)(n.Suspense,{children:[(0,s.jsx)(tJ,{}),(0,s.jsx)(tO,{}),(0,s.jsx)(ay,{}),(0,s.jsx)(ey,{}),(0,s.jsx)(e4,{}),(0,s.jsx)(eU,{}),(0,s.jsx)(r.i.Root,{}),(0,s.jsx)(i.O.Root,{}),(0,s.jsx)(av,{}),(0,s.jsx)(az,{}),(0,s.jsx)(P,{}),(0,s.jsx)(tF,{}),(0,s.jsx)(aj,{}),(0,s.jsx)(ts,{}),(0,s.jsx)(R,{newCollectionDialogName:l.D.NEW_COLLECTION_MODAL})]})},66630:(e,t,a)=>{"use strict";a.d(t,{Toaster:()=>o});var s=a(54568),n=a(68309),r=a(51874),i=a(46626);let l=(0,a(54140).r)({size:"xs",variant:"secondary",className:"ml-auto"}),o=e=>{let{...t}=e,{theme:a="system"}=(0,n.D)();return(0,s.jsx)(r.l$,{theme:a,position:"top-center",toastOptions:{classNames:{toast:"flex pointer-events-auto items-center w-full rounded-3 shadow-sm px-3 py-2 gap-3 text-label-md font-medium ring-inset ring-1 border-none ring-border-primary bg-surface-primary-variant",description:"text-content-tertiary text-label-md",actionButton:l,icon:"size-5",title:"text-label-md text-content-secondary",closeButton:"order-last !bg-surface-primary-variant size-4 !text-content-secondary [&>svg]:stroke-2 [&>svg]:size-4 cursor-pointer"},unstyled:!0},icons:{success:(0,s.jsx)(i.j5u,{className:"text-fill-success size-5"}),error:(0,s.jsx)(i.KhD,{className:"text-fill-critical size-5"}),warning:(0,s.jsx)(i.Mp0,{className:"text-fill-warning size-5"})},...t})}},66727:(e,t,a)=>{"use strict";a.d(t,{D:()=>s});let s={NOTIFICATION_POPOVER:"notificationPopover",ONBOARDING_MODAL:"onboardingModal",TRAINING_MODAL:"trainingModal",IMAGE_PRESET_DIALOG:"imagePresetDialog",PERSONALIZE_DIALOG:"personalizeDialog",IMAGE_SETTING_SELECTOR_MODAL:"imageSettingSelectorModal",IMAGE_FULL_VIEW_MODAL:"imageFullViewModal",PLUS_ICON_BUTTON_MODAL:"plusIconButtonModal",IMAGE_SWITCH_MODE_BUTTON_MODAL:"imageSwitchModeButtonModal",IMAGE_MODEL_POPOVER:"imageModelPopover",ADD_IMAGE_OPTION_MODAL:"addImageOptionModal",PROMO_MODAL:"promoModal",VIDEO_MODEL_POPOVER:"videoModelPopover",VIDEO_EFFECT_POPOVER:"videoEffectPopover",VIDEO_SETTING_SELECTOR_DIALOG:"videoSettingSelectorDialog",VIDEO_SWITCH_MODE_BUTTON_DIALOG:"videoSwitchModeButtonDialog",VIDEO_ADD_IMAGE_OPTION_DIALOG:"videoAddImageOptionDialog",VIDEO_ADD_VIDEO_OPTION_DIALOG:"videoAddVideoOptionDialog",VIDEO_PREVIEW_POPOVER:"videoPreviewPopover",ADD_TRANSFER_MOTION_CHARACTER_MODAL:"addTransferMotionCharacterModal",ADD_TRANSFER_MOTION_EXPRESSION_MODAL:"addTransferMotionExpressionModal",TRANSFER_MOTION_VIDEO_RECORDING_DIALOG:"transferMotionVideoRecordingDialog",TRANSFER_MOTION_IMAGE_ASSETS_DIALOG:"transferMotionImageAssetsDialog",TRANSFER_MOTION_VIDEO_ASSETS_DIALOG:"transferMotionVideoAssetsDialog",TRANSFER_MOTION_CREATIONS_SHEET:"transferMotionCreationsSheet",CREATE_NEW_ORGANIZATION_FOLDER_DIALOG:"createNewOrganizationFolderDialog",EDIT_ORGANIZATION_FOLDER_DIALOG:"editOrganizationFolderDialog",MOBILE_FOLDER_SELECTOR:"mobileFolderSelector",MOBILE_NAVBAR:"mobileNavbar",CREATE_FLOW_TEMPLATE_DIALOG:"createFlowTemplateDialog",COMMUNITY_ADVANCED_FILTERS_MODAL:"communityAdvancedFiltersModal",EDIT_PROFILE_MODAL:"editProfileModal",EDIT_TEAM_PROFILE_MODAL:"editTeamProfileModal",SHARE_PROFILE_MODAL:"shareProfileModal",NEW_COLLECTION_MODAL:"newCollectionModal",NEW_COLLECTION_MODAL_IN_PROFILE:"newCollectionModalInProfile",ADD_TO_COLLECTION_MODAL:"addToCollectionModal",ASSET_QUERY_MODAL:"asset",UPLOAD_ASSET_MODAL:"uploadAssetModal",SELECT_ASSETS_MODAL:"selectAssetsModal",RENAME_COLLECTION_MODAL:"renameCollectionModal",EDIT_COLLECTION_MODAL:"editCollectionModal",CREATE_USERNAME_MODAL:"createUsernameModal",FLOW_SHORTCUTS_DIALOG:"flowShortcutsDialog",MOVE_ASSETS_DIALOG:"moveAssetsDialog",JOIN_TEAM_MODAL:"joinTeamModal",CREATE_TEAM_MODAL:"createTeamModal",ADD_MEMBER_MODAL:"addMemberModal",DISPLAY_FOLDERS_POPOVER:"displayFoldersPopover",TEAMSPACE_SEE_MORE_POPOVER:"teamspaceSeeMorePopover",PRIVATE_SEE_MORE_POPOVER:"privateSeeMorePopover"}},67287:(e,t,a)=>{"use strict";a.d(t,{M:()=>m});var s=a(55437),n=a(22470),r=a(59051),i=a(12331),l=a(44455),o=a(65762),d=a(19136),c=a(49074),u=a(29003);let m=e=>{let t=(0,r.b)(n.i,e.endpoint);switch(t){case s.j.GENERATE_IMAGE:case s.j.GENERATE_IMAGE_ASYNC:case s.j.GENERATE_TRANSPARENT_IMAGE:case s.j.GENERATE_TRANSPARENT_IMAGE_ASYNC:return(e=>{let t=(0,c.JO)(e.settings),a=(0,c.qf)(e.url);return{...e,settings:t,url:a,tag:o.A.IMAGE_GENERATION,service:i.z1.IMAGE,refService:void 0,type:d.KJ.OBJECT}})({...e,endpoint:t});case s.j.UPSCALE_IMAGE_ASYNC:case s.j.UPSCALE_IMAGE:return(e=>{let t=(0,u.IQ)(e.settings),a=(0,u.l5)(e.url);return{...e,settings:t,url:a,tag:o.A.IMAGE_UPSCALE,service:i.z1.IMAGE,refService:void 0,type:d.KJ.OBJECT}})({...e,endpoint:t});case s.j.REMOVE_IMAGE_BACKGROUND:case s.j.REMOVE_IMAGE_BACKGROUND_ASYNC:return(e=>{let t=(0,l.Mb)(e.settings),a=(0,l.O)(e.url);return{...e,settings:t,url:a,tag:o.A.IMAGE_REMOVE_BG,service:i.z1.IMAGE,refService:void 0,type:d.KJ.OBJECT}})({...e,endpoint:t})}}},67734:(e,t,a)=>{"use strict";a.d(t,{C:()=>o,x:()=>d});var s=a(67933),n=a(87606),r=a(7620),i=a(90416),l=a(89722);let o=e=>(0,s.I)({queryKey:[i.n.GET_USER_COLLECTIONS,e],queryFn:()=>l.H.getUsersCollections(e),select:e=>e.data,enabled:!!e}),d=e=>{let t=(0,n.jE)();return(0,r.useCallback)(()=>(console.log("Invalidating user collections for username:",e),t.invalidateQueries({queryKey:[i.n.GET_USER_COLLECTIONS,e]})),[t,e])}},68302:(e,t,a)=>{"use strict";a.d(t,{ei:()=>n,xs:()=>r});var s=a(615);let n=(0,s.F)("flex w-full ring-1 ring-inset ring-transparent text-content-primary font-normal transition-all file:ring-0 file:bg-transparent file:text-label-sm file:font-medium placeholder:text-content-tertiary focus-visible:outline-none focus-visible:ring-border-inverse focus:ring-border-inverse disabled:cursor-not-allowed disabled:text-content-primary-disabled disabled:placeholder:text-content-primary-disabled disabled:ring-border-primary-disabled placeholder:transition-colors aria-[invalid=true]:ring-border-critical",{variants:{variant:{primary:"bg-fill-primary disabled:bg-fill-primary-disabled",secondary:"bg-fill-secondary disabled:bg-fill-secondary-disabled","secondary-variant":"bg-fill-secondary-variant disabled:bg-fill-secondary-variant-disabled",none:""},size:{sm:"px-2.5 py-1 rounded-2.5 text-label-sm group-data-[input-start=true]:ps-7 group-data-[input-end=true]:pe-7",md:"px-2.5 py-1.5 rounded-2.5 text-label-md group-data-[input-start=true]:ps-7.5 group-data-[input-end=true]:pe-7.5",lg:"px-3.5 py-2.5 rounded-3 text-label-lg group-data-[input-start=true]:ps-10 group-data-[input-end=true]:pe-10",xl:"px-3.5 py-3 rounded-3.5 text-label-xl group-data-[input-start=true]:ps-10.5 group-data-[input-end=true]:pe-10.5",none:""}},defaultVariants:{variant:"primary",size:"md"}}),r=(0,s.F)("absolute text-content-secondary inset-y-0 my-auto transition-all aria-[disabled=true]:text-content-primary-disabled aria-[disabled=true]:cursor-not-allowed",{variants:{size:{sm:"size-3.5 data-[slot=input-start]:start-2.5 data-[slot=input-end]:end-2.5",md:"size-4 data-[slot=input-start]:start-2.5 data-[slot=input-end]:end-2.5",lg:"size-4.5 data-[slot=input-start]:start-3.5 data-[slot=input-end]:end-3.5",xl:"size-5 data-[slot=input-start]:start-3.5 data-[slot=input-end]:end-3.5",none:""}},defaultVariants:{size:"md"}})},68407:(e,t,a)=>{"use strict";a.d(t,{g:()=>o,l:()=>d});var s=a(67933),n=a(27338),r=a(60095),i=a(34267),l=a(29551);let o=e=>{let{orgId:t}=e;return[i.c.ORGS_BASE_TAG,i.c.ORGANIZATION_JOIN_REQUESTS,t]},d=e=>{let{enabled:t,...a}=e,{user:i}=(0,r.u)();return(0,s.I)({queryKey:o({orgId:a.orgId}),staleTime:n.I5,queryFn:()=>l.o.getOrganizationJoinRequests({...a,pageSize:200}),enabled:!!i&&(null==t||t)})}},69183:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});var s=a(54568),n=a(56559),r=a(615);a(7620);var i=a(11386);let l=(0,r.F)("text-content-secondary text-label-md font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=e=>{let{className:t,...a}=e;return(0,s.jsx)(n.b,{"data-slot":"label",className:(0,i.cn)(l({className:t})),...a})}},70167:(e,t,a)=>{"use strict";a.d(t,{Y:()=>s});let s={REDIRECT:"redirect",SHOW_AUTH:"showAuth"}},71170:(e,t,a)=>{"use strict";a.d(t,{o:()=>u});var s=a(55437),n=a(46660),r=a(59051),i=a(12331),l=a(37328),o=a(65762),d=a(19136),c=a(3793);let u=e=>{let t=(0,r.b)(n.q,e.endpoint);switch(t){case s.j.GENERATE_VIDEO_ASYNC:return(e=>{let t=(0,l.rQ)(e.settings),a=(0,l.U9)(e.url);return{...e,settings:t,url:a,tag:o.A.VIDEO_GENERATION,service:i.z1.VIDEO,refService:void 0,type:d.KJ.OBJECT}})({...e,endpoint:t});case s.j.ENHANCE_VIDEO_UPLOAD:return(e=>{let t=(0,c.uw)(e.settings),a=(0,c.tg)(e.url);return{...e,settings:t,url:a,tag:o.A.VIDEO_UPSCALE,service:i.z1.VIDEO,refService:void 0,type:d.KJ.OBJECT}})({...e,endpoint:t})}}},71387:(e,t,a)=>{"use strict";a.d(t,{E:()=>s});let s={VIDEO_GENERATION_SOURCE:"video_generation_source",ONBOARDING_USER_PERSONA_ANSWER:"onboarding_user_persona_answer",ONBOARDING_USER_INITIAL_GOAL:"onboarding_user_initial_goal",ONBOARDING_USER_CADENCE:"onboarding_user_cadence",ONBOARDING_USER_MEDIA_TYPE:"onboarding_user_media_type",ONBOARDING_USER_MEMBERS:"onboarding_user_members",TRANSFER_MOTION_CHARACTER_SOURCE:"transfer_motion_character_source",TRANSFER_MOTION_EXPRESSION_SOURCE:"transfer_motion_expression_source"}},73352:(e,t,a)=>{"use strict";a.d(t,{j_:()=>d,rz:()=>o,BU:()=>u,lx:()=>m,QT:()=>p});var s=a(54568),n=a(7620),r=a(49074),i=a(3397);let l=(0,n.createContext)(null),o=-1,d={aspectRatio:["1:1"],description:"",icon:"",id:-1,maxImages:0,minImages:0,name:"-",modelId:-1,oldModelIds:void 0,presets:[],isEnhance:!1,enhancerId:void 0},c={aspectRatio:["1:1"],description:"",icon:"",id:-1,maxImages:0,minImages:0,name:"Legacy",modelId:-1,oldModelIds:void 0,presets:[],isEnhance:!1,enhancerId:void 0},u={id:-1,modelId:-1,oldModelIds:void 0,name:"Fallback",icon:"",description:"",shouldGenerateImageFirst:!1,t2vSupportedAspectRatios:[],i2vSupportedAspectRatios:[],isEnhance:!1,enhancerIdConfig:{},supportedEffectsListIds:[],supportedDurations:[],supportedResolutions:[],isLastFrameSupported:!1},m=e=>{let{children:t}=e,{imageMode:a,imageModeKeyToIdMap:o,videoModels:m}=(0,i.bO)(),p=(0,n.useMemo)(()=>{let e=Object.entries(a).flatMap(e=>{let[t,{models:a}]=e;return a.map(e=>({mode:t,model:e}))}),t=Object.fromEntries(Object.entries(o).map(e=>{let[t,a]=e;return[a,t]}));return{videoModels:m,getVideoModelUsingStyleId:e=>{var t;return e&&"-1"!==e&&null!=(t=m.find(t=>{let{modelId:a,oldModelIds:s}=t;return"".concat(a)===e||(null==s?void 0:s.some(t=>"".concat(t)===e))}))?t:u},imageModels:e,getImageModelUsingStyleIdWithPluginName:(a,s,n)=>{var i;return a&&"-1"!==a?null!=(i=(e=>{let{models:t,styleId:a,pluginName:s,modeKey:n}=e;if(n){let e=t.find(e=>e.mode===n&&"".concat(e.model.modelId)===a);if(e)return e}let r=t.filter(e=>{var t;return a==="".concat(e.model.modelId)||(null==(t=e.model.oldModelIds)?void 0:t.some(e=>a==="".concat(e)))});if(0===r.length)return;if(1===r.length)return r[0];let i=r.filter(e=>e.model.enhancerId===s);return 0!==i.length?i[0]:r[0]})({models:e,styleId:a,pluginName:s,modeKey:null!=n?t[n]:void 0}))?i:{mode:r.KE.CREATE,model:c}:{mode:r.KE.CREATE,model:d}}}},[a,o,m]);return(0,s.jsx)(l,{value:p,children:t})},p=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useModelContext must be used within a ModelProvider");return e}},74679:(e,t,a)=>{"use strict";a.d(t,{Qi:()=>y,rH:()=>E});var s=a(67933),n=a(99757),r=a(27338),i=a(12331),l=a(60095),o=a(67287),d=a(71170),c=a(59761),u=a(90416),m=a(29551),p=a(90916),x=a(54582),f=a(47672);let b=[i.z1.IMAGE,i.z1.VIDEO],h=void 0,v=e=>({assets:e.assets.map(e=>{try{switch(e.service){case i.z1.IMAGE:return(0,o.M)(e);case i.z1.VIDEO:return(0,d.o)(e);default:return null}}catch(e){return null}}).filter(e=>null!=e)}),_=async e=>{let{services:t=b,isDraftFolder:a,isPersonal:s,...n}=e,r=n.parentId&&!a?await m.o.getAllOrganizationAssets({service:t,...n}):await m.o.getAllOrganizationObjects({service:t,isUserOwned:s,...n}),i=v(r.data);return{...r,data:i}},g=async e=>{let{parentId:t}=e,a=await m.o.getFeaturedOrganizationAssets({parentId:t}),s=v(a.data);return{...a,data:{assets:s.assets.map(e=>({...e,isFeatured:!0}))}}},y=e=>{let{services:t=b,isPersonal:a,orgId:s,parentId:n,isDraftFolder:r=!1}=e,i=[...t].sort(),l=[u.n.EDITOR_ASSETS,...i];return n&&!r&&l.push(n),null!=a&&l.push(String(a)),s&&l.push(s),l},E=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0,{user:i}=(0,l.u)(),{isLoading:o,isError:d,isPersonal:m,isDraftFolder:v,isFeaturedFolder:E,selectedFolder:I}=(0,p.X)(),{selectedOrganizationId:N}=(0,f.v)(),{selectedFolderId:j}=(0,x.I)(),A=null!=a?a:m,O=!!i&&!o&&!d&&null!=j,S=E?j:null==I||null==(e=I.settings)?void 0:e.featuredFolderId,k=(0,s.I)({queryKey:[u.n.EDITOR_ASSETS,S],queryFn:async()=>await g({parentId:S}),staleTime:r.HZ,enabled:O&&null!=S}),T=(0,n.q)({queryKey:[c.e.INFINITE,...y({services:t,parentId:j,isPersonal:A,orgId:N,isDraftFolder:v})],queryFn:async e=>{let{pageParam:a}=e;return await _({isDraftFolder:v,orgId:N,limit:50,fromId:a,batch:!0,services:t,parentId:j,isPersonal:A})},getNextPageParam:e=>{let{assets:t}=e.data;if(t.length<50)return;let a=t[t.length-1];return null==a?void 0:a.uuid},enabled:O&&!E,staleTime:r.HZ,initialPageParam:h}),C=T.data?{...T.data,pages:[...T.data.pages,...k.data?[k.data]:[]]}:{pages:k.data?[k.data]:[],pageParams:[]};return{...T,data:C,isLoading:T.isLoading||o||k.isLoading,isError:T.isError||d||k.isError}}},76376:(e,t,a)=>{"use strict";a.d(t,{k:()=>s});let s=a(25826).Ay$.string().default("{}")},81905:(e,t,a)=>{"use strict";a.d(t,{Q:()=>s});let s=[[a(90416).n.IMAGE_ASSETS]]},82873:(e,t,a)=>{"use strict";a.d(t,{p:()=>o});var s=a(54568),n=a(79649);a(7620);var r=a(11386),i=a(68302);let l=e=>{let{className:t,type:a,size:n,variant:l,...o}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)((0,i.ei)({className:t,size:n,variant:l})),...o})},o=e=>{let{wrapperClassName:t,start:a,end:o,...d}=e;return a||o?(0,s.jsxs)("div",{className:(0,r.cn)("group relative w-full",t),"data-input-start":!!a,"data-input-end":!!o,children:[a&&(0,s.jsx)(n.DX,{"data-slot":"input-start","aria-disabled":d.disabled,className:(0,i.xs)({size:d.size}),children:a}),(0,s.jsx)(l,{...d}),o&&(0,s.jsx)(n.DX,{"data-slot":"input-end","aria-disabled":d.disabled,className:(0,i.xs)({size:d.size}),children:o})]}):(0,s.jsx)(l,{...d})}},82915:(e,t,a)=>{"use strict";a.d(t,{g:()=>o,p:()=>d});var s=a(67933),n=a(27338),r=a(60095),i=a(34267),l=a(29551);let o=()=>[i.c.ORGS_BASE_TAG,i.c.USER_JOIN_REQUESTS],d=function(){let{enabled:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{user:a}=(0,r.u)();return(0,s.I)({queryKey:o(),staleTime:n.I5,queryFn:()=>l.o.getUserJoinRequests({...t,pageSize:500}),enabled:!!a&&(null==e||e)})}},83728:(e,t,a)=>{"use strict";a.d(t,{Initializers:()=>e7});var s=a(54568),n=a(98502),r=a(19533),i=a(7620);let l=()=>((0,i.useEffect)(()=>{window&&r.h.NEXT_PUBLIC_IS_PRODUCTION_DEPLOYMENT&&(window.console.log=()=>{},window.console.warn=()=>{},window.console.error=()=>{})},[]),null);var o=a(51874),d=a(52948);let c=()=>{let{isError:e}=(0,d.aR)();return(0,i.useEffect)(()=>{e&&o.oR.error("Failed to get your subscription info")},[e]),null};var u=a(89329),m=a(82806),p=a(53881),x=a(78435),f=a(36348),b=a(56805),h=a(29551),v=a(31201),_=a(99636);let g=[u.A,v.x,_.D_,b.B,x.N,f.p,h.f],y=()=>((0,i.useLayoutEffect)(()=>{let e=g.map(e=>e.interceptors.request.use(async e=>{let t=(0,m.getCookie)(p.H.IMPERSONATE_USER_TOKEN,{domain:r.h.NEXT_PUBLIC_APP_DOMAIN})||(0,m.getCookie)(p.H.BEARER_TOKEN,{domain:r.h.NEXT_PUBLIC_APP_DOMAIN});return t&&(e.headers.Authorization="Bearer ".concat(t)),e}));return()=>{e.forEach((e,t)=>{var a;null==(a=g[t])||a.interceptors.request.eject(e)})}},[]),null);var E=a(60095),I=a(89829),N=a(79920),j=a(78848);let A=()=>{let e=(0,I.mW)(),{user:t}=(0,E.u)(),{handleLogout:a}=(0,N.O)(),s=(0,j.hM)();return(0,n.BP)({onSuccess:t=>{let{credential:a}=t;if(!a)return void o.oR.error("One-tap credential not found");e.mutate({payload:{credential:a}})},onError:()=>{a(),o.oR.error("One-tap failed")},disabled:!!t||s,auto_select:!0,cancel_on_tap_outside:!1,use_fedcm_for_prompt:!0}),null};var O=a(27338),S=a(58910);let k=async(e,t)=>new Promise(a=>{let s=setInterval(()=>{e()&&(clearInterval(s),a())},t)}),T=[u.A,v.x,x.N,b.B,f.p,h.f],C=()=>{let e=(0,i.useRef)(!1);return(0,i.useLayoutEffect)(()=>{let t=T.map(t=>t.interceptors.request.use(async t=>{var a;if((null==(a=t.url)?void 0:a.endsWith("/refresh/web"))||(e.current&&await k(()=>!e.current,1e3),(0,m.getCookie)(p.H.BEARER_TOKEN,{domain:r.h.NEXT_PUBLIC_APP_DOMAIN})))return t;let s=(0,m.getCookie)(p.H.REFRESH_TOKEN);if(!s)return t;e.current=!0;try{let e=await S.y.getNewToken({refreshToken:s}).catch(()=>null);if(!e)return t;let{data:a}=e,n=new Date(Date.now()+1e3*a.tokenExpiresIn),i=new Date(Date.now()+O.f);(0,m.setCookie)(p.H.BEARER_TOKEN,a.token,{expires:n,domain:r.h.NEXT_PUBLIC_APP_DOMAIN}),(0,m.setCookie)(p.H.REFRESH_TOKEN,a.refreshToken,{expires:i,domain:r.h.NEXT_PUBLIC_APP_DOMAIN})}catch(e){console.error("Exception caught during token refresh:",e)}return e.current=!1,t}));return()=>{t.forEach((e,t)=>{var a;null==(a=T[t])||a.interceptors.request.eject(e)})}},[]),null};var P=a(788),D=a(47672),$=a(87606),w=a(17685),R=a(53e3),M=a(378),L=a(75887),U=a(19136),G=a(59051),z=a(46586),F=a(84735);let B=e=>{let{isPersonal:t,orgId:a}=e;return[(0,z.Y)({isPersonal:t,orgId:a})]},q=e=>{let{orgId:t}=e;return[(0,F.Z)({orgId:t})]};var V=a(12331);let K={CREDIT_CONSUMED:"credit.consumed",CREDIT_REVERTED:"credit.reverted",FOLDER_CREATED:"folder.created",FOLDER_UPDATED:"folder.updated",FOLDER_DELETED:"folder.deleted",FOLDER_PINNED:"folder.pinned",FOLDER_UNPINNED:"folder.unpinned",OBJECT_CREATED:"object.created",OBJECT_STATUS:"object.status",OBJECT_DELETED:"object.deleted",OBJECT_MOVED:"object.moved",ORG_UPDATED:"org.updated",ORG_DELETED:"org.deleted",ORG_USER_ADDED:"org_user.added",ORG_USER_UPDATED:"org_user.updated",ORG_USER_REMOVED:"org_user.removed",ORG_USER_INVITATION_ACCEPTED:"org_user.invitation_accepted",ORG_USER_INVITATION_DELETED:"org_user.invitation_deleted",ORG_USER_INVITATION_SENT:"org_user.invited",ORG_USER_JOIN_REQUEST_ACCEPTED:"org_user.join_request_accepted",ORG_USER_JOIN_REQUEST_CANCELLED:"org_user.join_request_cancelled",ORG_USER_JOIN_REQUEST_PENDING:"org_user.join_request_pending",ORG_USER_JOIN_REQUEST_REJECTED:"org_user.join_request_rejected"};var Q=a(99958),H=a(37964),J=a(98575),Y=a(29856),W=a(91426),X=a(67287),Z=a(30744),ee=a(71170),et=a(13158),ea=a(9094),es=a(3262),en=a(68407),er=a(82915),ei=a(38),el=a(25826),eo=a(55437),ed=a(32162),ec=a(31625),eu=a(12995),em=a(65762);let ep=el.Ay$.object({placeholderUuid:el.Ay$.string().optional(),description:el.Ay$.string().optional(),presetId:el.Ay$.string().optional()}),ex=el.Ay$.object({autocrop:el.Ay$.string().optional(),category:el.Ay$.literal("character").optional(),description:el.Ay$.string().optional(),name:el.Ay$.string(),user:el.Ay$.string(),metadata:ec.p.optional().default("{}")}),ef=el.Ay$.object({generation:ed.aB,inputs:ed.aB,tags:ed.aB.optional(),thumbnail:ed.aB}).nullable().optional(),eb=el.Ay$.enum([eo.j.UPLOAD_MODEL]);el.Ay$.literal(em.A.MODEL_UPLOAD),el.Ay$.union([eb]);let eh=e=>{let t=(0,G.b)(eb,e.endpoint);if(t===eo.j.UPLOAD_MODEL)return(e=>{let t=(0,G.b)(ex,e.settings,{name:"Unknown",user:"{}",metadata:"{}"}),a=(0,G.b)(ef,e.url,{generation:[],inputs:[],tags:[],thumbnail:[]}),s=(e=>{var t;let a=(0,G.b)(ep,JSON.parse(null!=(t=e.metadata)?t:"{}")),s="string"==typeof e.user?JSON.parse(e.user):{email:"",name:""};return{autocrop:"true"===e.autocrop,category:e.category,description:e.description,name:e.name,user:s,metadata:a}})(t),n=(e=>e?{generation:(0,eu._)(e.generation),inputs:e.inputs,tags:e.tags,thumbnails:e.thumbnail}:{generation:"",inputs:[],tags:[],thumbnails:[]})(a);return{...e,settings:s,url:n,tag:em.A.MODEL_UPLOAD,service:V.z1.MODEL}})({...e,endpoint:t})};var ev=a(90416),e_=a(61508),eg=a(42203),ey=a(81905),eE=a(25011),eI=a(62956),eN=a(59995);let ej=[[ev.n.VIDEO_ASSETS]],eA={OBJECT_CREATED:"object.created",OBJECT_STATUS:"object.status",OBJECT_DELETED:"object.deleted",ORG_CREATED:"org.created"},eO=el.Ay$.object({uuid:el.Ay$.string(),service:V.jc,ref_service:V.jc.optional()});var eS=a(86309);let ek=()=>((()=>{let{handleSocketPublication:e}=(()=>{let{handleImageAssetCreateEvent:e,handleImageAssetUpdateEvent:t,handleImageAssetDeleteEvent:a,handleImageUserAssetCreateEvent:s,handleImageUserAssetDeleteEvent:n}=(()=>{let e=(0,$.jE)(),t=t=>!!e.getQueryData(t),a=()=>!!e.getQueryData([ev.n.IMAGE_USER_ASSETS]);return{handleImageUserAssetDeleteEvent:t=>{a()&&e.setQueryData([ev.n.IMAGE_USER_ASSETS],e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==t.uuid)}}))},handleImageUserAssetCreateEvent:t=>{if(!a())return;let s=(0,eg.A4)((0,ei.O)((0,G.b)(ei.l,t)));e.setQueryData([ev.n.IMAGE_USER_ASSETS],e=>({...e,data:{...e.data,assets:[s,...e.data.assets]}}))},handleImageAssetCreateEvent:a=>{var s;let n=(0,e_.r)((0,ei.O)((0,G.b)(ei.l,a))),r=null!=(s=n.settings.metadata.placeholderUuid)?s:n.batchId;for(let a of ey.Q)t(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[n,...e.data.assets]}}:(n.batchId=r,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),n,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}:(n.batchId=r,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleImageAssetUpdateEvent:a=>{let s=(0,e_.r)((0,ei.O)((0,G.b)(ei.l,a)));for(let a of ey.Q)t(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===s.uuid),a=e.data.assets[t];return a?(s.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),s,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[s,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===s.uuid),n=t.data.assets[a];return n?(s.batchId=n.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),s,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[s,...t.data.assets]}},...e.pages.slice(1)]}})},handleImageAssetDeleteEvent:a=>{for(let s of ey.Q)t(s)&&e.setQueryData(s,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}))})}}})(),{handleVideoAssetCreateEvent:r,handleVideoAssetUpdateEvent:i,handleVideoAssetDeleteEvent:l,handleVideoUserAssetCreateEvent:o}=(()=>{let e=(0,$.jE)(),t=t=>!!e.getQueryData(t);return{handleVideoAssetCreateEvent:a=>{var s;let n=(0,eI.h)((0,ei.O)((0,G.b)(ei.l,a))),r=null!=(s=n.settings.metadata.placeholderUuid)?s:n.batchId;for(let a of ej)t(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[n,...e.data.assets]}}:(n.batchId=r,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),n,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}:(n.batchId=r,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleVideoAssetUpdateEvent:a=>{let s=(0,eI.h)((0,ei.O)((0,G.b)(ei.l,a)));for(let a of ej)t(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===s.uuid),a=e.data.assets[t];return a?(s.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),s,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[s,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===s.uuid),n=t.data.assets[a];return n?(s.batchId=n.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),s,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[s,...t.data.assets]}},...e.pages.slice(1)]}})},handleVideoAssetDeleteEvent:a=>{for(let s of ej)t(s)&&e.setQueryData(s,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}))})},handleVideoUserAssetCreateEvent:t=>{if(!e.getQueryData([ev.n.VIDEO_USER_ASSETS]))return;let a=(0,eN.s1)((0,ei.O)((0,G.b)(ei.l,t)));e.setQueryData([ev.n.VIDEO_USER_ASSETS],e=>({...e,data:{...e.data,assets:[a,...e.data.assets]}}))}}})(),{handleTransferMotionAssetCreateEvent:d,handleTransferMotionAssetUpdateEvent:c,handleTransferMotionAssetDeleteEvent:u}=(()=>{let e=(0,$.jE)(),t=()=>!!e.getQueryData([ev.n.TRANSFER_MOTION_ASSETS]);return{handleTransferMotionAssetCreateEvent:a=>{var s;if(!t())return;let n=(0,eE.vB)((0,ei.O)((0,G.b)(ei.l,a))),r=null!=(s=n.settings.metadata.placeholderUuid)?s:n.batchId;e.setQueryData([ev.n.TRANSFER_MOTION_ASSETS],e=>{if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}:(n.batchId=r,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleTransferMotionAssetUpdateEvent:t=>{let a=(0,eE.vB)((0,ei.O)((0,G.b)(ei.l,t)));e.setQueryData([ev.n.TRANSFER_MOTION_ASSETS],e=>{if(!e.pages[0])return e;let t=e.pages[0],s=t.data.assets.findIndex(e=>e.uuid===a.uuid),n=t.data.assets[s];return n?(a.batchId=n.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,s),a,...t.data.assets.slice(s+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[a,...t.data.assets]}},...e.pages.slice(1)]}})},handleTransferMotionAssetDeleteEvent:a=>{t()&&e.setQueryData([ev.n.TRANSFER_MOTION_ASSETS],e=>({...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}))}))}}})(),{handleModelAssetCreateEvent:m,handleModelAssetDeleteEvent:p,handleModelAssetUpdateEvent:x}=(()=>{let e=(0,$.jE)(),t=()=>!!e.getQueryData([ev.n.MODEL_ASSETS]);return{handleModelAssetCreateEvent:a=>{var s;if(!t())return;let n=eh((0,ei.O)((0,G.b)(ei.l,a))),r=null!=(s=n.settings.metadata.placeholderUuid)?s:n.batchId;e.setQueryData([ev.n.MODEL_ASSETS],e=>{if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}:(n.batchId=r,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleModelAssetUpdateEvent:t=>{let a=eh((0,ei.O)((0,G.b)(ei.l,t)));e.setQueryData([ev.n.MODEL_ASSETS],e=>{if(!e.pages[0])return e;let t=e.pages[0],s=t.data.assets.findIndex(e=>e.uuid===a.uuid),n=t.data.assets[s];return n?(a.batchId=n.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,s),a,...t.data.assets.slice(s+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[a,...t.data.assets]}},...e.pages.slice(1)]}})},handleModelAssetDeleteEvent:a=>{t()&&e.setQueryData([ev.n.MODEL_ASSETS],e=>({...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}))}))}}})(),{handleUserOrganizationCreateEvent:f}=(()=>{let e=(0,$.jE)();return{handleUserOrganizationCreateEvent:()=>{e.invalidateQueries({queryKey:(0,M.f)()})}}})();return{handleSocketPublication:b=>{switch(b.data.type){case eA.OBJECT_CREATED:{let t=b.data.data.object;if(t.ref_service&&(0,G.b)(V.jc,t.ref_service)===V.z1.IMAGINE_FLOWS)return;switch(t.service){case V.z1.IMAGE:e(t);break;case V.z1.VIDEO:r(t);break;case V.z1.MOTION:d(t);break;case V.z1.MODEL:m(t);break;case V.z1.USER:switch(t.ref_service){case V.z1.IMAGE:s(t);break;case V.z1.VIDEO:o(t)}}}break;case eA.OBJECT_STATUS:{let e=b.data.data.object,a=(0,G.b)(V.jc,e.service);if(e.ref_service&&(0,G.b)(V.jc,e.ref_service)===V.z1.IMAGINE_FLOWS)return;switch(a){case V.z1.IMAGE:t(e);break;case V.z1.VIDEO:i(e);break;case V.z1.MOTION:c(e);break;case V.z1.MODEL:x(e)}}break;case eA.OBJECT_DELETED:{let e=(0,G.b)(eO,b.data.data);if(e.ref_service&&e.ref_service===V.z1.IMAGINE_FLOWS)return;switch(e.service){case V.z1.IMAGE:a(e);break;case V.z1.MODEL:p(e);break;case V.z1.VIDEO:l(e);break;case V.z1.MOTION:u(e);break;case V.z1.USER:e.ref_service===V.z1.IMAGE&&n(e)}}break;case eA.ORG_CREATED:f()}}}})(),{handleOrganizationSocketPublication:t}=(()=>{let{handleOrganizationFolderAssetDeleteEvent:e,handleOrganizationFolderAssetCreateEvent:t,handleOrganizationFolderAssetUpdateEvent:a,handleOrganizationFolderAssetPinnedEvent:s,handleOrganizationFolderAssetUnpinnedEvent:n}=(()=>{let e=(0,$.jE)(),{user:t}=(0,E.u)(),a=t=>!!e.getQueryData(t);return{handleOrganizationFolderAssetUpdateEvent:s=>{let n=(0,L.xn)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of B({isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>{let t=e=>{let t=e.findIndex(e=>e.id===n.id||e.uuid===n.uuid);return -1!==t?[...e.slice(0,t),n,...e.slice(t+1)]:[n,...e]};if("data"in e)return{...e,data:{...e.data,assets:t(e.data.assets)}};if(!e.pages[0])return e;let a=e.pages[0];return{...e,pages:[{...a,data:{...a.data,assets:t(a.data.assets)}},...e.pages.slice(1)]}})},handleOrganizationFolderAssetDeleteEvent:s=>{let n=(0,L.xn)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of B({isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})},handleOrganizationFolderAssetCreateEvent:s=>{let n=(0,L.xn)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of B({isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>{var t;if("data"in e&&e.data.assets.some(e=>e.uuid===n.uuid)||"pages"in e&&(null==(t=e.pages[0])?void 0:t.data.assets.some(e=>e.uuid===n.uuid)))return e;if("data"in e)return{...e,data:{...e.data,assets:[n,...e.data.assets]}};if(!e.pages[0])return e;let a=e.pages[0];return{...e,pages:[{...a,data:{...a.data,assets:[n,...a.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationFolderAssetPinnedEvent:s=>{let n=(0,L.xn)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of q({orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e)return{...e,data:{...e.data,assets:[n,...e.data.assets]}};if(!e.pages[0])return e;let t=e.pages[0];return{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationFolderAssetUnpinnedEvent:s=>{let n=(0,L.xn)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of q({orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})}}})(),{handleOrganizationObjectEvents:r}=(()=>{let{handleOrganizationImageAssetCreateEvent:e,handleOrganizationImageAssetUpdateEvent:t,handleOrganizationImageAssetDeleteEvent:a,handleOrganizationImageAssetMoveEvent:s}=(()=>{let e=(0,$.jE)(),{user:t}=(0,E.u)(),a=t=>!!e.getQueryData(t);return{handleOrganizationImageAssetCreateEvent:s=>{var n;let r=(0,X.M)((0,U.L)((0,G.b)(U.oD,s)));if(r.isPersonal&&(null==t?void 0:t.id)!==r.userId)return;let i=null!=(n=r.settings.metadata.placeholderUuid)?n:r.batchId;for(let t of(0,Z.u)({parentId:r.parentId,isPersonal:r.isPersonal,orgId:r.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===i&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[r,...e.data.assets]}}:(r.batchId=i,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),r,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===i&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[r,...t.data.assets]}},...e.pages.slice(1)]}:(r.batchId=i,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),r,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleOrganizationImageAssetUpdateEvent:s=>{let n=(0,X.M)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of(0,Z.u)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===n.uuid),a=e.data.assets[t];return a?(n.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),n,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[n,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===n.uuid),s=t.data.assets[a];return s?(n.batchId=s.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationImageAssetDeleteEvent:s=>{let n=(0,U.L)((0,G.b)(U.oD,s));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of(0,Z.u)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})},handleOrganizationImageAssetMoveEvent:t=>{let s=(0,X.M)((0,U.L)((0,G.b)(U.oD,t))),n=s.oldParentFolderId;if(n)for(let t of(0,Z.u)({parentId:n,isPersonal:s.isPersonal,orgId:s.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==s.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==s.uuid)}}))});for(let t of(0,Z.u)({parentId:s.parentId,isPersonal:s.isPersonal,orgId:s.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===s.uuid);return -1===t?{...e,data:{...e.data,assets:[s,...e.data.assets]}}:{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),s,...e.data.assets.slice(t+1)]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===s.uuid);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[s,...t.data.assets]}},...e.pages.slice(1)]}:{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),s,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}})}}})(),{handleOrganizationVideoAssetCreateEvent:n,handleOrganizationVideoAssetUpdateEvent:r,handleOrganizationVideoAssetDeleteEvent:i,handleOrganizationVideoAssetMoveEvent:l}=(()=>{let e=(0,$.jE)(),{user:t}=(0,E.u)(),a=t=>!!e.getQueryData(t);return{handleOrganizationVideoAssetCreateEvent:s=>{var n;let r=(0,ee.o)((0,U.L)((0,G.b)(U.oD,s)));if(r.isPersonal&&(null==t?void 0:t.id)!==r.userId)return;let i=null!=(n=r.settings.metadata.placeholderUuid)?n:r.batchId;for(let t of(0,et.W)({parentId:r.parentId,isPersonal:r.isPersonal,orgId:r.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===i&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[r,...e.data.assets]}}:(r.batchId=i,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),r,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===i&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[r,...t.data.assets]}},...e.pages.slice(1)]}:(r.batchId=i,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),r,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleOrganizationVideoAssetUpdateEvent:s=>{let n=(0,ee.o)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of(0,et.W)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===n.uuid),a=e.data.assets[t];return a?(n.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),n,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[n,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===n.uuid),s=t.data.assets[a];return s?(n.batchId=s.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationVideoAssetDeleteEvent:s=>{let n=(0,U.L)((0,G.b)(U.oD,s));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of(0,et.W)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})},handleOrganizationVideoAssetMoveEvent:t=>{let s=(0,ee.o)((0,U.L)((0,G.b)(U.oD,t))),n=s.oldParentFolderId;if(n)for(let t of(0,et.W)({parentId:n,isPersonal:s.isPersonal,orgId:s.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==s.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==s.uuid)}}))});for(let t of(0,et.W)({parentId:s.parentId,isPersonal:s.isPersonal,orgId:s.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===s.uuid);return -1===t?{...e,data:{...e.data,assets:[s,...e.data.assets]}}:{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),s,...e.data.assets.slice(t+1)]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===s.uuid);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[s,...t.data.assets]}},...e.pages.slice(1)]}:{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),s,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}})}}})(),{handleOrganizationAppImageAssetCreateEvent:o,handleOrganizationAppImageAssetUpdateEvent:d,handleOrganizationAppImageAssetDeleteEvent:c}=(()=>{let e=(0,$.jE)(),{addToSlugsToLatestGenerationMap:t}=(0,J.p)(),{user:a}=(0,E.u)(),s=t=>!!e.getQueryData(t);return{handleOrganizationAppImageAssetCreateEvent:n=>{var r;let i=(0,Q.v)((0,U.L)((0,G.b)(U.oD,n)));if(i.isPersonal&&(null==a?void 0:a.id)!==i.userId)return;let l=null!=(r=i.settings.metadata.placeholderUuid)?r:i.batchId;for(let a of(t({generation:i}),(0,H.I)({parentId:i.parentId,isPersonal:i.isPersonal,orgId:i.orgId})))s(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===l&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[i,...e.data.assets]}}:(i.batchId=l,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),i,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===l&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[i,...t.data.assets]}},...e.pages.slice(1)]}:(i.batchId=l,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),i,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleOrganizationAppImageAssetUpdateEvent:n=>{let r=(0,Q.v)((0,U.L)((0,G.b)(U.oD,n)));if(!r.isPersonal||(null==a?void 0:a.id)===r.userId)for(let a of(t({generation:r}),(0,H.I)({parentId:r.parentId,isPersonal:r.isPersonal,orgId:r.orgId})))s(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===r.uuid),a=e.data.assets[t];return a?(r.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),r,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[r,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===r.uuid),s=t.data.assets[a];return s?(r.batchId=s.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),r,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[r,...t.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationAppImageAssetDeleteEvent:t=>{let n=(0,U.L)((0,G.b)(U.oD,t));if(!n.isPersonal||(null==a?void 0:a.id)===n.userId)for(let t of(0,H.I)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))s(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})}}})(),{handleOrganizationAppVideoAssetCreateEvent:u,handleOrganizationAppVideoAssetUpdateEvent:m,handleOrganizationAppVideoAssetDeleteEvent:p}=(()=>{let e=(0,$.jE)(),{addToSlugsToLatestGenerationMap:t}=(0,J.p)(),{user:a}=(0,E.u)(),s=t=>!!e.getQueryData(t);return{handleOrganizationAppVideoAssetCreateEvent:n=>{var r;let i=(0,Y.x)((0,U.L)((0,G.b)(U.oD,n)));if(i.isPersonal&&(null==a?void 0:a.id)!==i.userId)return;let l=null!=(r=i.settings.metadata.placeholderUuid)?r:i.batchId;for(let a of(t({generation:i}),(0,W.I)({parentId:i.parentId,isPersonal:i.isPersonal,orgId:i.orgId})))s(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===l&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[i,...e.data.assets]}}:(i.batchId=l,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),i,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===l&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[i,...t.data.assets]}},...e.pages.slice(1)]}:(i.batchId=l,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),i,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleOrganizationAppVideoAssetUpdateEvent:n=>{let r=(0,Y.x)((0,U.L)((0,G.b)(U.oD,n)));if(!r.isPersonal||(null==a?void 0:a.id)===r.userId)for(let a of(t({generation:r}),(0,W.I)({parentId:r.parentId,isPersonal:r.isPersonal,orgId:r.orgId})))s(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===r.uuid),a=e.data.assets[t];return a?(r.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),r,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[r,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===r.uuid),s=t.data.assets[a];return s?(r.batchId=s.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),r,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[r,...t.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationAppVideoAssetDeleteEvent:t=>{let n=(0,U.L)((0,G.b)(U.oD,t));if(!n.isPersonal||(null==a?void 0:a.id)===n.userId)for(let t of(0,W.I)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))s(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})}}})();return{handleOrganizationObjectEvents:x=>{switch(x.data.type){case K.OBJECT_CREATED:{let t=x.data.data.object;if(t.ref_service&&(0,G.b)(V.jc,t.ref_service)===V.z1.IMAGINE_FLOWS)return;switch(t.service){case V.z1.IMAGE:e(t);break;case V.z1.VIDEO:n(t);break;case V.z1.APP_IMAGE:o(t);break;case V.z1.APP_VIDEO:u(t)}break}case K.OBJECT_STATUS:{let e=x.data.data.object,a=(0,G.b)(V.jc,e.service);if(e.ref_service&&(0,G.b)(V.jc,e.ref_service)===V.z1.IMAGINE_FLOWS)return;switch(a){case V.z1.IMAGE:t(e);break;case V.z1.VIDEO:r(e);break;case V.z1.APP_IMAGE:d(e);break;case V.z1.APP_VIDEO:m(e)}break}case K.OBJECT_DELETED:{let e=x.data.data.object,t=(0,G.b)(V.jc,e.service);if(e.ref_service&&(0,G.b)(V.jc,e.ref_service)===V.z1.IMAGINE_FLOWS)return;switch(t){case V.z1.IMAGE:a(e);break;case V.z1.VIDEO:i(e);break;case V.z1.APP_IMAGE:c(e);break;case V.z1.APP_VIDEO:p(e)}break}case K.OBJECT_MOVED:{let e=x.data.data.object;switch((0,G.b)(V.jc,e.service)){case V.z1.IMAGE:s(e);break;case V.z1.VIDEO:l(e)}}}}}})(),{handleOrganizationCreditConsumedEvent:i,handleOrganizationCreditRevertedEvent:l}=(()=>{let e=(0,$.jE)();return{handleOrganizationCreditConsumedEvent:t=>{e.invalidateQueries({queryKey:(0,w.Hl)({orgId:t})})},handleOrganizationCreditRevertedEvent:t=>{e.invalidateQueries({queryKey:(0,w.Hl)({orgId:t})})}}})(),{handleOrganizationUpdateEvent:o,handleOrganizationDeleteEvent:d}=(()=>{let e=(0,$.jE)();return{handleOrganizationUpdateEvent:t=>{e.invalidateQueries({queryKey:(0,M.f)()}),e.invalidateQueries({queryKey:(0,R.G)({orgId:t})})},handleOrganizationDeleteEvent:()=>{e.invalidateQueries({queryKey:(0,M.f)()})}}})(),{handleOrganizationUserCreateEvent:c,handleOrganizationUserUpdateEvent:u,handleOrganizationUserDeleteEvent:m}=(()=>{let e=(0,$.jE)();return{handleOrganizationUserCreateEvent:t=>{e.invalidateQueries({queryKey:(0,ea.o)(t)})},handleOrganizationUserUpdateEvent:t=>{e.invalidateQueries({queryKey:(0,ea.o)(t)})},handleOrganizationUserDeleteEvent:t=>{e.invalidateQueries({queryKey:(0,ea.o)(t)}),e.invalidateQueries({queryKey:(0,M.f)()})}}})(),{handleOrganizationUserInvitationAcceptedEvent:p,handleOrganizationUserInvitationDeletedEvent:x,handleOrganizationUserInvitationSentEvent:f}=(()=>{let e=(0,$.jE)();return{handleOrganizationUserInvitationAcceptedEvent:t=>{e.invalidateQueries({queryKey:(0,es.v)({orgId:t})})},handleOrganizationUserInvitationDeletedEvent:t=>{e.invalidateQueries({queryKey:(0,es.v)({orgId:t})})},handleOrganizationUserInvitationSentEvent:t=>{e.invalidateQueries({queryKey:(0,es.v)({orgId:t})})}}})(),{handleOrganizationUserJoinRequestAcceptedEvent:b,handleOrganizationUserJoinRequestCancelledEvent:h,handleOrganizationUserJoinRequestPendingEvent:v,handleOrganizationUserJoinRequestRejectedEvent:_}=(()=>{let e=(0,$.jE)();return{handleOrganizationUserJoinRequestAcceptedEvent:t=>{e.invalidateQueries({queryKey:(0,en.g)({orgId:t})}),e.invalidateQueries({queryKey:(0,er.g)()})},handleOrganizationUserJoinRequestCancelledEvent:t=>{e.invalidateQueries({queryKey:(0,en.g)({orgId:t})}),e.invalidateQueries({queryKey:(0,er.g)()})},handleOrganizationUserJoinRequestPendingEvent:t=>{e.invalidateQueries({queryKey:(0,en.g)({orgId:t})}),e.invalidateQueries({queryKey:(0,er.g)()})},handleOrganizationUserJoinRequestRejectedEvent:t=>{e.invalidateQueries({queryKey:(0,en.g)({orgId:t})}),e.invalidateQueries({queryKey:(0,er.g)()})}}})();return{handleOrganizationSocketPublication:g=>{var y,E,I,N,j,A,O,S,k,T,C;switch(g.data.type){case K.FOLDER_DELETED:e(g.data.data.folder);break;case K.FOLDER_CREATED:t(g.data.data.folder);break;case K.FOLDER_UPDATED:a(g.data.data.folder);break;case K.FOLDER_PINNED:s(g.data.data.folder);break;case K.FOLDER_UNPINNED:n(g.data.data.folder);break;case K.OBJECT_CREATED:case K.OBJECT_DELETED:case K.OBJECT_STATUS:case K.OBJECT_MOVED:r(g);break;case K.CREDIT_CONSUMED:i(g.data.entity.org_id);break;case K.CREDIT_REVERTED:l(g.data.entity.org_id);break;case K.ORG_UPDATED:o(g.data.data.org.id);break;case K.ORG_DELETED:d();break;case K.ORG_USER_ADDED:c(null==(y=g.data.data.org_user)?void 0:y.org_id);break;case K.ORG_USER_UPDATED:u(null==(E=g.data.data.org_user)?void 0:E.org_id);break;case K.ORG_USER_REMOVED:m(null==(I=g.data.data.org_user)?void 0:I.org_id);break;case K.ORG_USER_INVITATION_ACCEPTED:p(null==(N=g.data.data.org_invitation)?void 0:N.org_id);break;case K.ORG_USER_INVITATION_DELETED:x(null==(j=g.data.data.org_invitation)?void 0:j.org_id);break;case K.ORG_USER_INVITATION_SENT:f(null==(O=g.data.data.org_invitations)||null==(A=O[0])?void 0:A.org_id);break;case K.ORG_USER_JOIN_REQUEST_ACCEPTED:b(null==(S=g.data.data.org_join_request)?void 0:S.org_id);break;case K.ORG_USER_JOIN_REQUEST_CANCELLED:h(null==(k=g.data.data.org_join_request)?void 0:k.org_id);break;case K.ORG_USER_JOIN_REQUEST_PENDING:v(null==(T=g.data.data.org_join_request)?void 0:T.org_id);break;case K.ORG_USER_JOIN_REQUEST_REJECTED:_(null==(C=g.data.data.org_join_request)?void 0:C.org_id)}}}})(),{socket:a}=(0,P.c)(),{user:s}=(0,E.u)();(0,eS.g)({centrifuge:a,channel:(null==s?void 0:s.id)?"user:".concat(s.id):null,handleSocketPublication:e});let{selectedOrganizationId:n}=(0,D.v)();return(0,eS.g)({centrifuge:a,channel:n?"org:".concat(n):null,handleSocketPublication:t})})(),null);var eT=a(34267);let eC=()=>{let{selectedOrganizationId:e,isLoading:t,isError:a}=(0,D.v)(),s=(0,$.jE)();return(0,i.useEffect)(()=>{if(!t&&!a)return()=>{s.invalidateQueries({queryKey:[eT.c.ORGS_BASE_TAG]})}},[s,t,a,e]),null};var eP=a(62384);let eD=()=>{let{user:e}=(0,E.u)();return(0,i.useEffect)(()=>{if(!e)return;let t=new URLSearchParams(window.location.search);t.delete(eP.u.SHOW_AUTH),t.delete(p._.TOKEN),window.history.replaceState({},"","".concat(window.location.pathname).concat(t.size?"?".concat(t):""))},[e]),null};var e$=a(9820);let ew=()=>((0,i.useEffect)(()=>{let e=new URL(window.location.href),t=e.searchParams;e$.v.forEach(e=>{t.delete(e)});let a=e.toString();window.history.replaceState({},"",a)},[]),null);var eR=a(62942),eM=a(71930),eL=a(3418),eU=a(178),eG=a(4187);a(29953);var ez=a(18010),eF=a(22282);let eB={LOGGED_IN:"logged_in",LOGGED_OUT:"logged_out"};var eq=a(22360),eV=a(74729),eK=a(96450),eQ=a(54388),eH=a(99588);let eJ="hasFiredSessionStarted",eY=()=>{let e=(0,eR.useSearchParams)(),{user:t}=(0,E.u)(),{aggregator:a}=(0,eH.p)(),{computeUserAnalyticsInfo:s}=(0,eQ.U)(),{page:n}=(0,eV.lN)(),{data:l,isLoading:o}=(0,w.kd)(),d=(0,eK.Q)(t),c=null==l?void 0:l.total,u=!!t;return(0,i.useEffect)(()=>{var e,t,s,r,i;let l=null!=(e=(0,m.getCookie)(e$.a.CAMPAIGN))?e:eF.Q,o=null!=(t=(0,m.getCookie)(e$.a.TERM))?t:eF.Q,c=null!=(s=(0,m.getCookie)(e$.a.SOURCE))?s:eF.Q,u=null!=(r=(0,m.getCookie)(e$.a.MEDIUM))?r:eF.Q;!localStorage.getItem(eJ)&&n&&(a.log(ez.M.sessionStarted.withProperties({page_name:n,utm_campaign:l,utm_medium:u,utm_source:c,utm_term:o,state:(null==(i=d.current)?void 0:i.id)?eB.LOGGED_IN:eB.LOGGED_OUT})),localStorage.setItem(eJ,eL.J.TRUE))},[a,s,n,d]),(0,i.useEffect)(()=>{(0,m.getCookie)(eU.e.FIRST_PAGE_VIEW)||n===eF.Q||(0,m.setCookie)(eU.e.FIRST_PAGE_VIEW,n,{domain:r.h.NEXT_PUBLIC_APP_DOMAIN})},[n]),(0,i.useEffect)(()=>{if(u&&o&&n){var r,i,l,d,x,f,b,h;let o,{userStatus:u,userPlan:v,userPlanPeriod:_}=s(),g=(0,m.getCookie)(eU.e.AFFILIATE_ID),y=(0,m.getCookie)(eU.e.LANDING_SOURCE),E=null!=(r=(0,m.getCookie)(e$.a.CAMPAIGN))?r:eF.Q,I=null!=(i=(0,m.getCookie)(e$.a.TERM))?i:eF.Q,N=null!=(l=(0,m.getCookie)(e$.a.SOURCE))?l:eF.Q,j=null!=(d=(0,m.getCookie)(e$.a.MEDIUM))?d:eF.Q,A=null!=(x=(0,m.getCookie)(eU.e.SIGN_UP_CTA))?x:eF.Q,O=null!=(f=(0,m.getCookie)(eU.e.FIRST_PAGE_VIEW))?f:eF.Q,S=(o=t.id,"shouldFireSignupEvent-".concat(o)),k=(0,m.getCookie)(S),T=e.get(p._.IS_SIGNUP),C=e.get(eP.u.REFERRAL),P=null==t?void 0:t.name.split(" ")[0],D=localStorage.getItem(eq.C.AUTH_TOOL),$=localStorage.getItem(eq.C.AUTH_SOURCE);if(T===eL.J.TRUE&&k){a.log(ez.M.signupCompleted.withProperties({signup_channel:null!=$?$:eF.Q,name:null==t?void 0:t.name,email:null!=(b=null==t?void 0:t.email)?b:void 0,distinct_id:null==t?void 0:t.id,tokens_remaining:c,marketing_consent:!0,utm_campaign:E,utm_term:I,utm_medium:j,utm_source:N,signup_cta:A,page_name:n,affiliate_id:y!==eG.$.UTM?g:"",first_page_view:O,user_account_status:u,user_plan:v,user_plan_period:_,first_name:P,landing_source:y,is_referred:null!=C?C:eL.J.FALSE,app_name:eM.C.IMAGINE_ONE,tool_name:null!=D?D:"",studio_name:eM.C.IMAGINE_ONE})),(0,m.deleteCookie)(S),(0,m.deleteCookie)(eU.e.SIGN_UP_CTA);let s=new URLSearchParams(e);s.delete(p._.IS_SIGNUP),window.history.replaceState({},"","".concat(window.location.pathname).concat(s.size?"?".concat(s):""))}else T===eL.J.FALSE&&a.log(ez.M.loginCompleted.withProperties({email:null!=(h=null==t?void 0:t.email)?h:void 0,distinct_id:null==t?void 0:t.id,page_name:n,user_account_status:u,user_plan:v,user_plan_period:_,signup_channel:"Web",name:null==t?void 0:t.name,first_name:P,app_name:eM.C.IMAGINE_ONE,tool_name:null!=D?D:"",studio_name:eM.C.IMAGINE_ONE}));localStorage.removeItem(eq.C.AUTH_TOOL),localStorage.removeItem(eq.C.AUTH_SOURCE)}},[c,t,a,e,n,u,o,s]),null};var eW=a(33400),eX=a(16811),eZ=a(87146),e0=a(53163);let e1=e=>{let{flagName:t,eventName:a,eventHandler:s}=e,{data:n}=(0,eZ.en)(t);return(0,i.useEffect)(()=>{if(n&&!n.status)return(0,e0.ge)(a,s),()=>(0,e0.i7)(a,s)},[a,s,n]),null};var e3=a(3397),e2=a(34596),e5=a(39381),e4=a(54828);let e6=()=>{let e=(()=>{let{wasWidgetPreviouslyOpened:e}=(0,e2.n)(),{userbackRef:t,initializeGlobalSurvey:a}=(0,e5.b)(),{mutate:s}=(0,eZ.Jl)(),n=(0,$.jE)(),{imageEditGeneral:r}=(0,e3.bO)().userbackSurveysConfig,l=(0,i.useCallback)(i=>{var o,d,c;let{detail:u}=i,m=parseInt(null!=(o=localStorage.getItem(eq.C.GENERAL_NUM_IMAGE_EDITS))?o:"0")+(null!=(d=null==u?void 0:u.numberOfImagesEdited)?d:0);if(m<r.threshold)return localStorage.setItem(eq.C.GENERAL_NUM_IMAGE_EDITS,m.toString());e?a(void 0,{onSuccess:()=>{var e;return null==(e=t.current)?void 0:e.openSurvey(r.surveyId)}}):null==(c=t.current)||c.openSurvey(r.surveyId),s({flag:eW.sF.HAS_SEEN_GENERAL_IMAGE_EDIT_SURVEY_FORM,status:!0},{onSuccess:()=>{n.invalidateQueries({queryKey:[eW.sF.HAS_SEEN_GENERAL_IMAGE_EDIT_SURVEY_FORM]}),localStorage.removeItem(eq.C.GENERAL_NUM_IMAGE_EDITS),(0,e0.i7)(eX.y.IMAGE_EDITED_EVENT,l)}})},[r,t,a,e,s,n]);return l})(),t=(()=>{let{wasWidgetPreviouslyOpened:e}=(0,e2.n)(),{userbackRef:t,initializeGlobalSurvey:a}=(0,e5.b)(),s=(0,$.jE)(),{mutate:n}=(0,eZ.Jl)(),{imageGenerationGeneral:r}=(0,e3.bO)().userbackSurveysConfig,l=(0,i.useCallback)(i=>{var o,d,c;let{detail:u}=i,m=parseInt(null!=(o=localStorage.getItem(eq.C.GENERAL_NUM_IMAGE_GENERATIONS))?o:"0")+(null!=(d=null==u?void 0:u.numberOfImagesGenerated)?d:0);if(m<r.threshold)return localStorage.setItem(eq.C.GENERAL_NUM_IMAGE_GENERATIONS,m.toString());e?a(void 0,{onSuccess:()=>{var e;return null==(e=t.current)?void 0:e.openSurvey(r.surveyId)}}):null==(c=t.current)||c.openSurvey(r.surveyId),n({flag:eW.sF.HAS_SEEN_GENERAL_IMAGE_GENERATION_SURVEY_FORM,status:!0},{onSuccess:()=>{s.invalidateQueries({queryKey:[eW.sF.HAS_SEEN_GENERAL_IMAGE_GENERATION_SURVEY_FORM]}),localStorage.removeItem(eq.C.GENERAL_NUM_IMAGE_GENERATIONS),(0,e0.i7)(eX.y.IMAGE_GENERATED_EVENT,l)}})},[r,t,a,e,n,s]);return l})(),a=(()=>{let e=(0,$.jE)(),{nps:t}=(0,e3.bO)().userbackSurveysConfig,{wasWidgetPreviouslyOpened:a}=(0,e2.n)(),{userbackRef:s,initializeGlobalSurvey:n}=(0,e5.b)(),{mutate:r}=(0,eZ.Jl)(),l=(0,i.useCallback)(i=>{if(a)n(void 0,{onSuccess:()=>{var e;return null==(e=s.current)?void 0:e.openSurvey(t.surveyId)}});else{var l;null==(l=s.current)||l.openSurvey(t.surveyId)}r({flag:eW.sF.HAS_SEEN_NPS_SURVEY_FORM,status:!0}),e.invalidateQueries({queryKey:[e4.y.SINGLE_FLAG]}),localStorage.removeItem(eq.C.NUM_IMAGE_GENERATIONS_LAST_7_DAYS),localStorage.removeItem(eq.C.SEVEN_DAY_DEADLINE_IMG_GENERATIONS),i()},[r,e,t,s,a,n]),o=(0,i.useCallback)(e=>{var a,s;let{detail:n}=e,r=null!=(a=null==n?void 0:n.numberOfImagesGenerated)?a:0,i=Number.parseInt(null!=(s=localStorage.getItem(eq.C.NUM_IMAGE_GENERATIONS_LAST_7_DAYS))?s:"0"),d=localStorage.getItem(eq.C.SEVEN_DAY_DEADLINE_IMG_GENERATIONS),c=new Date(null!=d?d:Date.now())<new Date;if(!d||c){let e=new Date(Date.now()+24*t.numberOfDays*36e5);localStorage.setItem(eq.C.SEVEN_DAY_DEADLINE_IMG_GENERATIONS,e.toISOString())}let u=c?r:i+r;localStorage.setItem(eq.C.NUM_IMAGE_GENERATIONS_LAST_7_DAYS,u.toString()),u>=t.threshold&&l(()=>(0,e0.i7)(eX.y.IMAGE_GENERATED_EVENT,o))},[l,t]);return o})();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e1,{flagName:eW.sF.HAS_SEEN_NPS_SURVEY_FORM,eventName:eX.y.IMAGE_GENERATED_EVENT,eventHandler:a}),(0,s.jsx)(e1,{flagName:eW.sF.HAS_SEEN_GENERAL_IMAGE_GENERATION_SURVEY_FORM,eventName:eX.y.IMAGE_GENERATED_EVENT,eventHandler:t}),(0,s.jsx)(e1,{flagName:eW.sF.HAS_SEEN_GENERAL_IMAGE_EDIT_SURVEY_FORM,eventName:eX.y.IMAGE_EDITED_EVENT,eventHandler:e})]})},e7=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.G_,{clientId:r.h.NEXT_PUBLIC_GOOGLE_CLIENT_ID,children:(0,s.jsx)(A,{})}),(0,s.jsx)(y,{}),(0,s.jsx)(ew,{}),(0,s.jsx)(eD,{}),(0,s.jsx)(c,{}),(0,s.jsx)(eY,{}),(0,s.jsx)(ek,{}),(0,s.jsx)(eC,{}),(0,s.jsx)(e6,{}),(0,s.jsx)(C,{}),(0,s.jsx)(l,{})]})},84735:(e,t,a)=>{"use strict";a.d(t,{Y:()=>d,Z:()=>o});var s=a(67933),n=a(27338),r=a(60095),i=a(34267),l=a(29551);let o=e=>{let{orgId:t}=e;return[i.c.ORGS_BASE_TAG,i.c.PINNED_ORGANIZATION_ASSETS,null!=t?t:""]},d=function(){let{enabled:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orgId:void 0},{user:a}=(0,r.u)();return(0,s.I)({queryKey:o({orgId:t.orgId}),staleTime:n.I5,queryFn:()=>l.o.getPinnedOrganizationFolderAssets(t),enabled:!!a&&(null==e||e)})}},86309:(e,t,a)=>{"use strict";a.d(t,{g:()=>i});var s=a(7620),n=a(60095),r=a(96450);let i=e=>{let{centrifuge:t,channel:a,handleSocketPublication:i}=e,{user:l}=(0,n.u)(),o=!!t,d=(0,r.Q)(i);return(0,s.useEffect)(()=>{if(null==t||!o||!l||!a)return;let e=null;return(()=>{let s=t.getSubscription(a),n=null!=s?s:t.newSubscription(a);n.on("publication",e=>{try{console.log("publication",e),d.current(e)}catch(e){console.error("Error handling socket publication",e)}}).on("subscribing",e=>console.log("subscribing",e)).on("subscribed",e=>{console.log("subscribed",e)}).on("unsubscribed",e=>console.log("unsubscribed",e)).on("join",e=>console.log("join",e)).on("leave",e=>console.log("leave",e)).subscribe(),e=n})(),()=>{e&&t.removeSubscription(e)}},[o,t,a,l,d]),null}},86374:(e,t,a)=>{"use strict";a.d(t,{c:()=>u});var s=a(7620),n=a(60095),r=a(35044),i=a(17685),l=a(53605),o=a(3397),d=a(39160);let c=e=>e.trim().toLowerCase(),u=()=>{var e;let{user:t}=(0,n.u)(),{currentStatus:a,isSubscriptionActive:u,isPendingDowngrade:m,isPendingUpgrade:p,subscribedPriceItem:x,billingInterval:f,isStripeFailed:b,isStripeCanceled:h}=(0,l.c)(),{data:v}=(0,i.kd)(),_=(()=>{let{data:e}=(0,d.J)(),{questionnaireSteps:t}=(0,o.bO)().onboardingSurveyModal;return(0,s.useMemo)(()=>{let a={};return t.forEach(t=>{var s;let n=null==e||null==(s=e.persona)?void 0:s.find(e=>c(e.question)===c(t.heading));(null==n?void 0:n.answer)&&(a[t.category]=n.answer)}),a},[t,null==e?void 0:e.persona])})();return(0,s.useMemo)(()=>{var e,s;return t&&v?{name:t.name,email:t.email,currentStatus:null!=a?a:"Free",...f&&{billingInterval:f},tokens:v.total,isStripeFailed:b.valueOf().toString(),isStripeCanceled:h.valueOf().toString(),isPendingUpgrade:p.valueOf().toString(),isPendingDowngrade:m.valueOf().toString(),isSubscriptionActive:u.valueOf().toString(),productName:(null==x||null==(e=x.StripeProduct)?void 0:e.name)?null==x||null==(s=x.StripeProduct)?void 0:s.name:r.M4.FREE,..._}:null},[t,a,v,f,m,p,h,b,u,null==x||null==(e=x.StripeProduct)?void 0:e.name,_])}},87146:(e,t,a)=>{"use strict";a.d(t,{Jl:()=>d,en:()=>o});var s=a(67933),n=a(16258),r=a(60095),i=a(36348),l=a(54828);let o=e=>{let{user:t}=(0,r.u)();return(0,s.I)({queryKey:[l.y.SINGLE_FLAG,e],enabled:!!(null==t?void 0:t.id),queryFn:async()=>(await i.M.getSingleUserFlag({name:e})).data})},d=()=>(0,n.n)({mutationFn:async e=>{let{flag:t,status:a}=e;return(await i.M.updateUserFlag({payload:{name:t,status:a}})).data}})},88512:(e,t,a)=>{"use strict";a.d(t,{SupportWidgetItem:()=>v});var s=a(54568),n=a(12522),r=a(60095),i=a(8139),l=a(62942),o=a(7620),d=a(81491),c=a(20844),u=a(78848);let m=e=>{let{hideWidget:t,alignment:a,user:n,userIdHash:r=""}=e,m=(e=>{let t=(0,l.usePathname)(),a=(0,u.d)(),s=t===c.ze.GET_HELP&&a;return(0,o.useEffect)(()=>{let t=document.getElementById(d.G.CHATBASE_BUBBLE_BUTTON),a=document.getElementById(d.G.CHATBASE_BUBBLE_WINDOW);return t&&a&&(e?(t.style.display="none",a.style.display="none"):s?(t.style.display="none",t.click(),a.style.display="block",a.style.bottom="2rem"):t.style.display="block"),()=>{var e;let t=document.getElementById(d.G.CHATBASE_BUBBLE_BUTTON),a=document.getElementById(d.G.CHATBASE_BUBBLE_WINDOW);(null==t?void 0:t.style)&&(t.style.display="none"),(null==a?void 0:a.style)&&(a.style.display="none"),(null==(e=window)?void 0:e.chatbase)&&window.chatbase.close()}},[e,s]),s})(t);return(0,s.jsxs)(s.Fragment,{children:[n&&r&&(0,s.jsx)(i.default,{async:!0,type:"text/javascript",id:"chatbase-script-identify",strategy:"afterInteractive",children:"\n        window.chatbaseUserConfig = {\n            user_id: '".concat(n.id,"', // this is the user_id, should be unique for each user\n            user_hash: '").concat(r,"', // this is the hash of the user_id, should be generated on the server\n            user_metadata: {\n                \"name\": '").concat(n.name,"',\n                \"email\": '").concat(n.email,"',\n            }\n          }")}),(0,s.jsx)(i.default,{async:!0,type:"text/javascript",id:"chatbase-script",strategy:"afterInteractive",onReady:()=>(e=>{let{alignment:t,hideWidget:a,embeddedMode:s=!1}=e;new MutationObserver((e,n)=>{let r=document.getElementById(d.G.CHATBASE_BUBBLE_BUTTON),i=document.getElementById(d.G.CHATBASE_BUBBLE_WINDOW);r&&i&&("left"===t?(r.style.left="1rem",r.style.right="auto",a&&(r.style.display="none"),i.style.left="1rem",i.style.right="auto"):(r.style.right="1rem",r.style.left="auto",a?r.style.display="none":s&&(r.style.display="none",r.click(),i.style.display="block",i.style.bottom="2rem"),i.style.right="1rem",i.style.left="auto"),n.disconnect())}).observe(document.body,{childList:!0,subtree:!0})})({alignment:a,hideWidget:t,embeddedMode:m}),children:'(function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="djryHL-DnkZYAVNWmywGB";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();'})]})};var p=a(53881),x=a(62384),f=a(3397),b=a(53605);let h={requirePremium:!1,alignment:"right",userIdHash:""},v=e=>{let{requirePremium:t=h.requirePremium,alignment:a=h.alignment,userIdHash:i=h.userIdHash}=e,{hideWidget:d}=(e=>{var t;let a=(0,l.usePathname)(),s=(0,l.useSearchParams)(),n=s.get(x.u.SHOW_AUTH),r=null!=(t=s.get(p._.TOKEN))?t:"",{isSubscriptionActive:i}=(0,b.c)(),{chatBasePathConfig:d}=(0,f.bO)(),c=(0,o.useCallback)(()=>!!(null==d?void 0:d.length)&&d.some(e=>e.shouldMatchExact?a===e.path:null==a?void 0:a.startsWith(e.path)),[d,a]),u=!1;return"true"===n&&0===r.length?u=!0:e&&(u=!i),c()||(u=!0),{hideWidget:u}})(t),{user:c}=(0,r.u)();return(0,s.jsx)(n.tH,{fallback:(0,s.jsx)("div",{children:"Chatbase Error"}),children:(0,s.jsx)(m,{hideWidget:d,alignment:a,userIdHash:i,user:c})})}},88766:()=>{},89536:(e,t,a)=>{"use strict";a.d(t,{JX:()=>n,Kb:()=>r,OZ:()=>i});var s=a(615);let n=(0,s.F)("group flex w-full items-center justify-between text-left outline-none ring-0 disabled:text-content-primary-disabled ring-inset transition-all duration-500 data-[state=open]:ring-1 data-[state=open]:ring-border-inverse focus:outline-none disabled:cursor-not-allowed",{variants:{variant:{primary:"bg-fill-primary placeholder-content-secondary hover:bg-fill-primary-hover text-content-primary  disabled:bg-fill-primary-disabled",secondary:"bg-fill-secondary placeholder-content-secondary text-content-primary hover:bg-fill-secondary-hover data-[state=open]:bg-fill-secondary-hover disabled:bg-fill-secondary-disabled","secondary-variant":"bg-fill-secondary-variant placeholder-content-secondary text-content-primary hover:bg-fill-secondary-variant-hover disabled:bg-fill-secondary-variant-disabled"},size:{sm:"h-7 gap-1 px-2 py-1 rounded-2.5 text-label-sm [&_svg]:size-3.5",md:"h-8 gap-1.5 px-2.5 py-1.5 rounded-2.5 text-label-md [&_svg]:size-4",lg:"h-10 gap-2 py-2.5 px-3 rounded-3 text-label-lg [&_svg]:size-4.5",xl:"h-12 gap-2 p-3 rounded-3.5 text-label-xl [&_svg]:size-5"}},defaultVariants:{size:"md",variant:"primary"}}),r=(0,s.F)("z-50 p-2 rounded-4 border text-content-primary shadow-[0px_4px_8px_0px_rgba(176,175,175,0.20)] dark:shadow-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",{variants:{variant:{primary:"bg-surface-primary-variant border-border-primary",secondary:"border-border-elevated bg-surface-elevated"},size:{xs:"text-label-md [&_svg]:size-3.5",sm:"text-label-md [&_svg]:size-4",md:"text-label-lg [&_svg]:size-4.5",lg:"text-label-xl [&_svg]:size-5"}},defaultVariants:{size:"md",variant:"primary"}}),i=(0,s.F)("bg-transparent p-2.5 text-content-primary hover:outline-none relative flex items-center gap-2 **:[span]:flex **:[span]:items-center **:[span]:gap-2 cursor-pointer select-none focus:outline-none",{variants:{variant:{primary:"hover:bg-fill-primary-variant-hover active:bg-fill-primary-variant-hover disabled:text-content-primary-disabled disabled:bg-fill-primary-variant-disabled focus:bg-fill-primary-variant-hover focus:outline-none inert:bg-fill-primary-variant-disabled inert:pointer-events-none inert:text-content-primary-disabled data-[state=active]:bg-fill-primary-variant-hover",secondary:"hover:bg-fill-elevated-hover active:bg-fill-elevated-hover disabled:bg-fill-elevated-disabled disabled:text-content-primary-disabled focus:bg-fill-elevated-hover focus:outline-none inert:bg-fill-elevated-disabled inert:pointer-events-none inert:text-content-primary-disabled data-[state=active]:bg-fill-elevated-hover"},size:{xs:"text-label-md rounded-2 py-1 px-2.5 **:[svg]:size-3.5",sm:"text-label-md rounded-2 py-1.5 px-2.5 **:[svg]:size-4",md:"text-label-lg rounded-2.5 p-2.5 **:[svg]:size-4.5",lg:"text-label-xl rounded-2.5 py-3 px-2.5 **:[svg]:size-5"}},defaultVariants:{size:"md",variant:"primary"}})},89829:(e,t,a)=>{"use strict";a.d(t,{_n:()=>m,hq:()=>u,mW:()=>p});var s=a(51874),n=a(53881),r=a(62384),i=a(16258),l=a(20844),o=a(19533),d=a(58910);let c=(e=>{let t=e.extractErrorMessage||(e=>e instanceof Error?e.message:"An unknown error occurred");return function(a){return(0,i.n)({mutationFn:t=>{let{payload:s,param:n}=t;return a({payload:s,param:null!=n?n:{redirect:e.appUrl}})},onSuccess:async t=>{var a,s,n;let{data:{redirect:r}}=t,i=new URL(r).searchParams;if(!i.get(e.searchParamsKeys.token))throw Error("No auth token received from server");let l=new URLSearchParams(i),o=new URL(window.location.href),d=new URL(e.authRoutes.has(o.pathname)?null!=(a=o.searchParams.get(e.searchParamsKeys.redirect))?a:e.defaultRoute:null!=(n=null!=(s=o.searchParams.get(e.searchParamsKeys.redirect))?s:o.pathname)?n:e.defaultRoute,window.location.origin);new URLSearchParams(window.location.search).forEach((e,t)=>d.searchParams.set(t,e)),l.forEach((e,t)=>d.searchParams.set(t,e)),d.searchParams.delete(e.searchParamsKeys.redirect),window.location.href=d.href},onError:a=>{var s,n;let r=t(a);null==(n=e.toast)||null==(s=n.error)||s.call(n,r)}})}})({appUrl:o.h.NEXT_PUBLIC_APP_URL,authRoutes:l.f3,defaultRoute:l.ze.HOME,searchParamsKeys:{token:n._.TOKEN,redirect:r.u.REDIRECT},toast:s.oR}),u=()=>c(d.y.googleAuth.bind(d.y)),m=()=>c(d.y.facebookAuth.bind(d.y)),p=()=>c(d.y.googleOneTapAuth.bind(d.y))},91426:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var s=a(5012);let n=e=>{let{parentId:t,isPersonal:a,orgId:n}=e;return void 0===t?[(0,s.iT)({parentId:t,isPersonal:a,orgId:n})]:[(0,s.iT)({parentId:t,isPersonal:a,orgId:n}),(0,s.iT)({parentId:void 0,isPersonal:a,orgId:n})]}},92414:(e,t,a)=>{"use strict";let s;a.d(t,{RootLayoutProviders:()=>D});var n=a(54568),r=a(78162),i=a(19779),l=a(60095),o=a(74729),d=a(73352),c=a(3397),u=a(788),m=a(94967);let p=()=>((0,m.H)(),null);var x=a(7620),f=a(2781),b=a(99588),h=a(97788),v=a(77773),_=a.n(v),g=a(19533),y=a(17307);let E={gtmId:g.h.NEXT_PUBLIC_GTM_ID};class I extends y.y{log(e){let{properties:t}=e;this.manager.dataLayer({dataLayer:{event:"gtm.click","gtm.elementId":e.name,...t}})}constructor(){super(),this.manager=_(),this.manager.initialize(E)}}let N=e=>{let{children:t}=e,[a,s]=(0,x.useState)(()=>({aggregator:new h.u([]),isAggregatorReady:!1}));return(0,f.S)(()=>{let e=new I;s({aggregator:new h.u([e]),isAggregatorReady:!0})}),(0,n.jsx)(b.B,{...a,children:t})};var j=a(31354),A=a(7703),O=a(87606),S=a(82099);let k=()=>new j.E({defaultOptions:{queries:{staleTime:6e4}}}),T=e=>{let{children:t}=e,a=A.S$?k():(s||(s=k()),s);return(0,n.jsxs)(O.Ht,{client:a,children:[t,!g.h.NEXT_PUBLIC_IS_PROD&&(0,n.jsx)(S.E,{initialIsOpen:!1})]})};var C=a(14619),P=a(39381);let D=e=>{let{children:t,oneRemoteConfigValues:a,userContext:s}=e;return(0,n.jsx)(N,{children:(0,n.jsx)(i.N,{children:(0,n.jsx)(c.fV,{initialState:a,children:(0,n.jsx)(d.lx,{children:(0,n.jsx)(l.v,{value:s,children:(0,n.jsxs)(T,{children:[(0,n.jsx)(C.ThemeProvider,{children:(0,n.jsx)(o.os,{children:(0,n.jsx)(u.F,{children:(0,n.jsx)(r.V,{height:"2px",color:"rgb(var(--fill-brand))",options:{showSpinner:!1},shallowRouting:!0,children:(0,n.jsx)(P.O,{children:t})})})})}),(0,n.jsx)(p,{})]})})})})})})}},94967:(e,t,a)=>{"use strict";a.d(t,{H:()=>d,q:()=>c});var s=a(67933),n=a(87606),r=a(7620),i=a(60095),l=a(90416),o=a(33618);let d=()=>{let{user:e}=(0,i.u)();return(0,s.I)({queryKey:[l.n.GET_MY_PROFILE],queryFn:()=>o.D.getMyProfile(),enabled:!!e})},c=()=>{let e=(0,n.jE)();return(0,r.useCallback)(()=>e.invalidateQueries({queryKey:[l.n.GET_MY_PROFILE]}),[e])}},97706:(e,t,a)=>{"use strict";a.d(t,{I5:()=>x,N5:()=>v,Nz:()=>m,R6:()=>_,_C:()=>p});var s=a(25826),n=a(52303),r=a(55437),i=a(12995),l=a(65762),o=a(59051),d=a(76376),c=a(32162),u=a(31625);let m=s.Ay$.enum([r.j.GENERATE_APP_VIDEO_ASYNC]),p=s.Ay$.object({data:d.k,style_id:s.Ay$.string(),metadata:u.p}),x=e=>{let t=(0,o.b)(h,JSON.parse(e.metadata));return{data:b((0,o.b)(f,JSON.parse(e.data),{generationType:n.c.VIDEO,imageAppId:-1,videoAppId:-1,aspect_ratio:"1:1"})),styleId:e.style_id,metadata:t}},f=s.Ay$.object({generationType:s.Ay$.literal(n.c.VIDEO),imageAppId:s.Ay$.number(),videoAppId:s.Ay$.number()}).and(s.Ay$.union([s.Ay$.object({aspect_ratio:s.Ay$.string(),image_size:s.Ay$.never().optional()}),s.Ay$.object({image_size:s.Ay$.object({width:s.Ay$.number(),height:s.Ay$.number()}),aspect_ratio:s.Ay$.never().optional()})])).and(s.Ay$.record(s.Ay$.string(),s.Ay$.unknown())),b=e=>{var t,a;let{aspect_ratio:s,image_size:r,imageAppId:i,videoAppId:l,generationType:o,...d}=e;return r?{aspectHeight:r.height,aspectWidth:r.width,generationType:n.c.VIDEO,imageAppId:i,videoAppId:l,imageSize:r,...d}:{aspectHeight:Number(null!=(t=s.split(":")[1])?t:1),aspectWidth:Number(null!=(a=s.split(":")[0])?a:1),generationType:n.c.VIDEO,imageAppId:i,videoAppId:l,aspectRatio:s,...d}},h=s.Ay$.object({placeholderUuid:s.Ay$.string().optional(),slug:s.Ay$.string().optional()}),v=s.Ay$.object({generation:c.aB,inputs:c.aB,thumbnail:c.aB,variation:c.aB}),_=e=>({generation:(0,i._)(e.generation),inputs:e.inputs,thumbnail:(0,i._)(e.thumbnail),variation:e.variation});s.Ay$.literal(l.A.APP_VIDEO_GENERATION)},98221:(e,t,a)=>{"use strict";a.d(t,{I6:()=>c,TR:()=>f,bq:()=>p,eb:()=>b,gC:()=>x,l6:()=>d,s3:()=>u,yv:()=>m});var s=a(54568),n=a(84545);a(7620);var r=a(46626),i=a(11386),l=a(89536),o=a(16750);let d=e=>{let{...t}=e;return(0,s.jsx)(n.bL,{"data-slot":"select",...t})},c=e=>{let{className:t}=e;return(0,s.jsx)(r.D3D,{className:(0,i.cn)("text-content-primary size-5 transform stroke-[1.5] transition-all duration-500 group-data-[state=open]:-rotate-180 [.sm_&]:size-[18px]",t)})},u=e=>{let{...t}=e;return(0,s.jsx)(n.YJ,{"data-slot":"select-group",...t})},m=e=>{let{...t}=e;return(0,s.jsx)(n.WT,{"data-slot":"select-value",...t})},p=e=>{let{className:t,size:a,variant:r,children:o,...d}=e;return(0,s.jsx)(n.l9,{"data-slot":"select-trigger",className:(0,i.cn)("data-[placeholder]:text-content-secondary",(0,l.JX)({className:t,variant:r,size:a}),"group"),...d,children:o})},x=e=>{let{className:t,children:a,position:r="popper",variant:o,viewportClassName:d,...c}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{"data-slot":"select-content",className:(0,i.cn)((0,l.Kb)({variant:o}),"popper"===r&&"bg-background text-content-primary ring-border-primary ring-1 drop-shadow-sm data-[side=bottom]:translate-y-2.5 data-[side=left]:-translate-x-2.5 data-[side=right]:translate-x-2.5 data-[side=top]:-translate-y-2.5",t),position:r,...c,children:(0,s.jsx)(n.LM,{className:(0,i.cn)("popper"===r&&"h-[calc(var(--radix-select-trigger-height)-18px)] w-[calc(var(--radix-select-trigger-width)-18px)]",d),children:a})})})},f=e=>{let{className:t,variant:a,sticky:r,...i}=e;return(0,s.jsx)(n.JU,{"data-slot":"select-label",className:(0,o.B)({variant:a,className:t,sticky:r}),...i})},b=e=>{let{className:t,children:a,variant:o,size:d,...c}=e;return(0,s.jsxs)(n.q7,{"data-slot":"select-item",className:(0,i.cn)((0,l.OZ)({className:t,variant:o,size:d})),...c,children:[(0,s.jsx)("span",{className:"absolute right-2.5 flex items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(r.Srz,{className:"text-content-secondary"})})}),(0,s.jsx)(n.p4,{className:"flex w-full items-center gap-2",children:a})]})}},98457:(e,t,a)=>{"use strict";a.d(t,{QueryParamModal:()=>c});var s=a(54568),n=a(78848),r=a(35284),i=a(33029),l=a(11386);let o=e=>{let{children:t,isOpen:a,handleOpenChange:n,title:r,description:o,className:d}=e;return(0,s.jsx)(i.lG,{open:a,onOpenChange:n,children:(0,s.jsxs)(i.Cf,{className:(0,l.cn)(d),children:[(0,s.jsxs)(i.c7,{className:"text-heading-md tablet:p-6 tablet:pb-0 items-start border-b-0 p-4 pb-0 font-semibold",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(i.L3,{className:"text-heading-md font-semibold",children:r}),o&&(0,s.jsx)(i.rr,{className:"text-content-tertiary text-body-sm",children:o})]}),(0,s.jsx)(i.De,{})]}),t]})})};var d=a(22399);let c=e=>{let{children:t,dialogName:a,paramKey:i,handleOnClose:l,paramValue:c,handleOnOpen:u,className:m,title:p,description:x}=e,f=(0,n.jj)(),{isOpen:b,handleOpenChange:h}=(0,r.g)({dialogName:a,paramKey:i,paramValue:c,handleOnClose:l,handleOnOpen:u});return f?(0,s.jsx)(d.n,{isOpen:b,handleOpenChange:h,title:p,description:x,className:m,children:t}):(0,s.jsx)(o,{isOpen:b,handleOpenChange:h,title:p,description:x,className:m,children:t})}},98575:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});let s=(0,a(55822).v)((e,t)=>({dynamicMiniAppsSlugToLatestGenerationMap:{},addToSlugsToLatestGenerationMap:a=>{let{generation:s,bypassExistingEntryCheck:n=!1}=a,r=s.settings.metadata.slug;r&&(null!==t().dynamicMiniAppsSlugToLatestGenerationMap[r]||n)&&e(e=>({dynamicMiniAppsSlugToLatestGenerationMap:{...e.dynamicMiniAppsSlugToLatestGenerationMap,[r]:s}}))},removeFromSlugsToLatestGenerationMap:a=>{let{slug:s}=a,n={...t().dynamicMiniAppsSlugToLatestGenerationMap};delete n[s],e({dynamicMiniAppsSlugToLatestGenerationMap:n})},clearGenerationForSlug:a=>{let{slug:s}=a;t().dynamicMiniAppsSlugToLatestGenerationMap[s]&&e(e=>({dynamicMiniAppsSlugToLatestGenerationMap:{...e.dynamicMiniAppsSlugToLatestGenerationMap,[s]:null}}))}}))},98720:(e,t,a)=>{"use strict";a.d(t,{CG:()=>c,Fm:()=>b,Ml:()=>h,Qs:()=>g,XW:()=>v,cj:()=>d,h:()=>f,kN:()=>u,qp:()=>_});var s=a(54568),n=a(20148),r=a(615);a(7620);var i=a(46626),l=a(11386),o=a(54140);let d=e=>{let{...t}=e;return(0,s.jsx)(n.bL,{"data-slot":"sheet",...t})},c=e=>{let{...t}=e;return(0,s.jsx)(n.l9,{"data-slot":"sheet-trigger",...t})},u=e=>{let{...t}=e;return(0,s.jsx)(n.bm,{"data-slot":"sheet-close",...t})},m=e=>{let{...t}=e;return(0,s.jsx)(n.ZL,{"data-slot":"sheet-portal",...t})},p=e=>{let{className:t,...a}=e;return(0,s.jsx)(n.hJ,{"data-slot":"sheet-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 bg-overlay fixed inset-0 z-50",t),...a})},x=(0,r.F)("fixed z-50 gap-4 outline-none bg-background drop-shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),f=e=>{let{className:t,children:a,side:r="right",...i}=e;return(0,s.jsxs)(m,{children:[(0,s.jsx)(p,{}),(0,s.jsx)(n.UC,{"data-slot":"sheet-content",className:(0,l.cn)(x({side:r}),t),...i,children:a})]})},b=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"sheet-header",className:(0,l.cn)("flex items-center justify-between gap-2",t),...a})},h=e=>{let{className:t,...a}=e;return(0,s.jsx)(u,{asChild:!0,children:(0,s.jsx)(o.$,{className:t,variant:"ghost",size:"icon-xs",...a,children:(0,s.jsx)(i.w0d,{})})})},v=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"sheet-footer",className:(0,l.cn)("flex flex-row",t),...a})},_=e=>{let{className:t,...a}=e;return(0,s.jsx)(n.hE,{"data-slot":"sheet-title",className:(0,l.cn)("text-content-primary text-label-lg font-semibold",t),...a})},g=e=>{let{className:t,...a}=e;return(0,s.jsx)(n.VY,{"data-slot":"sheet-description",className:(0,l.cn)("text-body-sm",t),...a})}},99958:(e,t,a)=>{"use strict";a.d(t,{v:()=>d});var s=a(55437),n=a(13496),r=a(59051),i=a(12331),l=a(65762),o=a(19136);let d=e=>{let t=(0,r.b)(n.pM,e.endpoint);if(t===s.j.GENERATE_APP_IMAGE_ASYNC)return(e=>{let t=(0,r.b)(n.E,e.settings,{data:"{}",metadata:"{}",style_id:"-1"}),a=(0,n.A)(t),s=(0,r.b)(n.Jm,e.url,{generation:[],inputs:[],thumbnail:[],variation:[]}),d=(0,n.bs)(s);return{...e,settings:a,url:d,tag:l.A.APP_IMAGE_GENERATION,service:i.z1.APP_IMAGE,refService:void 0,type:o.KJ.OBJECT}})({...e,endpoint:t})}}},e=>{e.O(0,[1952,5147,4667,4732,7567,7676,6844,357,9271,3922,8657,524,7261,390,4242,148,1938,3970,9722,5575,7296,5747,4545,9567,8162,1222,9053,2870,5099,1127,543,3578,6698,9636,5298,992,587,1902,7358],()=>e(e.s=26834)),_N_E=e.O()}]);