"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[543],{2611:(e,t,r)=>{r.d(t,{t:()=>n});var a=r(14359);class n extends a.e{constructor(){super()}}},3397:(e,t,r)=>{r.d(t,{bO:()=>o,fV:()=>i});var a=r(54568),n=r(7620);let s=(0,n.createContext)(null),o=()=>{let e=(0,n.useContext)(s);if(!e)throw Error("useOneRemoteConfigContext must be used within a OneRemoteConfigStoreProvider");return e},i=e=>{let{initialState:t,children:r}=e,[o]=(0,n.useState)(t);return(0,a.jsx)(s,{value:o,children:r})}},8017:(e,t,r)=>{r.d(t,{XL:()=>n,fH:()=>s});var a=r(62384);let n=e=>({Authorization:"Bearer ".concat(e)}),s=e=>{let{email:t,productName:r,slug:n,referralCode:s,isCompleteRedirectUrl:o=!1,open:i,redirect:_="",authBaseUrl:l}=e,u=new URL("".concat(l,"/").concat(n)),c=o?new URL(_):new URL(_||window.location.pathname+window.location.search,window.location.origin);new URLSearchParams(window.location.search).forEach((e,t)=>c.searchParams.set(t,e)),u.searchParams.set(a.u.REDIRECT,"".concat(c)),u.searchParams.set(a.u.PRODUCT,r),i&&u.searchParams.set(a.u.OPEN,i),t&&u.searchParams.set(a.u.EMAIL,t),s&&u.searchParams.set(a.u.REFERRAL_CODE,s),window.location.href=u.href}},16991:(e,t,r)=>{r.d(t,{d:()=>d});var a=r(7620),n=r(30650),s=r(35044),o=r(90820),i=r(3397),_=r(78848),l=r(53605),u=r(85729),c=r(58087),p=r(58445);let d=()=>{let{activeStripePlanName:e,isRevenueCatActiveAndNotStripeActive:t,revenueCatPlanName:r}=(0,l.c)(),{planBasedFeatures:d}=(0,i.bO)(),{handleProFeatureError:m}=(0,p.n)(),{setIsVideoProFeatureSheetOpen:g,setOnUpgradeClickHandler:h}=(0,u.O)(),E=(0,_.hM)(),I=(0,a.useMemo)(()=>{var a,n,o;return null!=(o=null==(a=d.lastFrame)?void 0:a[(0,c.y)(null!=(n=t?r:e)?n:s.M4.FREE)])&&o},[d.lastFrame,t,r,e]),O=()=>{var e;return Object.keys(null!=(e=d.lastFrame)?e:{}).filter(e=>{var t,r;return null!=(r=null==(t=d.lastFrame)?void 0:t[(0,c.y)(e)])&&r}).map(c.y)},f=()=>{m({title:n.r_.PRO_VIDEO_ADD_LAST_FRAME.TITLE,description:"To unlock this feature, please choose one of the following plans: ".concat(O().join(", ")),upgradeablePlanNames:O(),analyticsCta:o.J.PRO_VIDEO_ADD_LAST_FRAME})};return{isLastFrameSupported:I,getUpgradablePlansByLastFrame:O,setIsVideoProFeatureSheetOpen:g,handleLastFrameNotAllowedForPlanError:()=>{if(E){g(!0),h(f);return}f()}}}},17307:(e,t,r)=>{r.d(t,{y:()=>a});class a{}},18010:(e,t,r)=>{r.d(t,{M:()=>o});var a=r(36979);class n{get id(){return this._id}get name(){return this._name}get properties(){return this._properties}withProperties(e){let t=Object.keys({...this._properties,...e}).reduce((t,r)=>{let a={...this._properties,...e}[r];return null!=a&&""!==a&&(t[r]=a),t},{});return new n(this._name,t,this._id)}extractProperties(e){let t=e.reduce((e,t)=>(null!==this._properties[t]&&void 0!==this._properties[t]&&""!==this._properties[t]&&(e[t]=this._properties[t]),e),{});return new n(this._name,t,this._id)}appendKey(e){let t=Object.entries(this._properties).reduce((t,r)=>{let[a,n]=r;return t["".concat(a).concat(e)]=n,t},{});return new n(this._name,t,this._id)}match(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(let{event:e,callback:r}of t)if(this.id===e.id)return void r(this)}constructor(e,t,r){this._name=e,this._properties=t,this._id=null!=r?r:(0,a.A)()}}var s=r(22282);let o={tileClicked:new n("tile_clicked",{page_name:"",source:"",tile_name:"",utm_term:"",utm_source:"",utm_medium:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""}),pageView:new n("page_view",{page_name:"",source:"",user_account_status:"Free",user_plan:"",user_plan_period:"",customer_id:"",customer_email:"",custom_profile_id:""}),sessionStarted:new n("session_started",{utm_campaign:s.Q,utm_term:s.Q,utm_medium:s.Q,utm_source:s.Q,state:s.Q,page_name:""}),logoutCompleted:new n("logout_completed",{}),signupCompleted:new n("signup_completed",{signup_channel:"",name:"",email:"",mode:"",marketing_consent:!1,distinct_id:"",tokens_remaining:0,utm_campaign:"",utm_term:"",utm_medium:"",utm_source:"",signup_cta:"",page_name:"",affiliate_id:"",first_page_view:"",user_account_status:"Free",user_plan:"",user_plan_period:"",first_name:"",landing_source:"",is_referred:"",tool_name:"",app_name:"",studio_name:""}),loginCompleted:new n("login_completed",{mode:"",signup_channel:"",page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",email:"",revenue_till_date:0,distinct_id:"",first_name:"",name:"",app_name:"",tool_name:"",studio_name:""}),addToCart:new n("add_to_cart",{amount:0,currency:"",user_plan:"Free",user_plan_period:"Free",tokens_amount:0,signup_channel:"",page_name:"",source:"",email:"",distinct_id:"",utm_campaign:"",utm_term:"",atc_cta_source:"",user_account_status:"Free",plan_clicked:"",plan_period_clicked:"",app_name:"",tool_name:"",studio_name:""}),purchase:new n("purchase",{amount:0,currency:"",user_plan:"",user_plan_period:"",tokens_amount:0,payment_method:"",payment_status:"",signup_channel:"",billing_cycle:"",page_name:"",email:"",tokens_remaining:0,distinct_id:"",renewal_status:!1,topup_purchased:!1,utm_campaign:"",utm_term:"",utm_medium:"",utm_source:"",affiliate_id:"",user_account_status:"Free",Payment_status:"",amount_charged:0,coupon:"",discount_percentage:0,landing_source:"",app_name:"",tool_name:"",studio_name:"",atc_cta_source:"",charge_id:"",custom_profile_id:"",customer_id:"",customer_email:"",discount:0}),imageGenerationOne:new n("image_generation_one",{upload_image:!1,upload_type:"",aspect_ratio:"",number_of_images:0,model_used:"",presets:"",image_mode:"",prompt_text:"",prompt_text_2:"",prompt_text_3:"",upscale_used:!1,variate_used:!1,inspiration_used:!1,recreate:!1,page_name:"",source:"",processing_status:"",processing_error:"",tokens_remaining:0,tokens_consumed:0,user_account_status:"Free",user_plan:"",user_plan_period:"",distinct_id:"",email:"",project_name:"",folder_name:"",user_profile:"",user_profile_list:[""],workspace:"",team_name:"",team_size:"",is_team_owner:!1}),videoGenerationOne:new n("video_generation_one",{upload_image:!1,generation_source:"",upload_type:"",end_frame_added:!1,aspect_ratio:"",model_used:"",presets:"",video_mode:"",video_duration:-1,video_resolution:"",prompt_text:"",prompt_text_2:"",prompt_text_3:"",inspiration_used:!1,recreate:!1,page_name:"",source:"",processing_status:"",processing_error:"",tokens_remaining:0,tokens_consumed:0,creation_action:"",email:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:"",project_name:"",folder_name:"",user_profile:"",user_profile_list:[""],workspace:"",team_name:"",team_size:"",is_team_owner:!1}),onboardingSurvey:new n("onboarding_survey",{user_persona:"",initial_goal:"",cadence:"",media_type:"",members:"",app_name:"",studio_name:"",email:"",distinct_id:""}),export:new n("export",{source:"",file_type:"",file_size:"",session_images_export:0,export_all:!1,page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",email:"",total_images_exported:0,tokens_remaining:0,distinct_id:"",trigger:"",feature:"",app_name:"",model_used:"",prompt_text:"",prompt_text_2:"",prompt_text_3:"",tool_name:"",gen_till_export:0,studio_name:""}),motionTransferGeneration:new n("motion_transfer_generation",{character_source:"",body_motion_source:"",model_used:"",tokens_consumed:0,tokens_remaining:0,processing_status:"",processing_error:"",source:"",page_name:"",email:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""}),personalized:new n("personalized-oneshot",{category:"",name:"",number_of_images_uploaded:"",tokens_consumed:0,tokens_remaining:0,processing_status:"",processing_error:"",source:"",page_name:"",email:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:"",user_profile:"",team_name:""}),personalizeClick:new n("personalize_click",{tokens_remaining:0,source:"",page_name:"",email:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:"",user_profile:""}),personalizeSelect:new n("personalize_select",{trigger:"",tokens_remaining:0,processing_status:"",processing_error:"",source:"",page_name:"",email:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:"",user_profile:""}),personalizeCreate:new n("personalize_create",{trigger:"",tokens_remaining:0,source:"",page_name:"",email:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:"",user_profile:""}),personalizeCategory:new n("personalize_category",{category:"",tokens_remaining:0,source:"",page_name:"",email:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:"",user_profile:""}),folder:new n("folders_one",{folder_name:"",project_name:"",page_name:"",source:"",email:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:"",folder_visibility:"",user_profile:""}),upgradeModal:new n("upgrade_modal",{modal_type:"",source:"",page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""}),buyCredits:new n("buy_credits",{page_name:"",source:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""}),pageViewPro:new n("page_view_pro",{page_name:"",source:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:"",utm_term:"",utm_medium:"",utm_source:""}),appsGeneration:new n("apps_generation",{upload_image:!1,upload_type:"",aspect_ratio:"",app_used:"",app_category:"",generation_type:"",prompt_text:"",prompt_text_2:"",prompt_text_3:"",inspiration_used:!1,recreate:!1,page_name:"",source:"",processing_status:"",processing_error:"",tokens_remaining:0,tokens_consumed:0,project_name:"",folder_name:"",email:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:"",user_profile:"",user_profile_list:[""],workspace:"",team_name:"",team_size:"",is_team_owner:!1}),createCollection:new n("collection_create",{page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""}),unpublishAsset:new n("unpublish_asset",{generation_type:"",tokens_remaining:0,source:"",email:"",user_profile:"",page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""}),viewProfile:new n("view_profile_btn",{email:"",user_profile:"",page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""}),shareLink:new n("share_link",{share_type:"",trigger:"",source:"",email:"",user_profile:"",page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""}),publishAsset:new n("publish_asset",{generation_type:"",tokens_remaining:0,source:"",email:"",user_profile:"",page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""}),searchCommunity:new n("search_community",{search_term:"",tokens_remaining:0,source:"",email:"",user_profile:"",page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""}),workflowSessionCompleted:new n("workflow_session_completed",{nodes_used:"",nodes_count:0,section_used_count:0,total_connections:0,total_nodes:0,collab_tools:!1,collab_tools_type:"",template_used:!1,template_name:"",export_type:"",export_node_type:"",export_count:0,duplicate_project:!1,duplicate_own_project:!1,workflow_project_name:"",workflow_page_name:"",workflow_pages_count:0,distinct_id:"",source:"",email:"",page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",tokens_remaining:0}),workflowGeneration:new n("workflow_generation",{generated_from:"",model_parameters:"",prompt_text:"",prompt_text_2:"",prompt_text_3:"",inputs_connected:"",node_addded_from:"",run_type:"",rerun_node:"",section_name:"",generations_per_node:"",processing_status:"",processing_error:"",tokens_consumed:0,distinct_id:"",source:"",email:"",page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",tokens_remaining:0}),teamInviteCreated:new n("team_invite_created",{invited_users:0,page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""}),teamInviteAccepted:new n("team_invite_accepted",{invitor_email:"",invitee_email:"",utm_campaign:"",utm_term:"",utm_source:"",utm_medium:"",page_name:"",user_account_status:"",user_plan:"",user_plan_period:"",distinct_id:""})}},29801:(e,t,r)=>{r.d(t,{C:()=>n});var a=r(14359);class n extends a.e{constructor(e){super(),this.numberOfPersonalizeItems=e}}},41009:(e,t,r)=>{r.d(t,{q:()=>a});let a={SINGULAR:"credit",PLURAL:"credits"}},50965:(e,t,r)=>{r.d(t,{E:()=>n});var a=r(14359);class n extends a.e{constructor(e){super(),this.resolution=e}}},51181:(e,t,r)=>{r.d(t,{q:()=>p});var a=r(7620),n=r(30650),s=r(90820),o=r(3397),i=r(56522),_=r(63977),l=r(58087),u=r(62974),c=r(58445);let p=()=>{let{planBasedFeatures:e}=(0,o.bO)(),{handleProFeatureError:t}=(0,c.n)(),{personalizeAccessType:r,maxAllowedPersonalizeItems:p}=(0,u.c)(),{personalize:d}=null!=e?e:{},m=(0,a.useMemo)(()=>r!==i.L.DISABLED,[r]),g=(0,a.useCallback)(e=>m?Object.values(n.O$).filter(t=>{var r,a,n;let s=(0,l.y)(t),o=null!=(n=null==d||null==(r=d[s])?void 0:r.maxPersonalizeItems)?n:1/0;return(null==d||null==(a=d[s])?void 0:a.accessType)!==i.L.DISABLED&&e&&e<o}):Object.values(n.O$).filter(e=>{var t;return(null==d||null==(t=d[(0,l.y)(e)])?void 0:t.accessType)!==i.L.DISABLED}),[m,d]),h=(0,a.useCallback)(e=>{switch(r){case i.L.UNLIMITED:return!0;case i.L.DISABLED:return!1;case i.L.LIMITED:return(null!=e?e:0)<=p;default:return!1}},[p,r]),E=(0,a.useCallback)(e=>{let r=g(e),a=(0,_.q)(r);return t({title:e?n.r_.MAX_PERSONALIZE_ITEMS_REACHED.TITLE:n.r_.PERSONALIZE_NOT_ALLOWED_FOR_PLAN.TITLE,description:e?"Your current plan has limits, please choose one of the following plans to increase the limit: ".concat(a):"To unlock Personalization, please choose one of the following plans to increase the limit:  ".concat(a),upgradeablePlanNames:r,analyticsCta:s.J.PERSONALIZE_NOT_ALLOWED_FOR_PLAN})},[t,g]);return{personalizeAccessType:r,maxAllowedPersonalizeItems:p,isPersonalizeAllowedForPlan:m,getUpgradablePlansForPersonalize:g,handlePersonalizeNotAllowedForPlanError:E,checkIfNumberOfPersonalizeItemsIsAllowedForPlan:h}}},53605:(e,t,r)=>{r.d(t,{c:()=>o});var a=r(7620),n=r(45822),s=r(52948);let o=()=>{let{data:e,isLoading:t,isError:r}=(0,s.aR)();return(0,a.useMemo)(()=>{var a;return{...(0,n.B6)(null!=(a=null==e?void 0:e.subscription)?a:null),isLoading:t,isError:r}},[null==e?void 0:e.subscription,t,r])}},53881:(e,t,r)=>{r.d(t,{H:()=>a,_:()=>n});let a={BEARER_TOKEN:"token",CACHED_SESSION:"cachedSession",REFRESH_TOKEN:"refreshToken",IMPERSONATE_USER_TOKEN:"impersonateUserToken"},n={TOKEN:"token",IS_SIGNUP:"isSignUp"}},56522:(e,t,r)=>{r.d(t,{L:()=>a});let a={UNLIMITED:"unlimited",LIMITED:"limited",DISABLED:"disabled"}},58087:(e,t,r)=>{r.d(t,{y:()=>s});var a=r(35044),n=r(59051);let s=e=>(0,n.b)(a.En,e)},58445:(e,t,r)=>{r.d(t,{n:()=>_});var a=r(7620),n=r(35044),s=r(22360),o=r(53605),i=r(69472);let _=()=>{let{setUpgradeModalParams:e,isOpen:t}=(0,i.i)(),{activeStripePlanName:r}=(0,o.c)(),_=r===n.M4.CREATOR;return{handleProFeatureError:(0,a.useCallback)(r=>{let{title:a,description:n,upgradeablePlanNames:o,analyticsCta:i}=r;!t&&(_||(localStorage.setItem(s.C.ADD_TO_CART_CTA,i),e({isOpen:!0,upgradeablePlanNames:o,title:a,description:n})))},[e,t,_])}}},58910:(e,t,r)=>{r.d(t,{y:()=>R});var a=r(89329),n=r(44089),s=r(92184),o=r(8017),i=r(59051),_=r(79536);let l=_.Ik({result:_.Ik({isAvailable:_.zM()})}),u=e=>_.Ik({result:e}),c=_.Ik({id:_.Yj(),name:_.Yj(),username:_.Yj().optional(),email:_.Yj().nullable(),isVerified:_.zM(),profileImageKey:_.Yj().nullable(),isAdmin:_.zM().default(!1),isImpersonated:_.zM().default(!1)}),p=_.Ik({question:_.Yj(),answer:_.Yj()}),d=u(_.Ik({redirect:_.Yj()}));_.Ik({code:_.Yj(),redirect_uri:_.Yj()}),_.Ik({access_token:_.Yj()});let m=u(c),g=u(_.Ik({sessionToken:_.Yj(),tokenExpiresIn:_.ai(),refreshToken:_.Yj()})),h=u(_.Ik({hash:_.Yj()}));var E=r(35044);let I=u(_.Ik({persona:_.YO(p).nullable(),name:_.Yj(),username:_.Yj(),profileImageKey:_.Yj().nullable(),productValidFor:E.hI}));_.Ik({access_token:_.Yj()}),_.Ik({credential:_.Yj()});let O=u(_.Ik({redirect:_.Yj()})),f=u(_.Ik({sessionToken:_.Yj()})),w=u(_.Ik({})),k=u(_.Ik({user:c,sessionToken:_.Yj(),refreshToken:_.Yj(),tokenExpiresIn:_.ai()}));class T{async getNewToken(e){let{refreshToken:t}=e,r=await this._client.post("".concat(this._serviceBaseURL,"/refresh/web"),null,{headers:(0,o.XL)(t)}),a=(e=>{let{result:t}=e;return{token:t.sessionToken,tokenExpiresIn:t.tokenExpiresIn,refreshToken:t.refreshToken}})((0,i.b)(g,r.data));return{...r,data:a}}async verifyUserSession(e){let{token:t}=e,r=await this._client.get("".concat(this._serviceBaseURL,"/user-info"),{params:{token:t}}),a=(e=>{let{result:t}=e;return{user:t.user,token:t.sessionToken,refreshToken:t.refreshToken,tokenExpiresIn:t.tokenExpiresIn}})((0,i.b)(k,r.data));return{...r,data:a}}async getSessionHash(e){let{token:t}=e,r=await this._client.get("".concat(this._serviceBaseURL,"/session"),{params:{token:t}}),a=(e=>{let{result:t}=e;return{hash:t.hash}})((0,i.b)(h,r.data));return{...r,data:a}}async logout(){let e=await this._client.post("".concat(this._serviceBaseURL,"/logout"),null);return(0,i.b)(w,e.data),{...e,data:{}}}async getMe(e){let{bearerToken:t}=e,r=await this._client.get("/user/@me",{headers:(0,o.XL)(t)}),a=(e=>{let{result:t}=e;return t})((0,i.b)(m,r.data));return{...r,data:a}}async impersonateUser(e){let t=(e=>{if("email"in e)return{email:e.email};if("userId"in e)return{userId:e.userId};if("stripeCustomerId"in e)return{stripeCustomerId:e.stripeCustomerId};throw Error("Invalid args")})(e),r=await (0,s.hZ)(async()=>await this._client.post("".concat(this._serviceBaseURL,"/impersonate"),t,{headers:(0,o.XL)(e.bearerToken)})),a=(e=>{let{result:t}=e;return{token:t.sessionToken}})((0,i.b)(f,r.data));return{...r,data:a}}async googleAuth(e){let{payload:t,param:r}=e,a=await this._client.post("/auth/social/google/in-app",t,{params:r}),n=(e=>{let{result:t}=e;return{redirect:t.redirect}})((0,i.b)(d,a.data));return{...a,data:n}}async googleOneTapAuth(e){let{payload:t,param:r}=e,a=await this._client.post("/auth/social/google/onetap",t,{params:r}),n=(e=>{let{result:t}=e;return{redirect:t.redirect}})((0,i.b)(O,a.data));return{...a,data:n}}async facebookAuth(e){let{payload:t,param:r}=e,a=await this._client.post("/auth/social/facebook",t,{params:r}),n=(e=>{let{result:t}=e;return{redirect:t.redirect}})((0,i.b)(d,a.data));return{...a,data:n}}async discordAuth(e){let{payload:t,param:r}=e,a=await this._client.post("/auth/social/discord",t,{params:r}),n=(e=>{let{result:t}=e;return{redirect:t.redirect}})((0,i.b)(d,a.data));return{...a,data:n}}async getUserPersona(e){let{bearerToken:t}=e,r=await this._client.get("/user/persona",{headers:(0,o.XL)(t)}),a=(0,i.b)(I,r.data).result;return{...r,data:a}}async updateUserPersona(e){let{personaItems:t,bearerToken:r}=e,a=await this._client.put("/user/persona",{persona:t},{headers:(0,o.XL)(r)}),n=(0,i.b)(I,a.data).result;return{...a,data:n}}async checkIfUsernameIsAvailable(e){let{username:t,productValidFor:r}=e;try{let e=await this._client.get("/auth/custom/check-username/".concat(t),{params:{productValidFor:r}}),a=(0,i.b)(l,e.data).result;return{...e,data:a}}catch(e){if(e instanceof n.pe&&e.response&&e.response.data)throw Error(e.response.data.message);throw e}}constructor({client:e}){this._serviceBaseURL="/auth/other",this._client=e}}var v=r(19533);let R=new T({client:(0,r(48164).d)(a.A.create({baseURL:v.h.NEXT_PUBLIC_AUTH_API_URL}))})},62974:(e,t,r)=>{r.d(t,{c:()=>l});var a=r(7620),n=r(35044),s=r(3397),o=r(53605),i=r(56522),_=r(58087);let l=()=>{var e;let{planBasedFeatures:t}=(0,s.bO)(),{activeStripePlanName:r,revenueCatPlanName:l,isRevenueCatActiveAndNotStripeActive:u}=(0,o.c)(),{personalize:c}=null!=t?t:{},p=(0,_.y)(null!=(e=u?l:r)?e:n.M4.FREE),d=(0,a.useMemo)(()=>{var e;return p?null==(e=t.duration)?void 0:e[p]:0},[p,t]),m=(0,a.useMemo)(()=>{var e;return p?null==(e=t.resolution)?void 0:e[p]:"0"},[p,t]),g=(0,a.useMemo)(()=>r&&c&&c[p]?c[p].accessType:i.L.DISABLED,[c,p,r]),h=(0,a.useMemo)(()=>{var e,t;return g===i.L.UNLIMITED?1/0:g===i.L.DISABLED?0:null!=(t=null==c||null==(e=c[p])?void 0:e.maxPersonalizeItems)?t:0},[c,p,g]);return{maxAllowedDuration:null!=d?d:0,maxAllowedResolution:null!=m?m:"0",personalizeAccessType:g,maxAllowedPersonalizeItems:h}}},63977:(e,t,r)=>{r.d(t,{q:()=>a});let a=e=>{let t="";if((null==e?void 0:e.length)===1){var r;t=null!=(r=e[0])?r:""}else t="".concat(null==e?void 0:e.slice(0,-1).join(", ")," or ").concat(null==e?void 0:e.slice(-1)[0]);return t}},67139:(e,t,r)=>{r.d(t,{k:()=>p});var a=r(7620),n=r(30650),s=r(90820),o=r(3397),i=r(78848),_=r(85729),l=r(58087),u=r(62974),c=r(58445);let p=()=>{let{planBasedFeatures:e}=(0,o.bO)(),{handleProFeatureError:t}=(0,c.n)(),{maxAllowedResolution:r}=(0,u.c)(),{setIsVideoProFeatureSheetOpen:p,setOnUpgradeClickHandler:d}=(0,_.O)(),m=(0,i.hM)(),g=e=>{var t;return parseInt(null!=(t=e.split("p")[0])?t:"0")},h=(0,a.useCallback)(e=>g(r)>=g(e),[r]),E=(0,a.useCallback)(t=>{var r;let a=Object.keys(null!=(r=e.resolution)?r:{}).sort((t,r)=>{var a,n,s,o;return g(null!=(s=null==(a=e.resolution)?void 0:a[(0,l.y)(t)])?s:"0")-g(null!=(o=null==(n=e.resolution)?void 0:n[(0,l.y)(r)])?o:"0")}).find(r=>{var a,n;return g(null!=(n=null==(a=e.resolution)?void 0:a[(0,l.y)(r)])?n:"0")>=g(t)});return a?n.I3.filter(e=>n.I3.indexOf(e)>=n.I3.indexOf((0,l.y)(a))):[]},[e]),I=(0,a.useCallback)(e=>t({title:n.r_.PRO_VIDEO_RESOLUTION.TITLE,description:"To unlock ".concat(e,", please choose one of the following plans: ").concat(E(e).join(", ")),upgradeablePlanNames:E(e),analyticsCta:s.J.PRO_VIDEO_RESOLUTION}),[t,E]),O=(0,a.useCallback)(e=>!!h(e)||(m?(p(!0),d(()=>I(e))):I(e),!1),[h,I,m,p,d]);return{isResolutionSupported:h,getUpgradablePlansByResolution:E,handleResolutionNotAllowedForPlanError:I,checkIfResolutionIsSupportedWithErrorHandler:O}}},69472:(e,t,r)=>{r.d(t,{i:()=>o});var a=r(55822),n=r(30650),s=r(20844);let o=(0,a.v)()(e=>({isOpen:!1,setIsOpen:t=>e({isOpen:t}),title:n.r_.DEFAULT.TITLE,description:n.r_.DEFAULT.DESCRIPTION,setTitle:t=>e({title:t}),upgradeablePlanNames:[],setDescription:t=>e({description:t}),setUpgradeablePlanNames:t=>e({upgradeablePlanNames:t}),setUpgradeModalParams:t=>{let{isOpen:r,title:a,upgradeablePlanNames:n,redirectRoute:s,description:o}=t;return e({isOpen:r,title:a,upgradeablePlanNames:n,redirectRoute:s,description:o})},redirectRoute:s.ze.HOME,setRedirectRoute:t=>e({redirectRoute:t})}))},71087:(e,t,r)=>{r.d(t,{q:()=>n});var a=r(14359);class n extends a.e{constructor(e){super(),this.duration=e}}},74342:(e,t,r)=>{r.d(t,{h:()=>n});var a=r(14359);class n extends a.e{constructor(e){super(e)}}},78848:(e,t,r)=>{r.d(t,{HE:()=>c,RC:()=>o,TA:()=>s,ZU:()=>i,cY:()=>n,d:()=>u,hM:()=>l,jj:()=>_,nV:()=>p});var a=r(60357);let n=()=>(0,a.Ub)("(max-width: 375px)"),s=()=>(0,a.Ub)("(min-width: 374px) and (max-width: 767px)"),o=()=>(0,a.Ub)("(min-width: 768px) and (max-width: 1023px)"),i=()=>(0,a.Ub)("(min-width: 1024px) and (max-width: 1439px)"),_=()=>(0,a.Ub)("(max-width: 767px)"),l=()=>(0,a.Ub)("(max-width: 1023px)"),u=()=>(0,a.Ub)("(min-width: 1024px)"),c=()=>(0,a.Ub)("(min-width:768px)"),p=()=>(0,a.Ub)("(min-width:1280px)")},79920:(e,t,r)=>{r.d(t,{O:()=>d});var a=r(82806),n=r(62942),s=r(7620),o=r(53881),i=r(60095),_=r(18010),l=r(19533),u=r(99588),c=r(58910),p=r(20844);let d=()=>{let{setUser:e}=(0,i.u)(),{aggregator:t}=(0,u.p)(),r=(0,n.useRouter)();return{handleLogout:(0,s.useCallback)(()=>{t.log(_.M.logoutCompleted),c.y.logout().catch(()=>{}),e(null),(0,a.deleteCookie)(o.H.IMPERSONATE_USER_TOKEN,{domain:l.h.NEXT_PUBLIC_APP_DOMAIN}),(0,a.deleteCookie)(o.H.BEARER_TOKEN,{domain:l.h.NEXT_PUBLIC_APP_DOMAIN}),(0,a.deleteCookie)(o.H.REFRESH_TOKEN,{domain:l.h.NEXT_PUBLIC_APP_DOMAIN}),(0,a.deleteCookie)(o.H.CACHED_SESSION,{domain:l.h.NEXT_PUBLIC_APP_DOMAIN}),window.location.pathname!==p.ze.HOME?r.push(p.ze.HOME):window.location.reload()},[r,e,t])}}},82305:(e,t,r)=>{r.d(t,{q:()=>p});var a=r(7620),n=r(30650),s=r(90820),o=r(3397),i=r(78848),_=r(53605),l=r(85729),u=r(58087),c=r(58445);let p=()=>{let{planBasedFeatures:e}=(0,o.bO)(),{activeStripePlanName:t}=(0,_.c)(),{handleProFeatureError:r}=(0,c.n)(),{setIsVideoProFeatureSheetOpen:p,setOnUpgradeClickHandler:d}=(0,l.O)(),m=(0,i.hM)(),g=(0,a.useCallback)(r=>!!t&&!!e.duration&&(!e.duration[t]||e.duration[t]>=r),[t,e]),h=(0,a.useCallback)(t=>{var r;let a=Object.keys(null!=(r=e.duration)?r:{}).sort((t,r)=>{var a,n,s,o;return(null!=(s=null==(a=e.duration)?void 0:a[(0,u.y)(t)])?s:0)-(null!=(o=null==(n=e.duration)?void 0:n[(0,u.y)(r)])?o:0)}).find(r=>{var a,n;return(null!=(n=null==(a=e.duration)?void 0:a[(0,u.y)(r)])?n:0)>=t});return a?n.I3.filter(e=>n.I3.indexOf(e)>=n.I3.indexOf((0,u.y)(a))):[]},[e]),E=(0,a.useCallback)(e=>r({title:n.r_.PRO_VIDEO_DURATION.TITLE,description:"To use ".concat(e,"s duration, please choose one of the following plans: ").concat(h(e).join(", ")),upgradeablePlanNames:h(e),analyticsCta:s.J.PRO_VIDEO_DURATION}),[r,h]);return{checkIfDurationIsSupportedWithErrorHandler:(0,a.useCallback)(e=>!!g(e)||(m?(p(!0),d(()=>E(e))):E(e),!1),[g,E,m,p,d]),isDurationSupported:g,getUpgradablePlansByDuration:h,handleDurationNotAllowedForPlanError:E}}},82832:(e,t,r)=>{r.d(t,{P:()=>n});var a=r(14359);class n extends a.e{constructor(e){super(e)}}},85729:(e,t,r)=>{r.d(t,{O:()=>a});let a=(0,r(55822).v)()(e=>({isVideoProFeatureSheetOpen:!1,setIsVideoProFeatureSheetOpen:t=>e({isVideoProFeatureSheetOpen:t}),onUpgradeClickHandler:()=>{},setOnUpgradeClickHandler:t=>e({onUpgradeClickHandler:t})}))},90543:(e,t,r)=>{r.d(t,{z:()=>N});var a=r(44089),n=r(7620),s=r(51874),o=r(67561),i=r(89170),_=r(64904),l=r(5656),u=r(74342),c=r(71087),p=r(2611),d=r(82832),m=r(29801),g=r(50965),h=r(79920),E=r(51181),I=r(16991),O=r(82305),f=r(67139),w=r(83922),k=r(41009),T=r(62384),v=r(30650),R=r(90820),b=r(22360),A=r(53605),C=r(69472);let N=()=>{let{handleLogout:e}=(0,h.O)(),{handleModalOpen:t}=(()=>{let[,e]=(0,w.ZA)(T.u.TOP_UP_MODAL_OPEN,w.cr),{isSubscriptionActive:t,isSubscribedToUnlimitedPlan:r}=(0,A.c)(),{setUpgradeModalParams:a}=(0,C.i)();return{handleModalOpen:(0,n.useCallback)(()=>{t&&r?e(!0):(localStorage.setItem(b.C.ADD_TO_CART_CTA,R.J.INSUFFICIENT_TOKEN),a({upgradeablePlanNames:v.O$,isOpen:!0,title:t?v.r_.INSUFFICIENT_TOKENS_PRO_USER.TITLE:v.r_.INSUFFICIENT_TOKENS.TITLE,description:t?v.r_.INSUFFICIENT_TOKENS_PRO_USER.DESCRIPTION:v.r_.INSUFFICIENT_TOKENS.DESCRIPTION}))},[t,r,e,a]),textToShow:t&&r?"Buy ".concat(k.q.PLURAL):"Upgrade"}})(),{handleDurationNotAllowedForPlanError:r}=(0,O.q)(),{handleResolutionNotAllowedForPlanError:N}=(0,f.k)(),{handleLastFrameNotAllowedForPlanError:L}=(0,I.d)(),P=(()=>{let{activeStripePlanName:e}=(0,A.c)(),{setUpgradeModalParams:t,isOpen:r}=(0,C.i)(),a="Creator"===e,o=(0,n.useCallback)(e=>{if(!r){if(a)return s.oR.error("You've reached the maximum concurrent generation limit.");localStorage.setItem(b.C.ADD_TO_CART_CTA,R.J.CONCURRENT_GENERATION),t({isOpen:!0,upgradeablePlanNames:v.O$,title:v.r_.MAX_CONCURRENT_GENERATIONS.TITLE,description:e})}},[a,t,r]);return(0,n.useCallback)(e=>o(e),[o])})(),y=(()=>{let{setUpgradeModalParams:e,isOpen:t}=(0,C.i)(),r=(0,n.useCallback)(()=>{t||(localStorage.setItem(b.C.ADD_TO_CART_CTA,R.J.PRO_MODEL_MODAL),e({isOpen:!0,upgradeablePlanNames:v.O$,title:v.r_.PREMIUM_MODEL_NOT_ALLOWED.TITLE,description:v.r_.PREMIUM_MODEL_NOT_ALLOWED.DESCRIPTION}))},[e,t]);return(0,n.useCallback)(()=>r(),[r])})(),{handlePersonalizeNotAllowedForPlanError:D}=(0,E.q)(),S=(0,n.useCallback)(n=>{if(n instanceof i.J){let r=n.data[0];if(!r)return;let{message:a}=r;n instanceof o.Je?(s.oR.error("Session expired"),e()):n instanceof l.Vb?t():n instanceof l.iZ?s.oR.error(r.message||"Sent request in invalid."):n instanceof _.y8?s.oR.error("Model deleted by user"):n instanceof l.ud?s.oR.error("Sorry, the AI Moderator is unsure about this prompt"):n instanceof _.vj?s.oR.error("Service is temporarily unavailable, please try again later"):s.oR.error(a||"Failed to process request")}else n instanceof u.h?P(n.message):n instanceof d.P?y():n instanceof c.q?r(n.duration):n instanceof g.E?N(n.resolution):n instanceof p.t?L():n instanceof m.C?D(n.numberOfPersonalizeItems):n instanceof Error?s.oR.error(n.message):n instanceof a.pe?s.oR.error("An error occurred while processing your request"):s.oR.error("Processing failed")},[P,e,t,y,r,N,L,D]);return(0,n.useMemo)(()=>({serviceErrorHandler:S}),[S])}},90820:(e,t,r)=>{r.d(t,{J:()=>a});var a=function(e){return e.UPGRADE_BUTTON="upgrade_button",e.MANAGE_SUBSCRIPTION="manage_subscription",e.INSUFFICIENT_TOKEN="insufficient_token",e.CONCURRENT_GENERATION="concurrent_generation",e.PRO_MODEL_MODAL="pro_model_modal",e.PROMOTION_POPUP="promotion_popup",e.PROMOTION_BANNER="promotion_banner",e.TRAIN_NEW_MODEL="train_new_model",e.PRO_VIDEO_DURATION="pro_video_duration",e.PRO_VIDEO_RESOLUTION="pro_video_resolution",e.PRO_VIDEO_ADD_LAST_FRAME="pro_video_add_last_frame",e.PERSONALIZE_NOT_ALLOWED_FOR_PLAN="personalize_not_allowed_for_plan",e}({})},97788:(e,t,r)=>{r.d(t,{u:()=>n});var a=r(17307);class n extends a.y{log(e){this.analytics.forEach(t=>t.log(e))}constructor(e){super(),this.analytics=e}}},99588:(e,t,r)=>{r.d(t,{B:()=>i,p:()=>_});var a=r(54568),n=r(7620),s=r(97788);let o=(0,n.createContext)(null),i=e=>{let{children:t,aggregator:r,isAggregatorReady:i}=e,_=(0,n.useRef)([]),[l]=(0,n.useState)(()=>new s.u([]));l.log=e=>{i?r.log(e):_.current.push(e)},(0,n.useEffect)(()=>{i&&(_.current.forEach(e=>r.log(e)),_.current=[])},[i,r]);let u=(0,n.useMemo)(()=>({aggregator:l,isAggregatorReady:i}),[l,i]);return(0,a.jsx)(o.Provider,{value:u,children:t})},_=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useAnalyticsContext must be used within a AnalyticsContextProvider");return e}}}]);