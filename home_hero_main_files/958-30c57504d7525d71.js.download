(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[958],{4177:(e,t,s)=>{"use strict";s.d(t,{w:()=>r});var a=s(79536);let r=a.Ik({email:a.Rp()})},6322:(e,t,s)=>{"use strict";s.d(t,{R:()=>d});var a=s(16258),r=s(82806),l=s(3418),n=s(55436),i=s(29551),o=s(11021);let d=()=>(0,a.n)({mutationKey:[n.b.CREATE_ORGANIZATION_ASSET],mutationFn:async e=>(null!=e.featuredFolderId&&(0,r.setCookie)((0,o.n)(e.featuredFolderId),l.J.TRUE),i.o.createOrganizationAsset(e))})},6737:(e,t,s)=>{"use strict";s.d(t,{Bc:()=>l,Bx:()=>i,Wc:()=>n,YA:()=>o,je:()=>r,zV:()=>d});var a=s(41603);let r=async(e,t)=>(await fetch(e,{...t})).blob(),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";return new Blob([e],{type:t})},n=e=>URL.createObjectURL(e),i=async(e,t)=>{let s=await fetch(e),a=await s.blob();return new File([a],t,{type:a.type})},o=async e=>{let t=await fetch(e);return t.body?await (0,a.Tm)(t.body):null},d=async e=>fetch(e).then(e=>e.blob())},9090:(e,t,s)=>{"use strict";s.d(t,{W:()=>d});var a=s(54568),r=s(40417),l=s(51874),n=s(46626),i=s(11386),o=s(26869);let d=e=>{let{maxFiles:t=1,maxSize:s=o.Yg,accept:d={"image/png":[".png"],"image/jpeg":[".jpg",".jpeg"],"image/webp":[".webp"]},onDropAccepted:c,onDropRejected:u,maxSizeFormatted:m="".concat(o.Yg/1024/1024,"MB"),labelClassName:x,renderLabel:p,...h}=e;return(0,a.jsx)(r.Ay,{noClick:!0,onDropAccepted:c,onDropRejected:function(){for(var e,t,s=arguments.length,a=Array(s),n=0;n<s;n++)a[n]=arguments[n];if(u)return void u(...a);(null==(t=a[0][0])||null==(e=t.errors[0])?void 0:e.code)===r.O4.FileTooLarge?l.oR.error("File is bigger than ".concat(m)):l.oR.error("An error occurred while uploading the file")},accept:d,maxSize:s,maxFiles:t,...h,children:e=>{let{getRootProps:t,getInputProps:s,isDragAccept:r}=e;return(0,a.jsxs)("label",{...t({className:(0,i.cn)("border-border-secondary rounded-4 bg-surface-primary-variant hover:border-border-tertiary data-[drag-accept=true]:border-border-brand data-[drag-accept=true]:bg-surface-brand block h-45 w-full shrink-0 cursor-pointer border-1 border-dashed",x),"data-drag-accept":{isDragAccept:r}}),children:[(0,a.jsx)("input",{...s()}),p?p({maxSizeFormatted:m}):(0,a.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-3",children:[(0,a.jsx)(n.Oc1,{className:"text-content-primary size-6 stroke-[1.5]"}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,a.jsxs)("div",{className:"text-content-secondary text-label-md flex flex-wrap items-center justify-center gap-1.5 font-medium",children:[(0,a.jsx)("span",{children:"Click to upload"}),(0,a.jsx)("svg",{width:"7",height:"18",viewBox:"0 0 7 18",fill:"none",className:"text-content-tertiary max-tablet:hidden",children:(0,a.jsx)("path",{d:"M5.875 1L1.125 17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})}),(0,a.jsx)("span",{className:"max-tablet:hidden",children:"drag & drop"})]}),(0,a.jsxs)("span",{className:"text-content-tertiary text-label-sm text-center",children:["JPG, PNG, WEBP file, up to ",m]})]})]})]})}})}},10709:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});var a=s(7620),r=s(324);let l=()=>{let{selectedOrganization:e}=(0,r.a)();return(0,a.useMemo)(()=>{var t;return(null!=(t=null==e?void 0:e.totalMembers)?t:0)>=2?"Team":"Personal"},[null==e?void 0:e.totalMembers])}},13158:(e,t,s)=>{"use strict";s.d(t,{W:()=>i});var a=s(12331),r=s(59761),l=s(74679);let n=e=>{let{parentId:t,isPersonal:s,orgId:n}=e;return[(0,l.Qi)({parentId:null!=t?t:void 0,isPersonal:s,orgId:n}),(0,l.Qi)({services:[a.z1.VIDEO],parentId:null!=t?t:void 0,isPersonal:s,orgId:n}),[r.e.INFINITE,...(0,l.Qi)({parentId:null!=t?t:void 0,isPersonal:s,orgId:n})],[r.e.INFINITE,...(0,l.Qi)({services:[a.z1.VIDEO],parentId:null!=t?t:void 0,isPersonal:s,orgId:n})]]},i=e=>{let{parentId:t,isPersonal:s,orgId:a}=e;return void 0===t?n({parentId:t,isPersonal:s,orgId:a}):[...n({parentId:t,isPersonal:s,orgId:a}),...n({parentId:void 0,isPersonal:s,orgId:a})]}},16811:(e,t,s)=>{"use strict";s.d(t,{y:()=>a});let a={IMAGE_GENERATED_EVENT:"image_generated_event",IMAGE_EDITED_EVENT:"image_edited_event",CLEAR_EDITOR_SELECTION_EVENT:"clear_editor_selection_event",ASSETS_DROPPED_ON_FOLDER_EVENT:"assets_dropped_on_folder_event",VIDEO_GENERATION_STARTED_EVENT:"video_generation_started_event",IMAGE_GENERATION_STARTED_EVENT:"image_generation_started_event"}},19603:(e,t,s)=>{"use strict";s.d(t,{s:()=>l});var a=s(54568),r=s(81603);let l=e=>{let{children:t}=e;return(0,a.jsx)(r.s6,{children:t})}},21988:(e,t,s)=>{"use strict";s.d(t,{Nm:()=>n,Ut:()=>a,Wf:()=>l,jb:()=>r});let a=0xa00000,r=0x1900000,l=0xf00000,n=0x1e00000},22562:(e,t,s)=>{"use strict";s.d(t,{S:()=>i,VirtualizationProvider:()=>n});var a=s(54568),r=s(7620);let l=(0,r.createContext)(null),n=e=>{let{children:t}=e,s=(0,r.useRef)(null);return(0,a.jsx)(l.Provider,{value:{parentRef:s},children:t})},i=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useVirtualizationContext must be used within a VirtualizationLayoutProvider");return e}},26869:(e,t,s)=>{"use strict";s.d(t,{Yg:()=>l,dh:()=>n,eC:()=>r,nl:()=>i});var a=s(21988);let r={"image/jpg":[".jpg"],"image/jpeg":[".jpeg"],"image/png":[".png"],"image/webp":[".webp"]},l=a.jb,n=a.Ut,i={WIDTH:300,HEIGHT:300}},30744:(e,t,s)=>{"use strict";s.d(t,{u:()=>i});var a=s(12331),r=s(59761),l=s(74679);let n=e=>{let{parentId:t,isPersonal:s,orgId:n}=e;return[(0,l.Qi)({parentId:null!=t?t:void 0,isPersonal:s,orgId:n}),(0,l.Qi)({services:[a.z1.IMAGE],parentId:null!=t?t:void 0,isPersonal:s,orgId:n}),[r.e.INFINITE,...(0,l.Qi)({parentId:null!=t?t:void 0,isPersonal:s,orgId:n})],[r.e.INFINITE,...(0,l.Qi)({services:[a.z1.IMAGE],parentId:null!=t?t:void 0,isPersonal:s,orgId:n})]]},i=e=>{let{parentId:t,isPersonal:s,orgId:a}=e;return void 0===t?n({parentId:t,isPersonal:s,orgId:a}):[...n({parentId:t,isPersonal:s,orgId:a}),...n({parentId:void 0,isPersonal:s,orgId:a})]}},34651:function(e,t,s){let a;"undefined"!=typeof self&&self,a=s(7620),e.exports=(()=>{"use strict";var e={155:e=>{e.exports=a}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,s),l.exports}s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};s.r(r),s.d(r,{useStopwatch:()=>c,useTime:()=>u,useTimer:()=>d});var l=s(155);class n{static getTimeFromMilliseconds(e,t=!0){let s=t?Math.ceil(e/1e3):Math.floor(e/1e3),a=Math.floor(s/86400),r=Math.floor(s%86400/3600),l=Math.floor(s%3600/60),n=Math.floor(s%60);return{totalMilliseconds:e,totalSeconds:s,milliseconds:Math.floor(e%1e3),seconds:n,minutes:l,hours:r,days:a}}static getMillisecondsFromExpiry(e){let t=(new Date).getTime(),s=(null==e?void 0:e.getTime())-t;return s>0?s:0}static getMillisecondsFromPrevTime(e){let t=(new Date).getTime()-e;return t>0?t:0}static getMillisecondsFromTimeNow(){let e=new Date;return e.getTime()-60*e.getTimezoneOffset()*1e3}static getFormattedTimeFromMilliseconds(e,t){let{milliseconds:s,seconds:a,minutes:r,hours:l}=n.getTimeFromMilliseconds(e),i="",o=l;return"12-hour"===t&&(i=l>=12?"pm":"am",o=l%12),{milliseconds:s,seconds:a,minutes:r,hours:o,ampm:i}}}class i{static expiryTimestamp(e){let t=new Date(e).getTime()>0;return t||console.warn("react-timer-hook: { useTimer } Invalid expiryTimestamp settings",e),t}static onExpire(e){let t=e&&"function"==typeof e;return e&&!t&&console.warn("react-timer-hook: { useTimer } Invalid onExpire settings function",e),t}}function o(e,t){let s=(0,l.useRef)(e);(0,l.useEffect)(()=>{s.current=e}),(0,l.useEffect)(()=>{if(!t)return()=>{};let e=setInterval(()=>{var e;null==(e=null==s?void 0:s.current)||e.call(s)},t);return()=>clearInterval(e)},[t])}function d({expiryTimestamp:e,onExpire:t=()=>{},autoStart:s=!0,interval:a=1e3}){let[r,d]=(0,l.useState)(e),[c,u]=(0,l.useState)(n.getMillisecondsFromExpiry(r)),[m,x]=(0,l.useState)(s),[p,h]=(0,l.useState)(s),[v,f]=(0,l.useState)(a),b=(0,l.useCallback)(()=>{i.onExpire(t)&&t(),x(!1),f(null)},[t]),j=(0,l.useCallback)(()=>{x(!1)},[]),g=(0,l.useCallback)((e,t=!0)=>{f(a),h(t),x(t),d(e),u(n.getMillisecondsFromExpiry(e))},[a]),y=(0,l.useCallback)(()=>{let e=new Date;e.setMilliseconds(e.getMilliseconds()+c),g(e)},[c,g]),N=(0,l.useCallback)(()=>{p?(u(n.getMillisecondsFromExpiry(r)),x(!0)):y()},[r,p,y]);return o(()=>{let e=n.getMillisecondsFromExpiry(r);u(e),e<=0?b():v&&e<v&&f(e)},m?v:null),(0,l.useEffect)(()=>{i.expiryTimestamp(r)},[r]),Object.assign(Object.assign({},n.getTimeFromMilliseconds(c)),{start:N,pause:j,resume:y,restart:g,isRunning:m})}function c({autoStart:e=!0,offsetTimestamp:t,interval:s=1e3}={}){let a=t?n.getMillisecondsFromExpiry(t):0,[r,i]=(0,l.useState)((new Date).getTime()-new Date(a).getTime()),[d,u]=(0,l.useState)(n.getMillisecondsFromPrevTime(r||0)),[m,x]=(0,l.useState)(e),p=1e3-d%1e3,[h,v]=(0,l.useState)(s<p?s:p);o(()=>{h!==s&&v(s),u(n.getMillisecondsFromPrevTime(r))},m?h:null);let f=(0,l.useCallback)(()=>{i((new Date).getTime()-new Date(d).getTime()),x(!0)},[d]),b=(0,l.useCallback)(()=>{m&&(u(n.getMillisecondsFromPrevTime(r)),x(!1))},[r,m]),j=(0,l.useCallback)((e,t=!0)=>{let a=e?n.getMillisecondsFromExpiry(e):0,r=(new Date).getTime()-new Date(a).getTime(),l=n.getMillisecondsFromPrevTime(r),o=1e3-l%1e3;i(r),u(l),v(s<o?s:o),x(t)},[s]);return Object.assign(Object.assign({},n.getTimeFromMilliseconds(d,!1)),{start:f,pause:b,reset:j,isRunning:m})}function u({format:e,interval:t=1e3}={}){let[s,a]=(0,l.useState)(n.getMillisecondsFromTimeNow());return o(()=>{a(n.getMillisecondsFromTimeNow())},t),Object.assign({},n.getFormattedTimeFromMilliseconds(s,e))}return r})()},38648:(e,t,s)=>{"use strict";s.d(t,{S:()=>o});var a=s(54568),r=s(32743);s(7620);var l=s(46626),n=s(11386);let i=(0,s(615).F)("",{variants:{size:{sm:"size-4 rounded-1",md:"size-5 rounded-1.5",none:""}},defaultVariants:{size:"md"}}),o=e=>{let{className:t,size:s,intermediate:o=!1,...d}=e;return(0,a.jsx)(r.bL,{"data-slot":"checkbox",className:(0,n.cn)("group peer border-border-tertiary focus-within:border-border-tertiary-hover focus-within:ring-offset-border-primary data-[state=checked]:bg-fill-inverse data-[state=checked]:text-content-primary hover:border-border-tertiary-hover data-[state=checked]:hover:bg-fill-inverse-hover focus-visible:ring-border-inverse-hover focus-visible:ring-offset-border-primary disabled:border-border-tertiary-disabled data-[state=checked]:disabled:bg-fill-inverse-disabled relative shrink-0 border focus-visible:ring-1 focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed data-[state=checked]:border-none",i({size:s}),t),...d,children:(0,a.jsx)(r.C1,{"data-slot":"checkbox-indicator",className:(0,n.cn)("absolute inset-0 flex items-center justify-center text-current"),children:o?(0,a.jsx)("div",{className:(0,n.cn)("bg-content-primary group-disabled:bg-content-primary-disabled h-0.5 rounded-full",{"w-[9px]":"md"===s},{"w-2":"sm"===s})}):(0,a.jsx)(l.Srz,{className:(0,n.cn)("text-content-primary-inverse group-disabled:text-content-primary-inverse-disabled",{"size-4":"md"===s},{"size-3":"sm"===s})})})})}},43315:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var a=s(54568),r=s(76142),l=s(46626),n=s(54140),i=s(7620);let o=e=>{let{image:t,onDelete:s,crop:o,setCrop:d}=e,{aspect:c}=(e=>{let{aspectRatio:t,image:s,setCrop:a}=e,[l,n]=t?t.split(":"):["1","1"],o=Number(l)/Number(n);return(0,i.useEffect)(()=>{if(!s)return;let e=new Image;e.src=s,e.onload=()=>{let{naturalWidth:t,naturalHeight:s}=e;a((0,r.ge)((0,r.dS)({unit:"%",height:100,width:100},o,t,s),t,s))}},[o,s,a]),{aspect:o}})({aspectRatio:"1:1",image:t,setCrop:d});return(0,a.jsxs)("div",{className:"rounded-4 border-border-secondary relative flex h-40 w-full items-center justify-center border border-dashed",children:[(0,a.jsx)(r.Ay,{crop:o,aspect:c,className:"max-h-40",onChange:(e,t)=>d(t),locked:!0,ruleOfThirds:!0,children:(0,a.jsx)("img",{src:t,alt:"uploaded",draggable:!1})}),(0,a.jsx)(n.$,{variant:"secondary",size:"icon-xs",className:"absolute top-2 right-2",onClick:s,children:(0,a.jsx)(l.ucK,{})})]})}},48314:(e,t,s)=>{"use strict";s.d(t,{y:()=>a});let a={ADD_IMAGE_ASSET:"add-image",ADD_VIDEO_ASSET:"add-video",ADD_MULTIPLE_ASSETS:"add-multiple-assets",SELECT_MODE_ADD_IMAGE_ASSET:"select-mode-add-image-asset",SELECT_MODE_ADD_VIDEO_ASSET:"select-mode-add-video-asset",SELECT_MODE_ADD_MULTIPLE_ASSETS:"select-mode-add-multiple-assets"}},49759:(e,t,s)=>{"use strict";s.d(t,{g:()=>r,t:()=>a});let a={REGULAR:"regular",PRODUCT_HUNT:"product_hunt"},r={IMAGE:"image",VIDEO:"video"}},53163:(e,t,s)=>{"use strict";s.d(t,{KA:()=>l,ge:()=>a,i7:()=>r});let a=(e,t)=>{document.addEventListener(e,t)},r=(e,t)=>{document.removeEventListener(e,t)},l=(e,t)=>{let s=new CustomEvent(e,{detail:t});document.dispatchEvent(s)}},63004:(e,t,s)=>{"use strict";s.d(t,{MainNavigationLayout:()=>t4});var a=s(54568),r=s(62942),l=s(7620),n=s(81491),i=s(5244);let o="44px";var d=s(19136),c=s(90060),u=s(61938),m=s(51874),x=s(79536),p=s(46626),h=s(54140),v=s(33029),f=s(5275),b=s(98720),j=s(90543),g=s(79104),y=s(3397),N=s(78848),E=s(61773),_=s(21988),A=s(82873),T=s(75889),w=s(53513),C=s(9090),D=s(43315);let O=()=>(0,a.jsxs)(w.m_,{children:[(0,a.jsx)(w.k$,{asChild:!0,children:(0,a.jsx)(p.msl,{className:"size-4 cursor-pointer stroke-[1.5]"})}),(0,a.jsxs)(w.ZI,{side:"bottom",align:"start",sideOffset:10,className:"rounded-2 border-border-primary bg-surface-primary-variant flex w-86 flex-col gap-1 border p-4 drop-shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(p.vRp,{className:"text-border-brand size-3.5"})," ",(0,a.jsx)("span",{className:"text-label-md text-content-primary font-medium",children:"Folder visibility"})]}),(0,a.jsxs)("div",{className:"rounded-2 bg-fill-secondary-disabled flex flex-col gap-1 p-2",children:[(0,a.jsx)("span",{className:"text-label-sm text-content-secondary font-medium",children:"Private"}),(0,a.jsx)("span",{className:"text-label-sm text-content-tertiary",children:"Only you can access and modify this folder."})]}),(0,a.jsxs)("div",{className:"rounded-2 bg-fill-secondary-disabled flex flex-col gap-1 p-2",children:[(0,a.jsx)("span",{className:"text-label-sm text-content-secondary font-medium",children:"Teams"}),(0,a.jsx)("span",{className:"text-label-sm text-content-tertiary",children:"Shared with all team members for viewing and collaboration."})]})]})]}),I=e=>{let{control:t,crop:s,setCrop:r,organizationAssetPresetImages:l,shouldCompressRef:n,setThumbnailValue:i}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 overflow-hidden",children:[(0,a.jsx)(f.zB,{control:t,name:"thumbnail",render:e=>{let{field:t}=e;return(0,a.jsxs)(f.eI,{className:"flex flex-col gap-1.5",children:[(0,a.jsx)(f.lR,{className:"text-label-sm font-normal",children:"Add thumbnail (Optional)"}),(0,a.jsx)(f.MJ,{children:(0,a.jsx)("div",{className:"h-40 w-full",children:t.value?(0,a.jsx)(D.r,{image:t.value,onDelete:()=>{t.value&&URL.revokeObjectURL(t.value),i(null)},crop:s,setCrop:r}):(0,a.jsx)(C.W,{labelClassName:"h-40",maxSize:_.Nm,maxSizeFormatted:"30MB",onDropAccepted:e=>{let s=e[0];if(s){let e=URL.createObjectURL(s);t.onChange(e),n.current=!0}else m.oR.error("No file selected")},maxFiles:1,multiple:!1})})})]})}}),(0,a.jsx)(f.zB,{control:t,name:"thumbnail",render:e=>{let{field:t}=e;return(0,a.jsxs)(f.eI,{className:"flex flex-col gap-1.5",children:[(0,a.jsx)(f.lR,{className:"text-label-sm font-normal",children:"Or select from presets"}),(0,a.jsx)(f.MJ,{children:(0,a.jsxs)("div",{className:"scrollbar-none flex w-full items-center gap-1.5 overflow-x-auto",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{n.current=!0,t.onChange(null)},className:"rounded-2 bg-surface-primary hover:bg-surface-secondary relative flex size-20 shrink-0 cursor-pointer items-center justify-center overflow-hidden transition-colors",children:(0,a.jsx)("span",{className:"text-content-tertiary text-body-sm",children:"None"})}),l.map((e,s)=>(0,a.jsx)("button",{type:"button",onClick:()=>{n.current=!0,t.onChange(e)},className:"rounded-2 bg-surface-primary relative size-20 shrink-0 cursor-pointer overflow-hidden transition-colors",children:(0,a.jsx)(E.default,{height:80,width:80,src:e,alt:"placeholder",className:"rounded-4 size-full object-cover object-center"})},s))]})})]})}})]}),(0,a.jsx)(f.zB,{control:t,name:"isPersonal",render:e=>{let{field:t}=e;return(0,a.jsxs)(f.eI,{className:"flex items-center justify-between gap-1.5",children:[(0,a.jsxs)(f.lR,{className:"flex items-center gap-1 font-normal",children:["Folder visibility ",(0,a.jsx)(O,{})]}),(0,a.jsx)(T.Tabs,{value:t.value?"private":"teams",onValueChange:e=>t.onChange("private"===e),children:(0,a.jsxs)(T.j7,{className:"bg-surface-secondary flex items-center gap-1 rounded-full p-[3px]",children:[(0,a.jsx)(T.GI,{layoutId:"visibility-switcher",value:"private",variant:"secondary-variant",size:"xs",className:"cursor-pointer px-3 py-2",isActive:t.value,outline:!1,children:"Private"}),(0,a.jsx)(T.GI,{layoutId:"visibility-switcher",value:"teams",variant:"secondary-variant",size:"xs",className:"cursor-pointer px-3 py-2",isActive:!t.value,outline:!1,children:"Teams"})]})})]})}}),(0,a.jsx)(f.zB,{control:t,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(f.eI,{className:"flex flex-col gap-1.5",children:[(0,a.jsx)(f.lR,{className:"font-normal",children:"Name"}),(0,a.jsx)(f.MJ,{children:(0,a.jsx)(A.p,{placeholder:"Type name here",size:"lg",...t})}),(0,a.jsx)(f.C5,{})]})}})]})};var S=s(10987);let R=e=>{let{isLoading:t,ctaLabel:s,CloseComponent:r,className:l}=e;return(0,a.jsxs)("div",{className:l,children:[(0,a.jsx)(r,{asChild:!0,children:(0,a.jsx)(h.$,{variant:"secondary",children:"Cancel"})}),(0,a.jsxs)(h.$,{type:"submit",disabled:t,className:"ml-2",children:[(0,a.jsx)("span",{children:s}),t?(0,a.jsx)(S.y,{className:"size-4"}):(0,a.jsx)(p.JLc,{className:"stroke-[1.6]"})]})]})},k=x.Ik({name:x.Yj().min(1,{error:"Name is required"}).max(50,{error:"Name must be less than 50 characters"}),thumbnail:x.Yj().nullable(),isPersonal:x.zM()}),M=e=>{var t,s;let{handleOrganizationAssetAction:r,title:n,description:i,isOpen:o,setDialogOpen:d,closeDialog:x,defaultValues:E,ctaLabel:_="Create"}=e,A=(0,u.mN)({resolver:(0,c.u)(k),defaultValues:{name:null!=(t=null==E?void 0:E.name)?t:"",thumbnail:(null==E?void 0:E.thumbnail)||null,isPersonal:null==(s=null==E?void 0:E.isPersonal)||s}}),[T,w]=(0,l.useState)(),C=(0,N.jj)(),[D,O]=(0,l.useState)(!1),{serviceErrorHandler:S}=(0,j.z)(),M=(0,l.useRef)(!1),{organizationAssetPresetImages:P}=(0,y.bO)(),L=async e=>{try{let t;O(!0),e.thumbnail&&T&&(t=await (0,g.L)({imageUrl:e.thumbnail,crop:T,quality:M.current?.3:1}));try{await r({name:e.name,thumbnailBlob:t,isPersonal:e.isPersonal}),A.reset({name:"",thumbnail:null,isPersonal:!0}),x()}catch(e){S(e)}}catch(e){console.error("Error cropping image:",e),m.oR.error("Failed to process thumbnail image")}finally{O(!1)}};return C?(0,a.jsx)(b.cj,{open:o,onOpenChange:d,children:(0,a.jsxs)(b.h,{className:"rounded-t-4 flex flex-col gap-6 p-4",side:"bottom",children:[(0,a.jsxs)(b.Fm,{className:"flex flex-col items-start gap-1 border-none p-0",children:[(0,a.jsx)(b.qp,{className:"text-content-primary text-heading-md font-semibold",children:n}),(0,a.jsx)(b.Qs,{className:"text-content-tertiary text-body-sm",children:i})]}),(0,a.jsx)(b.kN,{asChild:!0,className:"absolute top-4.5 right-4 z-10",children:(0,a.jsx)(h.$,{variant:"ghost",size:"icon-sm",children:(0,a.jsx)(p.w0d,{})})}),(0,a.jsx)("form",{onSubmit:A.handleSubmit(L),className:"scrollbar-none flex size-full flex-col gap-6",children:(0,a.jsxs)(f.lV,{...A,children:[(0,a.jsx)("div",{className:"flex flex-col gap-6",children:(0,a.jsx)(I,{control:A.control,crop:T,setCrop:w,organizationAssetPresetImages:P,shouldCompressRef:M,setThumbnailValue:e=>A.setValue("thumbnail",e)})}),(0,a.jsx)(R,{isLoading:D,ctaLabel:_,CloseComponent:b.kN,className:"mt-auto flex items-center justify-end gap-2 border-none"})]})})]})}):(0,a.jsx)(v.lG,{onOpenChange:d,open:o,children:(0,a.jsx)(v.Cf,{className:"w-139 gap-6 p-6",asChild:!0,children:(0,a.jsx)("form",{onSubmit:A.handleSubmit(L),children:(0,a.jsxs)(f.lV,{...A,children:[(0,a.jsxs)(v.c7,{className:"flex flex-col items-start gap-1 border-none p-0",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,a.jsx)(v.L3,{className:"text-content-primary text-heading-md font-semibold",children:n}),(0,a.jsx)(v.De,{btnProps:{size:"icon-sm"}})]}),(0,a.jsx)(v.rr,{className:"text-content-tertiary text-body-sm",children:i})]}),(0,a.jsx)(v.R4,{className:"w-full gap-6 overflow-hidden",children:(0,a.jsx)(I,{control:A.control,crop:T,setCrop:w,organizationAssetPresetImages:P,shouldCompressRef:M,setThumbnailValue:e=>A.setValue("thumbnail",e)})}),(0,a.jsx)(v.Es,{className:"gap-2 border-none",children:(0,a.jsx)(R,{isLoading:D,ctaLabel:_,CloseComponent:v.HM})})]})})})})};var P=s(18010),L=s(54388),z=s(10709),F=s(47672),V=s(6322),G=s(99588),U=s(66727),B=s(49896),J=s(81233);let $=()=>{let{isOpen:e,setDialogOpen:t,closeDialog:s}=(0,B.s)(U.D.CREATE_NEW_ORGANIZATION_FOLDER_DIALOG),{selectedOrganizationId:r}=(0,F.v)(),n=(0,V.R)(),{fireAnalyticsForFolderCreation:i}=(()=>{let{aggregator:e}=(0,G.p)(),{computeUserAnalyticsInfo:t}=(0,L.U)(),s=(0,z.O)();return{fireAnalyticsForFolderCreation:(0,l.useCallback)(a=>{let{folderName:r,projectName:l,isPersonal:n}=a,{page:i,userStatus:o,userPlan:d,userPlanPeriod:c,source:u,id:m,email:x}=t();e.log(P.M.folder.withProperties({folder_name:r,project_name:l,page_name:i,source:u,user_account_status:o,user_plan:d,user_plan_period:c,distinct_id:m,email:x,folder_visibility:n?"Private":"Team",user_profile:s}))},[e,t,s])}})(),{isPersonal:o}=(0,J.$)();return(0,a.jsx)(M,{handleOrganizationAssetAction:async e=>{await n.mutateAsync({name:e.name,type:d.KJ.FOLDER,file:e.thumbnailBlob,orgId:r,isPersonal:e.isPersonal}),i({folderName:e.name,projectName:"Private",isPersonal:e.isPersonal})},defaultValues:{isPersonal:o},title:"Create a folder",description:"Choose a unique name for your folder.",isOpen:e,setDialogOpen:t,closeDialog:s},o?"private":"team")};var H=s(16258),Z=s(55436),K=s(29551),W=s(15897);let q=()=>{var e,t;let{isOpen:s,setDialogOpen:r,closeDialog:l}=(0,B.s)(U.D.EDIT_ORGANIZATION_FOLDER_DIALOG),{editFolder:n,setEditFolder:i}=(0,W.T)(),o=(0,H.n)({mutationKey:[Z.b.UPDATE_ORGANIZATION_ASSET],mutationFn:async e=>K.o.updateOrganizationAsset(e)});return(0,a.jsx)(M,{ctaLabel:"Save",defaultValues:{name:null==n?void 0:n.title,thumbnail:(null==n||null==(e=n.url)?void 0:e.thumbnail)?"".concat(null==n||null==(t=n.url)?void 0:t.thumbnail,"?v=").concat(null==n?void 0:n.updatedAt):null,isPersonal:null==n?void 0:n.isPersonal},handleOrganizationAssetAction:async e=>{if(!n)return void m.oR.error("Folder not found");await o.mutateAsync({name:e.name,file:e.thumbnailBlob,isPersonal:e.isPersonal,id:n.uuid})},title:"Folder details",description:"Edit details for your folder.",isOpen:s&&null!=n,setDialogOpen:e=>{r(e),e||i(null)},closeDialog:()=>{l(),i(null)}},null==n?void 0:n.uuid)},Q=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($,{}),(0,a.jsx)(q,{})]});var Y=s(1640),X=s(80498),ee=s(5040);let et=(0,l.createContext)(void 0),es=e=>{let{children:t}=e,[s,r]=(0,l.useState)(!1),n=(0,l.useRef)(null);return(0,a.jsx)(et.Provider,{value:{isCollapsed:s,setIsCollapsed:r,virtualRef:n},children:t})},ea=()=>{let e=(0,l.useContext)(et);if(!e)throw Error("useFoldersSidebarContext must be used within a FoldersSidebarProvider");return e};var er=s(75036),el=s(90916),en=s(41927);let ei=e=>{let{children:t,title:s,description:r}=e;return(0,a.jsxs)("div",{className:"rounded-4 flex w-52 shrink-0 flex-col gap-1 p-3 text-center",children:[(0,a.jsx)("span",{className:"text-label-sm text-content-primary",children:s}),(0,a.jsx)("span",{className:"text-label-sm text-content-tertiary",children:r}),t]})};var eo=s(25989),ed=s(89536),ec=s(11386);let eu={Root:e=>{let{isActive:t=!1,onClick:s,className:r,...l}=e;return(0,a.jsx)("button",{className:(0,ec.cn)((0,ed.OZ)({size:"sm"}),"group/sidebar-item h-8 shrink-0 py-1 pr-1 pl-2",r),type:"button",onClick:e=>{null==s||s(e),(0,ee.Z)(e)},"data-state":t?"active":"inactive",...l})},Content:e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"text-label-md text-content-primary truncate whitespace-nowrap",children:t})},Start:e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"shrink-0 *:[*]:size-4 *:[*]:shrink-0",children:t})},ImageIcon:e=>{let{alt:t,src:s}=e;return(0,a.jsx)("div",{className:"rounded-1 border-border-primary relative shrink-0 overflow-hidden border",children:(0,a.jsx)(E.default,{fill:!0,src:s,alt:t,className:"size-full object-cover object-center"})})},End:e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"invisible ml-auto shrink-0 group-hover/sidebar-item:visible has-[div[data-state=open]]:visible",children:t})}},em=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"flex flex-col gap-1 px-1 transition-opacity group-data-[state=collapsed]/sidebar:pointer-events-none group-data-[state=collapsed]/sidebar:invisible group-data-[state=collapsed]/sidebar:absolute group-data-[state=collapsed]/sidebar:-top-full group-data-[state=collapsed]/sidebar:w-0 group-data-[state=collapsed]/sidebar:opacity-0",children:t})},ex={Root:e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"rounded-2 flex items-center gap-0.5 p-1",children:t})},Start:e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"text-content-tertiary p-[5px] *:[*]:size-3.5 *:[*]:shrink-0",children:t})},Content:e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"text-content-tertiary text-label-sm w-full font-medium",children:t})},CTA:e=>{let{onClick:t,...s}=e;return(0,a.jsx)(h.$,{variant:"secondary",shape:"pill",size:"icon-xs",className:"shrink-0",onClick:e=>{null==t||t(e),(0,ee.Z)(e)},...s,children:(0,a.jsx)(p.c11,{})})}},ep=()=>{var e;let{data:t,isLoading:s,isError:r}=(0,en.N)(),{selectedFolder:l}=(0,el.X)(),{openFolder:n}=(0,el.E)(),i=null!=(e=null==t?void 0:t.data.assets)?e:[];return s?(0,a.jsx)(er.E,{className:"rounded-2 h-20 w-full"}):r?(0,a.jsx)("div",{className:"text-content-critical text-label-md",children:"An unexpected error occurred"}):(0,a.jsxs)(a.Fragment,{children:[0===i.length&&(0,a.jsx)(ei,{title:"No pinned assets",description:"Pin assets to your sidebar for quick access"}),i.map(e=>{var t;return(0,a.jsxs)(eu.Root,{isActive:(null==l?void 0:l.uuid)===e.uuid,onClick:()=>n(e),children:[(0,a.jsx)(eu.Start,{children:(null==(t=e.url)?void 0:t.thumbnail)?(0,a.jsx)(eu.ImageIcon,{src:e.url.thumbnail,alt:"Asset"}):e.isPersonal?(0,a.jsx)(p.Bxq,{className:"shrink-0"}):(0,a.jsx)(p.P3V,{className:"shrink-0"})}),(0,a.jsx)(eu.Content,{children:e.title}),(0,a.jsx)("div",{className:"pointer-events-none visible absolute inset-y-0 right-3 my-auto ml-auto size-4 shrink-0 group-hover/sidebar-item:invisible has-[div[data-state=open]]:invisible",children:e.isPersonal?(0,a.jsx)(p.vRp,{className:"text-content-tertiary size-4 stroke-[1.4]"}):(0,a.jsx)(p.n_v,{className:"text-content-tertiary size-4 stroke-[1.4]"})}),(0,a.jsx)(eu.End,{children:(0,a.jsx)(eo.f,{folder:e,isPinned:!0})})]},e.uuid)})]})},eh=()=>{let{data:e,isLoading:t,isError:s}=(0,en.N)();return t?(0,a.jsx)(er.E,{className:"rounded-2 h-20 w-full group-data-[state=collapsed]/sidebar:hidden"}):s?(0,a.jsx)("div",{className:"text-content-critical text-label-md group-data-[state=collapsed]/sidebar:hidden",children:"An unexpected error occurred"}):(null==e?void 0:e.data.assets.length)===0?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.w,{className:"rounded-full group-data-[state=collapsed]/sidebar:hidden"}),(0,a.jsxs)(em,{children:[(0,a.jsxs)(ex.Root,{children:[(0,a.jsx)(ex.Start,{children:(0,a.jsx)(p.tsw,{})}),(0,a.jsx)(ex.Content,{children:"Pinned"})]}),(0,a.jsx)(ep,{})]})]})};var ev=s(70678),ef=s(3418),eb=s(96578),ej=s(16811),eg=s(22360),ey=s(66120),eN=s(61635),eE=s(69825);let e_=()=>{let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{t(!0)},s=()=>{t(!1)};return document.addEventListener("dragstart",e),document.addEventListener("dragend",s),()=>{document.removeEventListener("dragstart",e),document.removeEventListener("dragend",s)}},[]),e};var eA=s(48314),eT=s(53163),ew=s(11021);let eC=e=>{let{className:t,...s}=e,r=(0,l.useId)();return(0,a.jsxs)(eu.Root,{...s,className:(0,ec.cn)(t,"*:[*]:pointer-events-none"),id:"".concat(n.G.SEE_MORE_SIDEBAR_ITEM,"-").concat(r),children:[(0,a.jsx)(eu.Start,{children:(0,a.jsx)(p.HCC,{})}),(0,a.jsx)(eu.Content,{children:"See more"})]})};var eD=s(85931);let eO=e=>{let{isPersonal:t}=e,{handleOpenCreateFolderDialog:s}=(0,eD.w)();return(0,a.jsx)(ex.CTA,{onClick:()=>s(t)})},eI=()=>{let{toggleDialog:e,isOpen:t}=(0,B.s)(U.D.PRIVATE_SEE_MORE_POPOVER);return(0,a.jsx)(eC,{isActive:t,onClick:()=>{e()}})},eS=e=>{var t,s;let{folder:r,disabled:n}=e,{openFolder:i}=(0,el.E)(),{selectedFolder:o}=(0,el.X)(),{featuredFolderTooltip:d}=(0,y.bO)(),c=(null==o?void 0:o.uuid)===r.uuid,u=(0,ev.getCookie)((0,ew.Z)(r.uuid))===ef.J.TRUE;return(0,l.useEffect)(()=>{c&&!u&&(0,ev.setCookie)((0,ew.Z)(r.uuid),ef.J.TRUE)},[c,u,r.uuid]),(0,a.jsxs)(w.m_,{children:[(0,a.jsx)(w.k$,{asChild:!0,children:(0,a.jsxs)("button",{onClick:()=>{i(r)},className:"group/sidebar-item rounded-2.5 relative inline-flex h-8 shrink-0 cursor-pointer overflow-hidden p-px focus:outline-none disabled:pointer-events-none disabled:opacity-30","aria-label":null==(t=r.settings)?void 0:t.name,type:"button","data-state":c?"active":"inactive",disabled:n,children:[(0,a.jsx)("span",{className:(0,ec.cn)("pointer-events-none absolute inset-[-1000%] animate-[spin_2s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#E6D5FF_0%,#8A3FFC_100%)]",{hidden:u||c})}),(0,a.jsx)("div",{className:"bg-background pointer-events-none z-10 flex size-full items-center rounded-[9px]",children:(0,a.jsxs)("div",{className:"group-hover/sidebar-item:bg-fill-brand-secondary text-label-md text-content-primary group-data-[state=active]/sidebar-item:bg-fill-brand-secondary inline-flex size-full cursor-pointer items-center justify-start gap-2 truncate overflow-hidden rounded-[9px] py-1 pl-[7px] text-left whitespace-nowrap backdrop-blur-3xl transition-colors",children:[(0,a.jsx)(p.xFz,{className:"size-4 shrink-0"}),(0,a.jsx)("span",{children:null==(s=r.settings)?void 0:s.name})]})})]})}),(0,a.jsxs)(w.ZI,{side:"right",sideOffset:6,align:"center",className:"rounded-2 border-border-elevated bg-surface-elevated flex max-w-66.5 flex-col gap-1 border p-3 drop-shadow-md",children:[(0,a.jsx)("p",{className:"text-label-md text-content-primary font-medium",children:d.title}),(0,a.jsx)("p",{className:"text-label-md text-content-tertiary",children:d.description})]})]})},eR=()=>{var e,t;let{data:s,isLoading:r,isError:n}=(0,ey.i)({isPersonal:!0}),{selectedFolder:i,isPersonal:o,privateDraftFolder:c,isDraftFolder:u,isFeaturedFolder:x}=(0,el.X)(),{openFolder:h}=(0,el.E)(),{mutateAsync:v}=(0,eE.d)(),[f,b]=(0,l.useState)(null),j=(0,eN.S)(),g=r||j.isLoading,N=n||j.isError,{defaultSetting:E}=(0,y.bO)(),_=E.multiSelect.maxMovableAssets,A=(0,l.useMemo)(()=>{var e;return null==s||null==(e=s.data)?void 0:e.assets.reduce((e,t)=>{var s,a;return(null==(s=t.settings)?void 0:s.featuredFolderId)!=null&&(e[null==(a=t.settings)?void 0:a.featuredFolderId]=t),e},{})},[null==s?void 0:s.data.assets]),T=!1===o,w=null!=(t=null==s?void 0:s.data.assets.filter(e=>e.type!==d.KJ.DRAFT))?t:[],C=w.slice(0,4),D=i&&C.some(e=>e.uuid===i.uuid),O=!i||D||!0!==i.isPersonal||u||x?C:[i,...C.slice(0,1)],I=e=>{(0,ee.Z)(e)},S=e=>{(0,ee.Z)(e),b(null)},R=async(e,t)=>{if((0,ee.Z)(e),b(null),(0,eT.KA)(ej.y.ASSETS_DROPPED_ON_FOLDER_EVENT),x)return void m.oR.error("You cannot move assets from a featured folder");if(T)return void m.oR.error("You cannot move assets from a team folder to a private folder");if((null==i?void 0:i.uuid)===t.uuid)return void m.oR.error("You cannot move assets to the same folder");try{let s=e.dataTransfer.getData("application/json");if(!s)return;let a=JSON.parse(s),r=[];switch(a.action){case eA.y.SELECT_MODE_ADD_MULTIPLE_ASSETS:case eA.y.ADD_MULTIPLE_ASSETS:r=a.asset.map(e=>e.uuid);break;case eA.y.SELECT_MODE_ADD_IMAGE_ASSET:case eA.y.ADD_IMAGE_ASSET:case eA.y.SELECT_MODE_ADD_VIDEO_ASSET:case eA.y.ADD_VIDEO_ASSET:r=[a.asset.uuid]}if(0===r.length)return;if(r.length>_)return void m.oR.error("You can only move up to ".concat(_," assets at a time"));if(!0===o&&!1===t.isPersonal&&"true"!==localStorage.getItem(eg.C.HIDE_MOVE_PERSONAL_TO_TEAM_CONFIRMATION_DIALOG)&&!await eb.i.call({title:"Move folder from private to public",description:"By moving a private folder to a team folder, all content within will be automatically shared with team members.",confirmButtonText:"Move",containerClassName:"max-h-[min(calc(100vh-224px),200px)] max-w-[min(calc(100vw-24px),586px)]",cancelButtonText:"Cancel",variant:"primary",checkboxText:"Don't show this again",containerAttributes:{"data-select-mode-prevent-deselect":"true"},onCheckedChange:async e=>{e&&localStorage.setItem(eg.C.HIDE_MOVE_PERSONAL_TO_TEAM_CONFIRMATION_DIALOG,"true")}}))return;await v({ids:r,parentId:t.uuid},{onSuccess:()=>{(0,eT.KA)(ej.y.CLEAR_EDITOR_SELECTION_EVENT)}})}catch(e){e instanceof Error?m.oR.error(e.message):m.oR.error("Failed to move assets")}},k=e_();return g?(0,a.jsx)(er.E,{className:"rounded-2 h-20 w-full"}):N?(0,a.jsx)("div",{className:"text-content-critical text-label-md",children:"An unexpected error occurred"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eu.Root,{isActive:u&&o,onClick:()=>h(null!=c?c:null),className:(0,ec.cn)({"opacity-30":k}),disabled:k,children:[(0,a.jsx)(eu.Start,{children:(0,a.jsx)(p.Bxq,{className:"shrink-0"})}),(0,a.jsx)(eu.Content,{children:"All creations"})]}),null==(e=j.data)?void 0:e.data.assets.map(e=>(null==A?void 0:A[e.uuid])||(0,ev.getCookie)((0,ew.n)(e.uuid))===ef.J.TRUE?null:(0,a.jsx)(eS,{folder:e,disabled:k},e.uuid)),O.map(e=>{var t;let s=!T&&f===e.uuid,r=k&&(T||(null==i?void 0:i.type)===d.KJ.DRAFT||x);return(0,a.jsxs)(eu.Root,{isActive:(null==i?void 0:i.uuid)===e.uuid,onClick:()=>h(e),onDragEnter:t=>((e,t)=>{!T&&(null==i?void 0:i.uuid)!==t.uuid&&((0,ee.Z)(e),e.dataTransfer.types.includes("application/json")&&b(t.uuid))})(t,e),onDragOver:I,onDragLeave:S,onDrop:t=>R(t,e),className:(0,ec.cn)("border-1 border-transparent",{"border-border-brand bg-fill-brand-secondary-disabled border-1 border-dashed [&>*]:pointer-events-none":s&&!r,"opacity-30":r}),disabled:r,children:[(0,a.jsx)(eu.Start,{children:(null==(t=e.url)?void 0:t.thumbnail)?(0,a.jsx)(eu.ImageIcon,{src:e.url.thumbnail,alt:"Folder"}):(0,a.jsx)(p.Bxq,{className:"shrink-0"})}),(0,a.jsx)(eu.Content,{children:e.title}),(0,a.jsx)(eu.End,{children:(0,a.jsx)(eo.f,{folder:e})})]},e.uuid)}),w.length>O.length&&(0,a.jsx)(eI,{})]})},ek=()=>(0,a.jsxs)(em,{children:[(0,a.jsxs)(ex.Root,{children:[(0,a.jsx)(ex.Start,{children:(0,a.jsx)(p.vRp,{})}),(0,a.jsx)(ex.Content,{children:"Private"}),(0,a.jsx)(eO,{isPersonal:!0})]}),(0,a.jsx)(eR,{})]});var eM=s(31702);let eP=()=>{let{toggleDialog:e,isOpen:t}=(0,B.s)(U.D.TEAMSPACE_SEE_MORE_POPOVER);return(0,a.jsx)(eC,{isActive:t,onClick:()=>{e()}})},eL=()=>{var e,t;let{data:s,isLoading:r,isError:n}=(0,ey.i)({isPersonal:!1}),{selectedFolder:i,isDraftFolder:o,isPersonal:c,teamDraftFolder:u,isFeaturedFolder:x}=(0,el.X)(),{openFolder:h}=(0,el.E)(),{mutateAsync:v}=(0,eE.d)(),[f,b]=(0,l.useState)(null),{defaultSetting:j}=(0,y.bO)(),g=j.multiSelect.maxMovableAssets,N=null!=(t=null==s||null==(e=s.data.assets)?void 0:e.filter(e=>e.type!==d.KJ.DRAFT))?t:[],E=N.slice(0,4),_=i&&E.some(e=>e.uuid===i.uuid),A=!i||_||!1!==i.isPersonal||o||x?E:[i,...E.slice(0,1)],T=e_(),w=e=>{(0,ee.Z)(e)},C=e=>{(0,ee.Z)(e),b(null)},D=async(e,t)=>{if(b(null),(0,ee.Z)(e),(0,eT.KA)(ej.y.ASSETS_DROPPED_ON_FOLDER_EVENT),x)return void m.oR.error("You cannot move assets from a featured folder");if((null==i?void 0:i.uuid)===t.uuid)return void m.oR.error("You cannot move assets to the same folder");try{let s=e.dataTransfer.getData("application/json");if(!s)return;let a=JSON.parse(s),r=[];switch(a.action){case eA.y.SELECT_MODE_ADD_MULTIPLE_ASSETS:case eA.y.ADD_MULTIPLE_ASSETS:r=a.asset.map(e=>e.uuid);break;case eA.y.SELECT_MODE_ADD_IMAGE_ASSET:case eA.y.ADD_IMAGE_ASSET:case eA.y.SELECT_MODE_ADD_VIDEO_ASSET:case eA.y.ADD_VIDEO_ASSET:r=[a.asset.uuid]}if(0===r.length)return;if(r.length>g)return void m.oR.error("You can only move up to ".concat(g," assets at a time"));if(!0===c&&!1===t.isPersonal&&"true"!==localStorage.getItem(eg.C.HIDE_MOVE_PERSONAL_TO_TEAM_CONFIRMATION_DIALOG)&&!await eb.i.call({title:"Move folder from private to public",description:"By moving a private folder to a team folder, all content within will be automatically shared with team members.",confirmButtonText:"Move",containerClassName:"max-h-[min(calc(100vh-224px),200px)] max-w-[min(calc(100vw-24px),586px)]",cancelButtonText:"Cancel",variant:"primary",checkboxText:"Don't show this again",containerAttributes:{"data-select-mode-prevent-deselect":"true"},onCheckedChange:async e=>{e&&localStorage.setItem(eg.C.HIDE_MOVE_PERSONAL_TO_TEAM_CONFIRMATION_DIALOG,"true")}}))return;await v({ids:r,parentId:t.uuid},{onSuccess:()=>{(0,eT.KA)(ej.y.CLEAR_EDITOR_SELECTION_EVENT)}})}catch(e){e instanceof Error?m.oR.error(e.message):m.oR.error("Failed to move assets")}};return r?(0,a.jsx)(er.E,{className:"rounded-2 h-20 w-full"}):n?(0,a.jsx)("div",{className:"text-content-critical text-label-md",children:"An unexpected error occurred"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eu.Root,{isActive:o&&!c,onClick:()=>h(null!=u?u:null),className:(0,ec.cn)({"opacity-30":T}),disabled:T,children:[(0,a.jsx)(eu.Start,{children:(0,a.jsx)(p.P3V,{className:"shrink-0"})}),(0,a.jsx)(eu.Content,{children:"All creations"})]}),A.map(e=>{var t;let s=f===e.uuid,r=T&&x;return(0,a.jsxs)(eu.Root,{isActive:(null==i?void 0:i.uuid)===e.uuid,onClick:()=>h(e),onDragEnter:t=>((e,t)=>{(null==i?void 0:i.uuid)!==t.uuid&&((0,ee.Z)(e),e.dataTransfer.types.includes("application/json")&&b(t.uuid))})(t,e),onDragOver:w,onDragLeave:C,onDrop:t=>D(t,e),className:(0,ec.cn)("border-1 border-transparent",{"border-border-brand bg-fill-brand-secondary-disabled border-1 border-dashed [&>*]:pointer-events-none":s&&!r,"opacity-30":r}),disabled:r,children:[(0,a.jsx)(eu.Start,{children:(null==(t=e.url)?void 0:t.thumbnail)?(0,a.jsx)(eu.ImageIcon,{src:e.url.thumbnail,alt:"Folder"}):(0,a.jsx)(p.P3V,{className:"shrink-0"})}),(0,a.jsx)(eu.Content,{children:e.title}),(0,a.jsx)(eu.End,{children:(0,a.jsx)(eo.f,{folder:e})})]},e.uuid)}),N.length>A.length&&(0,a.jsx)(eP,{}),(0,a.jsx)(eM.D,{variant:"primary",setIsDropdownOpen:()=>{}})]})},ez=()=>(0,a.jsxs)(em,{children:[(0,a.jsxs)(ex.Root,{children:[(0,a.jsx)(ex.Start,{children:(0,a.jsx)(p.n_v,{})}),(0,a.jsx)(ex.Content,{children:"Teamspace"}),(0,a.jsx)(eO,{isPersonal:!1})]}),(0,a.jsx)(eL,{})]}),eF=()=>{let{isOpen:e,toggleDialog:t,setDialogOpen:s}=(0,B.s)(U.D.DISPLAY_FOLDERS_POPOVER),{isCollapsed:r}=ea();return(0,l.useEffect)(()=>{r&&s(!1)},[r,s]),(0,a.jsxs)(X.AM,{open:e&&r,onOpenChange:s,children:[(0,a.jsx)("div",{className:"rounded-2 p-1",children:(0,a.jsx)(X.Wv,{asChild:!0,children:(0,a.jsx)("button",{type:"button",className:"group rounded-2 border-border-primary bg-fill-primary-variant hover:border-border-primary-hover data-[state=open]:border-content-secondary hidden size-8 shrink-0 cursor-pointer border transition-all group-data-[state=collapsed]/sidebar:block data-[state=open]:p-0.5",onClick:e=>{t(),(0,ee.Z)(e)},"data-state":e?"open":"closed",children:(0,a.jsx)("div",{className:"rounded-2 group-data-[state=open]:rounded-1.5 group-data-[state=open]:bg-fill-primary-variant-hover group-hover:bg-fill-primary-variant-hover flex size-full items-center justify-center transition-all",children:(0,a.jsx)(p.f45,{className:"size-4.5"})})})})}),(0,a.jsxs)(X.hl,{className:"rounded-4 border-border-primary bg-fill-elevated flex w-60 flex-col items-stretch gap-2 p-3",side:"right",align:"start",sideOffset:8,children:[(0,a.jsx)(ez,{}),(0,a.jsx)(Y.w,{className:"rounded-full"}),(0,a.jsx)(ek,{}),(0,a.jsx)(Y.w,{className:"rounded-full"}),(0,a.jsx)(eh,{})]})]})};var eV=s(37583),eG=s(20844);let eU=()=>{let{isCollapsed:e,setIsCollapsed:t}=ea();return(0,a.jsxs)(h.$,{variant:"ghost",size:"icon-sm",className:"shrink-0 transition-opacity group-hover/sidebar:!visible group-hover/sidebar:!opacity-100 group-hover/sidebar:transition-none group-data-[state=collapsed]/sidebar:invisible group-data-[state=collapsed]/sidebar:absolute group-data-[state=collapsed]/sidebar:inset-0 group-data-[state=collapsed]/sidebar:m-auto group-data-[state=collapsed]/sidebar:opacity-0",onClick:()=>{t(!e)},children:[(0,a.jsx)(p.dLE,{className:"group-data-[state=collapsed]/sidebar:hidden"}),(0,a.jsx)(p.WK,{className:"hidden group-data-[state=collapsed]/sidebar:block"})]})},eB=()=>(0,a.jsxs)("div",{className:"rounded-2.5 relative flex items-center justify-between py-[5px] pr-[5px] pl-2 group-data-[state=collapsed]/sidebar:p-2",children:[(0,a.jsx)(eV.i,{href:eG.ze.HOME,className:"group-data-[state=collapsed]/sidebar:group-hover/sidebar:invisible group-data-[state=collapsed]/sidebar:group-hover/sidebar:opacity-0",prefetch:!0,children:(0,a.jsx)(p.xFz,{className:"size-6.5 shrink-0"})}),(0,a.jsx)(eU,{})]}),eJ=()=>{let{isCollapsed:e}=ea();return(0,a.jsxs)(eV.i,{href:eG.ze.GET_HELP,className:(0,ec.cn)("text-content-primary flex items-center gap-2 rounded-full px-2 transition-colors",{"size-8 px-0":e}),onClick:e=>{e.stopPropagation()},children:[(0,a.jsx)(p.JGH,{className:"text-content-primary size-4"}),!e&&(0,a.jsx)("span",{className:"text-label-md",children:"Help"})]})};var e$=s(223),eH=s.n(e$),eZ=s(3165);let eK=e=>{let{children:t,isOpen:s,setDialogOpen:r,virtualRef:l}=e,{isCollapsed:i}=ea();return(0,a.jsxs)(X.AM,{open:s,onOpenChange:r,children:[(0,a.jsx)(X.dT,{virtualRef:l}),(0,a.jsx)(X.hl,{disableZoomAnimation:!0,className:"bg-fill-primary-variant border-border-primary top-0 left-0 flex h-[100dvh] w-60 flex-col gap-4 rounded-none border-x-1 px-3 py-4 ring-0 drop-shadow-none",side:"right",sideOffset:i?-66:0,onClick:e=>{(0,ee.Z)(e)},onInteractOutside:e=>{var t;if(e.target instanceof HTMLElement&&(null==(t=e.target.id)?void 0:t.startsWith(n.G.SEE_MORE_SIDEBAR_ITEM)))return void e.preventDefault()},children:t})]})},eW={Root:e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"flex items-start gap-2 px-1 pt-1",children:t})},BackButton:e=>{let{className:t,...s}=e;return(0,a.jsx)("button",{type:"button",className:(0,ec.cn)("shrink-0",t),...s,children:(0,a.jsx)(p.Zxx,{className:"text-content-secondary size-4 shrink-0 cursor-pointer"})})},Content:e=>{let{title:t,description:s}=e;return(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsx)("span",{className:"text-content-primary text-label-md",children:t}),(0,a.jsx)("span",{className:"text-label-xs text-content-tertiary",children:s})]})}},eq={Root:e=>{let{children:t,isActive:s=!1,...r}=e;return(0,a.jsx)("button",{className:"rounded-2 hover:bg-fill-primary-variant-hover data-[state=active]:bg-fill-primary-variant-hover group/see-more-popover-item flex cursor-pointer items-center gap-2 p-1 text-left transition-colors","data-state":s?"active":"inactive",...r,children:t})},ImageIcon:e=>{let{src:t,alt:s}=e;return(0,a.jsx)("div",{className:"rounded-2 border-border-primary relative size-8 shrink-0 overflow-hidden border",children:(0,a.jsx)(E.default,{fill:!0,src:t,alt:s,className:"size-full object-cover object-center"})})},Content:e=>{let{title:t,description:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-content-primary text-label-sm",children:t}),(0,a.jsx)("span",{className:"text-label-xs text-content-tertiary",children:s})]})},Start:e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"text-content-primary size-8 shrink-0 *:[*]:shrink-0 *:[svg]:size-8",children:t})},End:e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"invisible ml-auto shrink-0 group-hover/see-more-popover-item:visible has-[div[data-state=open]]:visible",children:t})}},eQ=()=>{var e;let{virtualRef:t}=ea(),{isOpen:s,setDialogOpen:r,closeDialog:l}=(0,B.s)(U.D.PRIVATE_SEE_MORE_POPOVER),{data:n}=(0,ey.i)({isPersonal:!0}),{selectedFolder:i}=(0,el.X)(),{openFolder:o}=(0,el.E)(),c=null!=(e=null==n?void 0:n.data.assets)?e:[];return(0,a.jsxs)(eK,{isOpen:s,setDialogOpen:r,virtualRef:t,children:[(0,a.jsxs)(eW.Root,{children:[(0,a.jsx)(eW.BackButton,{onClick:l}),(0,a.jsx)(eW.Content,{title:"Private folders",description:"-"}),(0,a.jsx)(eO,{isPersonal:!0})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2 overflow-y-auto",children:c.map(e=>{var t,s,r;return e.type===d.KJ.DRAFT?null:(0,a.jsxs)(eq.Root,{isActive:(null==i?void 0:i.uuid)===e.uuid,onClick:()=>o(e),children:[(0,a.jsx)(eq.Start,{children:(null==(t=e.url)?void 0:t.thumbnail)?(0,a.jsx)(eq.ImageIcon,{src:null!=(r=null==(s=e.url)?void 0:s.thumbnail)?r:eZ.W.DEFAULT,alt:e.title}):(0,a.jsx)(p.Bxq,{className:"shrink-0"})}),(0,a.jsx)(eq.Content,{title:e.title,description:eH()(e.createdAt).fromNow()})]},e.uuid)})})]})},eY=()=>{var e;let{virtualRef:t}=ea(),{isOpen:s,setDialogOpen:r,closeDialog:l}=(0,B.s)(U.D.TEAMSPACE_SEE_MORE_POPOVER),{data:n}=(0,ey.i)({isPersonal:!1}),{selectedFolder:i}=(0,el.X)(),{openFolder:o}=(0,el.E)(),c=null!=(e=null==n?void 0:n.data.assets)?e:[];return(0,a.jsxs)(eK,{isOpen:s,setDialogOpen:r,virtualRef:t,children:[(0,a.jsxs)(eW.Root,{children:[(0,a.jsx)(eW.BackButton,{onClick:l}),(0,a.jsx)(eW.Content,{title:"Teamspace folders",description:"-"}),(0,a.jsx)(eO,{isPersonal:!1})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2 overflow-y-auto",children:c.map(e=>{var t,s,r;return e.type===d.KJ.DRAFT?null:(0,a.jsxs)(eq.Root,{isActive:(null==i?void 0:i.uuid)===e.uuid,onClick:()=>o(e),children:[(0,a.jsx)(eq.Start,{children:(null==(t=e.url)?void 0:t.thumbnail)?(0,a.jsx)(eq.ImageIcon,{src:null!=(r=null==(s=e.url)?void 0:s.thumbnail)?r:eZ.W.DEFAULT,alt:e.title}):(0,a.jsx)(p.P3V,{className:"shrink-0"})}),(0,a.jsx)(eq.Content,{title:e.title,description:eH()(e.createdAt).fromNow()}),(0,a.jsx)(eq.End,{children:(0,a.jsx)(eo.f,{folder:e})})]},e.uuid)})})]})},eX=l.memo(()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eB,{}),(0,a.jsx)(ez,{}),(0,a.jsx)(Y.w,{className:"rounded-full group-data-[state=collapsed]/sidebar:hidden"}),(0,a.jsx)(ek,{}),(0,a.jsx)(eh,{}),(0,a.jsx)(eY,{}),(0,a.jsx)(eQ,{}),(0,a.jsx)(eF,{}),(0,a.jsx)("div",{className:"mt-auto px-1 pb-1",children:(0,a.jsx)(eJ,{})})]}));eX.displayName="FoldersSidebarContent";let e0=()=>{let{isCollapsed:e,setIsCollapsed:t,virtualRef:s}=ea();return(0,a.jsx)("div",{role:"button",className:"group/sidebar scrollbar-none tablet:flex sticky z-20 hidden h-[100dvh] min-h-0 w-(--sidebar-width) shrink-0 flex-col items-stretch gap-2 overflow-y-auto p-3 transition-[width] data-[state=collapsed]:cursor-e-resize",onClick:()=>{e&&t(!1)},"data-state":e?"collapsed":"expanded",ref:s,children:(0,a.jsx)(eX,{})})},e1=e=>{let{children:t}=e,{isCollapsed:s}=ea();return(0,a.jsx)("div",{className:"flex size-full flex-1 [--sidebar-width:--spacing(60)] data-[state=collapsed]:[--sidebar-width:--spacing(16.5)]","data-state":s?"collapsed":"expanded",children:t})},e2=e=>{let{children:t}=e;return(0,a.jsx)(es,{children:(0,a.jsxs)(e1,{children:[(0,a.jsx)(e0,{}),t,(0,a.jsx)(Q,{})]})})};var e5=s(35044),e6=s(45822),e4=s(52948),e3=s(49759),e8=s(62384),e7=s(30650),e9=s(60095),te=s(90820),tt=s(69472);let ts=e=>{let{text:t,visiblePlans:s,variant:r,productHuntUrl:l}=e,{setUpgradeModalParams:n}=(0,tt.i)(),{user:i}=(0,e9.u)(),o=e7.O$.filter(e=>!s.has(e)),d=(0,a.jsxs)(a.Fragment,{children:[r===e3.t.PRODUCT_HUNT&&(0,a.jsx)(p.sb6,{className:"size-6"}),t,r===e3.t.PRODUCT_HUNT?(0,a.jsx)(p.CuX,{className:"size-6"}):(0,a.jsx)(p.vKP,{className:"tablet:block hidden"})]});return(0,a.jsx)(h.$,{variant:"outline",shape:"pill",size:"xs",className:(0,ec.cn)("hover:text-content-fixed-inverse border-(--cta-color) text-(--cta-color) hover:border-(--cta-color) hover:bg-(--cta-color)",{"font-medium":r===e3.t.PRODUCT_HUNT}),style:{"--cta-color":r===e3.t.PRODUCT_HUNT?"#FF6154":"var(--content-brand)"},onClick:l?void 0:()=>{if(localStorage.setItem(eg.C.ADD_TO_CART_CTA,te.J.PROMOTION_BANNER),i)n({isOpen:!0,upgradeablePlanNames:o});else{let e=new URLSearchParams(window.location.search);e.set(e8.u.SHOW_AUTH,"true"),e.set(e8.u.SHOW_UPGRADE_MODAL,"true"),window.history.pushState(null,"","".concat(window.location.pathname,"?").concat(e.toString()))}},asChild:!!l,children:l?(0,a.jsx)(eV.i,{href:l,target:"_blank",rel:"noopener noreferrer",children:d}):d})};var ta=s(34651);let tr=e=>{let{deadline:t}=e,{days:s,hours:r,minutes:l}=(0,ta.useTimer)({expiryTimestamp:new Date(t),onExpire:()=>console.log("Timer expired")});return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("p",{className:"bg-fill-brand-secondary border-border-brand-hover rounded-2.5 text-label-md text-content-secondary border px-2.5 py-1",children:[s,"d"]}),(0,a.jsx)("span",{className:"text-label-md",children:":"}),(0,a.jsxs)("p",{className:"bg-fill-brand-secondary border-border-brand-hover rounded-2.5 text-label-md text-content-secondary border px-2.5 py-1",children:[r.toString().padStart(2,"0"),"h"]}),(0,a.jsx)("span",{className:"text-label-md",children:":"}),(0,a.jsxs)("p",{className:"bg-fill-brand-secondary border-border-brand-hover rounded-2.5 text-label-md text-content-secondary border px-2.5 py-1",children:[l.toString().padStart(2,"0"),"m"]})]})},tl={Root:e=>{let{children:t,open:s,variant:r=e3.t.REGULAR}=e;return(0,a.jsx)("div",{className:(0,ec.cn)("tablet:gap-4 tablet:pr-0 tablet:pl-0 relative flex w-full shrink-0 items-center justify-center gap-1 bg-gradient-to-r pr-8 pl-1 transition-all ease-in",{"h-0 opacity-0":!s,"h-(--promo-banner-height) opacity-100":s,"from-fill-brand-secondary-disabled via-fill-brand-secondary to-fill-brand-secondary-disabled":r===e3.t.REGULAR,"from-[rgba(255,97,84,0.08)] via-[rgba(255,97,84,0.24)] to-[rgba(255,97,84,0.08)] dark:from-[rgba(255,97,84,0.1)] dark:via-[rgba(255,97,84,0.2)] dark:to-[rgba(255,97,84,0.1)]":r===e3.t.PRODUCT_HUNT}),style:{"--promo-banner-height":o},children:t})},Icon:e=>{let{icon:t}=e;return(0,a.jsx)("div",{className:"[&>svg]:size-4.5",dangerouslySetInnerHTML:{__html:t}})},CountdownTimer:e=>{let{deadline:t}=e;return(0,a.jsx)(tr,{deadline:t})},Title:e=>{let{children:t}=e;return(0,a.jsx)("h1",{className:"text-label-md line-clamp-1 font-semibold",children:t})},CTA:e=>{let{text:t,visiblePlans:s,variant:r,productHuntUrl:l}=e;return(0,a.jsx)(ts,{text:t,visiblePlans:s,variant:r,productHuntUrl:l})},Close:e=>{let{onClose:t}=e;return(0,a.jsx)(h.$,{variant:"ghost",size:"icon-xs",className:"tablet:right-1.5 absolute right-0",onClick:t,children:(0,a.jsx)(p.w0d,{})})}},tn=(0,s(55822).v)(e=>({isOpen:!1,setIsOpen:t=>e({isOpen:t})})),ti="promo_banner_closed",to=()=>{let{promotionCampaign:e}=(0,y.bO)(),{data:t,isLoading:s}=(0,e4.aR)(),{activeStripePlanName:r}=(null==t?void 0:t.subscription)?(0,e6.B6)(t.subscription):{},[n,i]=(0,l.useState)(!0),{setIsOpen:o}=tn(),d=(0,l.useMemo)(()=>new Set(e.visibleTo),[e.visibleTo]),c=!s&&!n&&e.isLive&&e.banner&&d.has(null!=r?r:e5.M4.FREE)&&(!e.banner.deadline||new Date(e.banner.deadline)>new Date);(0,l.useEffect)(()=>{i("true"===sessionStorage.getItem(ti))},[]),(0,l.useEffect)(()=>{o(null!=c&&c)},[c,o]);let{title:u,icon:m,ctaText:x,deadline:p,variant:h,productHuntUrl:v}=e.banner,f=p&&!m,b=m&&!p;return(0,a.jsxs)(tl.Root,{open:!!c,variant:h,children:[b&&(0,a.jsx)(tl.Icon,{icon:m}),f&&(0,a.jsx)(tl.CountdownTimer,{deadline:p}),(0,a.jsx)(tl.Title,{children:u}),x&&(0,a.jsx)(tl.CTA,{text:x,visiblePlans:d,variant:h,productHuntUrl:v}),(0,a.jsx)(tl.Close,{onClose:()=>{sessionStorage.setItem(ti,"true"),i(!0),o(!1)}})]})};var td=s(78461),tc=s(60357),tu=s(54359),tm=s(46285),tx=s(70790),tp=s(67026),th=s(324),tv=s(44744);let tf=e=>{var t,s;let{organization:r,description:l,end:n}=e;return(0,a.jsxs)("div",{className:"rounded-4 border-border-primary hover:bg-fill-primary-variant-hover hover:border-border-primary-hover group flex shrink-0 items-center gap-3 overflow-hidden border px-3.5 py-3 transition-colors",children:[(0,a.jsx)(tv.T,{src:null!=(s=null==(t=r.url)?void 0:t.thumbnail)?s:"",itemToHashForPalette:r.id,name:r.name,className:"size-10",avatarFallbackClassName:"text-label-xl"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-body-md text-content-primary line-clamp-1",children:r.name}),(0,a.jsx)("span",{className:"text-content-tertiary text-body-sm",children:l})]}),n]})},tb=()=>{let{selectedOrganization:e,isLoading:t,isError:s}=(0,th.a)();return t?(0,a.jsx)(er.E,{className:"rounded-4 h-17.5"}):s?(0,a.jsx)("div",{className:"text-content-critical text-label-md",children:"An unexpected error occurred"}):e?(0,a.jsx)(tf,{organization:e,description:(0,a.jsxs)(a.Fragment,{children:[e.totalMembers," ",1===e.totalMembers?"member":"members"]})}):(0,a.jsx)("div",{className:"text-content-critical",children:"No team found"})};var tj=s(68302),tg=s(4177);let ty=e=>{let{onEmailTagsChange:t,emailTags:s=[]}=e,[r,n]=(0,l.useState)(""),i=(0,l.useId)();return(0,a.jsxs)("label",{htmlFor:i,className:(0,ec.cn)((0,tj.ei)({size:"md"}),"focus-within:ring-border-inverse flex-wrap items-center gap-1.5 py-1.5",{"px-1.5":s.length>0}),children:[s.map(e=>(0,a.jsxs)("div",{className:"ring-border-secondary aria-[invalid=true]:ring-border-critical aria-[invalid=true]:**:[svg]:text-content-critical text-content-primary aria-[invalid=true]:text-content-critical aria-[invalid=true]:hover:bg-surface-critical hover:bg-fill-secondary inline-flex items-center gap-1 rounded-full py-1 pr-1 pl-2 ring transition-all ring-inset","aria-invalid":!e.isValid,children:[(0,a.jsx)("span",{className:"text-label-sm font-medium",children:e.value}),(0,a.jsx)(h.$,{variant:"ghost",size:"icon-xs",className:"size-5 **:[svg]:size-3.5",onClick:()=>t(s.filter(t=>t.value!==e.value)),children:(0,a.jsx)(p.w0d,{})})]},e.value)),(0,a.jsx)("input",{type:"text",id:i,className:(0,ec.cn)("inline-flex min-w-0 focus-visible:outline-none",{"size-full":0===s.length}),placeholder:s.length>0?"":"Email, comma separated",value:r,onChange:e=>{let a=e.target.value;if((a=a.replace(/[\s,]+/g,",")).includes(",")){let e=a.split(",").map(e=>e.trim()).filter(e=>!!e&&!s.some(t=>t.value===e));e.length>0&&t([...s,...e.map(e=>({value:e,isValid:tg.w.safeParse({email:e}).success}))]),n("")}else n(e.target.value)},onKeyDown:e=>{if("Backspace"===e.key&&""===r)return void t(s.slice(0,-1));if("Enter"!==e.key)return;e.preventDefault();let a=r.trim();a&&!s.some(e=>e.value===a)&&t([...s,{value:a,isValid:tg.w.safeParse({email:a}).success}]),a&&n("")}})]})};var tN=s(25826);let tE=tN.Ay$.object({value:tN.Ay$.string(),isValid:tN.Ay$.boolean()}),t_=tN.Ay$.object({emailTags:tN.Ay$.array(tE)}),tA=e=>{let{children:t}=e,s=(0,u.mN)({resolver:(0,c.u)(t_),defaultValues:{emailTags:[]}});return(0,a.jsx)(f.lV,{...s,children:t})},tT=e=>{let{isInvalid:t}=e,{formMessageId:s}=(0,f.Wd)();return t?(0,a.jsxs)("p",{"data-slot":"form-message",id:s,className:"text-content-critical text-label-sm flex items-center gap-1.5",children:[(0,a.jsx)(p.msl,{className:"size-3.5"}),(0,a.jsx)("span",{children:"Invalid email"})]}):null},tw=()=>{let e=(()=>{let e=(0,u.xW)();if(!e)throw Error("useAddMemberFormContext must be used within a AddMemberFormContext");return e})(),[t,s]=(0,l.useState)(!1),r=(0,H.n)({mutationKey:[Z.b.SEND_INVITATION],mutationFn:async e=>K.o.sendInvitation(e)}),n=(0,j.z)(),{selectedOrganizationId:i,isLoading:o}=(0,F.v)(),{isReachedMaxSeats:d}=(0,tx.$)(),{setUpgradeModalParams:c}=(0,tt.i)(),{fireTeamInviteCreatedEvent:m}=(()=>{let{aggregator:e}=(0,G.p)(),{computeUserAnalyticsInfo:t}=(0,L.U)();return{fireTeamInviteCreatedEvent:(0,l.useCallback)(s=>{let{page:a,userStatus:r,userPlan:l,userPlanPeriod:n,id:i}=t();e.log(P.M.teamInviteCreated.withProperties({invited_users:s,page_name:a,user_account_status:r,user_plan:l,user_plan_period:n,distinct_id:i}))},[e,t])}})(),x=async t=>{try{if(d)return void c({isOpen:!0,upgradeablePlanNames:e7.O$,title:"You have hit your Team limit",description:"Increase your team limits by upgrading your plan"});if(o)return;s(!0);let a=t.emailTags.filter(e=>e.isValid).map(e=>({email:e.value,role:tu.tn.MEMBER}));await r.mutateAsync({orgId:i,invites:a}),m(a.length),e.setValue("emailTags",e.getValues("emailTags").filter(e=>!a.some(t=>t.email===e.value)))}catch(e){n.serviceErrorHandler(e)}finally{s(!1)}};return(0,a.jsx)("form",{onSubmit:e.handleSubmit(x),children:(0,a.jsx)(f.zB,{control:e.control,name:"emailTags",render:e=>{let{field:{onChange:s,value:r}}=e;return(0,a.jsxs)(f.eI,{className:"flex flex-col gap-1.5",children:[(0,a.jsx)(f.lR,{className:"font-normal",children:"Add your collaborators"}),(0,a.jsxs)("div",{className:"flex w-full justify-between gap-1.5",children:[(0,a.jsx)(ty,{onEmailTagsChange:s,emailTags:r}),(0,a.jsx)(h.$,{disabled:!r.some(e=>e.isValid)||t,type:"submit",children:"Invite"})]}),(0,a.jsx)(tT,{isInvalid:r.some(e=>!e.isValid)})]})}})})};var tC=s(66082),tD=s(64446);let tO=e=>{let{invitation:t}=e,s=(0,tD.k)(),{serviceErrorHandler:r}=(0,j.z)(),l=async()=>{if(t.id)try{await s.mutateAsync({invitationId:t.id})}catch(e){r(e)}};return(0,a.jsxs)("div",{className:"rounded-3 flex items-center justify-between gap-2 py-1 pr-3 pl-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"border-content-tertiary size-8 shrink-0 rounded-full border border-dashed"}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"text-content-primary text-label-sm",children:t.email})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.$,{variant:"link-secondary",size:"xs",asChild:!0,translateOnActive:!1,className:"cursor-default",children:(0,a.jsx)("div",{children:"Pending"})}),(0,a.jsx)(h.$,{variant:"outline",size:"xs",onClick:l,disabled:s.isPending,children:"Cancel"})]})]},t.id)},tI=()=>{let{data:e,isLoading:t,isError:s}=(0,tC.B)();if(t)return(0,a.jsx)(er.E,{className:"rounded-4 h-17.5"});if(s)return(0,a.jsx)("div",{className:"text-content-critical text-label-md",children:"An unexpected error occurred"});let r=null==e?void 0:e.data.invitations;return r&&0!==r.length?(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-label-sm",children:"People invited"}),(0,a.jsx)("div",{className:"flex max-h-42 flex-col gap-2 overflow-y-auto",children:r.map(e=>(0,a.jsx)(tO,{invitation:e},e.id))})]}):null},tS=()=>{let{invitationLink:e,isLoading:t,isError:s}=(()=>{let e=(0,tm.l)({role:tu.tn.MEMBER});return{isLoading:e.isLoading,isError:e.isError,invitationLink:(()=>{if(e.isLoading||e.isError||!e.data)return null;let t=e.data.data.invitationToken;return"".concat("https://www.imagine.art","/join/").concat(t)})()}})(),{isReachedMaxSeats:r}=(0,tx.$)(),[,l]=(0,tc.Cj)(),n=async()=>{if(e)try{await l(e),m.oR.success("Invitation link copied to clipboard")}catch(e){m.oR.error("Failed to copy invitation link")}};return t?(0,a.jsx)(er.E,{className:"rounded-2.5 h-8 w-full"}):s?(0,a.jsx)("div",{className:"text-content-critical text-label-sm",children:"An unexpected error occurred"}):r?(0,a.jsx)("div",{className:"text-content-critical text-label-md",children:"To invite members, please upgrade your plan."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-content-tertiary text-label-sm",children:e}),(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:n,children:[(0,a.jsx)(p.qYV,{className:"stroke-[1.6]"}),(0,a.jsx)("span",{children:"Copy link"})]})]})},tR=()=>{let e=(0,tp.S)();return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)(v.c7,{className:"flex flex-col items-start gap-1 border-b-0 p-0",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)(v.L3,{className:"text-content-primary text-heading-md font-semibold",children:"Add a member"}),(0,a.jsx)(v.De,{})]}),(0,a.jsx)(v.rr,{className:"text-content-tertiary text-body-sm",children:"Add members to your team"})]}),(0,a.jsx)(tb,{}),(0,a.jsx)(tw,{}),(0,a.jsx)(tI,{}),!e&&(0,a.jsx)(v.Es,{className:"flex items-center justify-between gap-2 border-t-0",children:(0,a.jsx)(tS,{})})]})},tk=()=>{let{isOpen:e,setDialogOpen:t}=(0,B.s)(U.D.ADD_MEMBER_MODAL);return(0,a.jsx)(v.lG,{open:e,onOpenChange:t,children:(0,a.jsx)(v.Cf,{className:"w-full max-w-139 gap-6 p-6",children:(0,a.jsx)(tR,{})})})},tM=()=>{let{isOpen:e,setDialogOpen:t}=(0,B.s)(U.D.ADD_MEMBER_MODAL);return(0,a.jsx)(b.cj,{open:e,onOpenChange:t,children:(0,a.jsx)(b.h,{className:"rounded-t-5 flex max-h-[80dvh] flex-col gap-6 overflow-y-auto px-4 py-6",side:"bottom",children:(0,a.jsx)(tR,{})})})},tP=()=>{let e=(0,N.jj)();return(0,a.jsx)(tA,{children:e?(0,a.jsx)(tM,{}):(0,a.jsx)(tk,{})})};var tL=s(76630);let tz=tN.Ay$.object({name:tN.Ay$.string().min(1,{message:"Name is required"}),thumbnail:tN.Ay$.string().optional().nullable()}),tF=e=>{let{children:t}=e,s=(0,u.mN)({resolver:(0,c.u)(tz),defaultValues:{name:"",thumbnail:null}});return(0,a.jsx)(f.lV,{...s,children:t})};var tV=s(6737);let tG=()=>{let{closeDialog:e}=(0,B.s)(U.D.CREATE_TEAM_MODAL),{openDialog:t}=(0,B.s)(U.D.ADD_MEMBER_MODAL),s=(()=>{let e=(0,u.xW)();if(!e)throw Error("useCreateTeamFormContext must be used within a CreateTeamFormContext");return e})(),[r,n]=(0,l.useState)(),{mutateAsync:i}=(0,H.n)({mutationKey:[Z.b.CREATE_ORGANIZATION],mutationFn:async e=>K.o.createOrganization(e)}),o=(0,l.useCallback)(async e=>{if(null==e.thumbnail)throw Error("Thumbnail is required");let t=await (0,tV.je)(e.thumbnail);return{name:e.name,thumbnail:t}},[]),{serviceErrorHandler:d}=(0,j.z)(),{selectOrganization:c}=(0,tL.E)(),[x,b]=(0,l.useState)(!1),g=async a=>{try{var r;b(!0);let l=await o(a),d=await i(l);c({organizationId:null!=(r=d.data.orgId)?r:null}),t(),m.oR.success("Team created successfully"),s.reset(),n(void 0),e()}catch(e){b(!1),d(e)}};return(0,a.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:s.handleSubmit(g),children:[(0,a.jsxs)(v.c7,{className:"flex flex-col items-start gap-1 border-b-0 p-0",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)(v.L3,{className:"text-content-primary text-heading-md font-semibold",children:"Create a team"}),(0,a.jsx)(v.De,{})]}),(0,a.jsx)(v.rr,{className:"text-content-tertiary text-body-sm",children:"Choose a unique name for your team."})]}),(0,a.jsx)(f.zB,{control:s.control,name:"thumbnail",render:e=>{let{field:t}=e;return(0,a.jsxs)(f.eI,{className:"flex flex-col gap-1.5",children:[(0,a.jsx)(f.lR,{className:"text-label-sm font-normal",children:"Add thumbnail"}),(0,a.jsx)(f.MJ,{children:(0,a.jsx)("div",{className:"h-40 w-full",children:t.value?(0,a.jsx)(D.r,{image:t.value,onDelete:()=>{t.value&&URL.revokeObjectURL(t.value),s.setValue("thumbnail",null)},crop:r,setCrop:n}):(0,a.jsx)(C.W,{renderLabel:e=>{let{maxSizeFormatted:t}=e;return(0,a.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-3",children:[(0,a.jsx)(p.kAu,{className:"text-border-brand size-6 stroke-[1.5]"}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("span",{className:"text-content-secondary text-label-md font-medium",children:"UPLOAD IMAGE OR DRAG & DROP"}),(0,a.jsxs)("span",{className:"text-content-tertiary text-label-sm",children:["JPG, PNG, WEBP file, up to ",t]})]})]})},labelClassName:"h-40",maxSize:_.Nm,maxSizeFormatted:"30MB",onDropAccepted:e=>{let s=e[0];if(s){let e=URL.createObjectURL(s);t.onChange(e)}else m.oR.error("No file selected")},maxFiles:1,multiple:!1})})})]})}}),(0,a.jsx)(f.zB,{control:s.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(f.eI,{className:"flex flex-col gap-1.5",children:[(0,a.jsx)(f.lR,{className:"font-normal",children:"Name"}),(0,a.jsx)(f.MJ,{children:(0,a.jsx)(A.p,{placeholder:"Type name here",size:"lg",...t})}),(0,a.jsx)(f.C5,{})]})}}),(0,a.jsxs)(v.Es,{className:"flex items-center justify-end gap-2 border-t-0",children:[(0,a.jsx)(h.$,{variant:"secondary",onClick:e,children:"Cancel"}),(0,a.jsxs)(h.$,{variant:"primary",type:"submit",disabled:x,children:["Create ",(0,a.jsx)(p.JLc,{})]})]})]})},tU=()=>{let{isOpen:e,setDialogOpen:t}=(0,B.s)(U.D.CREATE_TEAM_MODAL);return(0,a.jsx)(v.lG,{open:e,onOpenChange:t,children:(0,a.jsx)(v.Cf,{className:"w-full max-w-139 gap-6 p-6",children:(0,a.jsx)(tG,{})})})},tB=()=>{let{isOpen:e,setDialogOpen:t}=(0,B.s)(U.D.CREATE_TEAM_MODAL);return(0,a.jsx)(b.cj,{open:e,onOpenChange:t,children:(0,a.jsx)(b.h,{className:"rounded-t-5 flex max-h-[80dvh] flex-col gap-6 overflow-y-auto px-4 py-6",side:"bottom",children:(0,a.jsx)(tG,{})})})},tJ=()=>{let e=(0,N.jj)();return(0,a.jsx)(tF,{children:e?(0,a.jsx)(tB,{}):(0,a.jsx)(tU,{})})};var t$=s(87606),tH=s(378),tZ=s(54852),tK=s(82915);let tW=e=>{let{orgId:t,isJoined:s,isRequested:r}=e,l=(()=>{let e=(0,t$.jE)();return(0,H.n)({mutationKey:[Z.b.JOIN_ORGANIZATION],mutationFn:async e=>K.o.joinOrganization(e),onSuccess:()=>{e.invalidateQueries({queryKey:(0,tH.f)()})}})})(),{serviceErrorHandler:n}=(0,j.z)(),i=(0,t$.jE)();return(0,a.jsxs)(h.$,{variant:"secondary-variant",className:"tablet:hidden ml-auto group-hover:inline-flex",onClick:()=>{l.mutate({orgId:t},{onSuccess:()=>{m.oR.success("Join request sent successfully"),i.invalidateQueries({queryKey:(0,tK.g)()})},onError:e=>{n(e)}})},disabled:s||l.isPending||r,children:[(0,a.jsx)("span",{children:s?"Joined":r?"Requested":"Join"}),!r&&(0,a.jsx)(p.vKP,{})]})},tq=()=>{var e,t,s,r,l;let{data:n,isLoading:i,isError:o}=(0,tZ.V)(),{data:d}=(0,tH.M)(),{data:c,isLoading:u,isError:m}=(0,tK.p)(),x=null!=(s=null==n?void 0:n.data.organizations)?s:[],p=null!=(r=null==d?void 0:d.data.organizations)?r:[],h=null!=(l=null==c||null==(t=c.data)||null==(e=t.joinRequests)?void 0:e.reduce((e,t)=>(e[t.orgId]=!0,e),{}))?l:{},v=new Map(p.map(e=>[e.id,!0]));return i||u?(0,a.jsx)(er.E,{className:"rounded-4 h-17.5"}):o||m?(0,a.jsx)("div",{className:"text-content-critical text-label-md",children:"An unexpected error occurred"}):0===x.length?(0,a.jsx)("div",{className:"text-content-se text-body-md",children:"No existing teams found. Try creating a new team."}):(0,a.jsx)("div",{className:"flex max-h-70 flex-col items-stretch gap-4 overflow-y-auto",children:x.map(e=>{var t,s;return(0,a.jsx)(tf,{organization:e,end:(0,a.jsx)(tW,{orgId:e.id,isRequested:null!=(t=h[e.id])&&t,isJoined:null!=(s=v.get(e.id))&&s}),description:(0,a.jsxs)(a.Fragment,{children:[e.totalMembers," ",1===e.totalMembers?"member":"members"]})},e.id)})})},tQ=()=>{let{closeDialog:e}=(0,B.s)(U.D.JOIN_TEAM_MODAL),{openDialog:t}=(0,B.s)(U.D.CREATE_TEAM_MODAL);return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)(v.c7,{className:"flex flex-col items-start gap-1 border-b-0 p-0",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)(v.L3,{className:"text-content-primary text-heading-md font-semibold",children:"Join a team"}),(0,a.jsx)(v.De,{})]}),(0,a.jsx)(v.rr,{className:"text-content-tertiary text-body-sm",children:"Some people from your organization are already using Imagine. Join a workspace to start collaborating."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)(tq,{}),(0,a.jsxs)(h.$,{variant:"outline",className:"w-fit",onClick:()=>{t(),e()},children:[(0,a.jsx)(p.c11,{}),(0,a.jsx)("span",{children:"Add new team"})]})]}),(0,a.jsxs)(v.Es,{className:"flex items-center justify-end gap-2 border-t-0",children:[(0,a.jsx)(h.$,{variant:"secondary",onClick:e,children:"Cancel"}),(0,a.jsxs)(h.$,{variant:"primary",onClick:e,children:["Done ",(0,a.jsx)(p.JLc,{})]})]})]})},tY=()=>{let{isOpen:e,setDialogOpen:t}=(0,B.s)(U.D.JOIN_TEAM_MODAL);return(0,a.jsx)(v.lG,{open:e,onOpenChange:t,children:(0,a.jsx)(v.Cf,{className:"w-full max-w-139 gap-6 p-6",children:(0,a.jsx)(tQ,{})})})},tX=()=>{let{isOpen:e,setDialogOpen:t}=(0,B.s)(U.D.JOIN_TEAM_MODAL);return(0,a.jsx)(b.cj,{open:e,onOpenChange:t,children:(0,a.jsx)(b.h,{className:"rounded-t-5 flex max-h-[80dvh] flex-col gap-6 overflow-x-hidden overflow-y-auto px-4 py-6",side:"bottom",children:(0,a.jsx)(tQ,{})})})},t0=()=>(0,N.jj)()?(0,a.jsx)(tX,{}):(0,a.jsx)(tY,{}),t1=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t0,{}),(0,a.jsx)(tJ,{}),(0,a.jsx)(tP,{})]});var t2=s(22562);let t5=e=>{let{children:t}=e,{isOpen:s}=tn();return(0,a.jsx)("div",{className:"flex min-h-[calc(100dvh-var(--navbar-height)-var(--promo-banner-height))] flex-1",style:{"--promo-banner-height":s?o:"0px"},children:t})},t6=l.memo(e=>{let{children:t}=e,{parentRef:s}=(0,t2.S)();return(0,a.jsx)("main",{className:"h-[100dvh] flex-1 overflow-x-hidden overflow-y-auto",id:n.G.MAIN_SCROLL_LAYOUT,style:{"--navbar-height":"68px"},ref:s,children:(0,a.jsxs)("div",{id:n.G.MAIN_NAV_DIV,className:"flex flex-1 flex-col",children:[(0,a.jsx)(to,{}),(0,a.jsx)(td.V,{}),(0,a.jsx)(t5,{children:t}),(0,a.jsx)(t1,{})]})})});t6.displayName="MainNavigationLayoutContent";let t4=e=>{let{children:t}=e;switch((0,r.useSelectedLayoutSegment)()){case i.Z.WITH_FOLDERS_SIDEBAR:case i.Z.FLOW_DASHBOARD:return(0,a.jsx)(e2,{children:(0,a.jsx)(t6,{children:t})});default:return(0,a.jsx)(t6,{children:t})}}},64446:(e,t,s)=>{"use strict";s.d(t,{k:()=>n});var a=s(16258),r=s(55436),l=s(29551);let n=()=>(0,a.n)({mutationKey:[r.b.DELETE_INVITATION],mutationFn:async e=>l.o.deleteInvitation(e)})},69825:(e,t,s)=>{"use strict";s.d(t,{d:()=>p});var a=s(87606),r=s(16258),l=s(19136),n=s(55436),i=s(47672),o=s(46586),d=s(29551),c=s(30744),u=s(13158);let m=e=>{let{parentId:t,isPersonal:s,orgId:a}=e;return[...(0,c.u)({parentId:t,isPersonal:s,orgId:a}),...(0,u.W)({parentId:t,isPersonal:s,orgId:a})]};var x=s(90916);let p=()=>{let e=(0,a.jE)(),{selectedFolder:t}=(0,x.X)(),{selectedOrganizationId:s}=(0,i.v)();return(0,r.n)({mutationKey:[n.b.MOVE_ORGANIZATION_ASSETS],mutationFn:async e=>d.o.moveOrganizationAssets(e),onMutate:async a=>{var r,n;let i=null==t?void 0:t.uuid,d=(null==t?void 0:t.type)===l.KJ.DRAFT,c=null==t?void 0:t.isPersonal,u=null!=(r=a.parentId)?r:null,x=new Set(a.ids),p=!1;if(u&&i){let t=(0,o.Y)({isPersonal:!0,orgId:s}),a=(0,o.Y)({isPersonal:!1,orgId:s}),r=e.getQueryData(t),l=e.getQueryData(a),i=null!=(n=null==r?void 0:r.data.assets.find(e=>e.uuid===u))?n:null==l?void 0:l.data.assets.find(e=>e.uuid===u);i&&(p=i.isPersonal)}let h=m({parentId:i,isPersonal:null!=c&&c,orgId:s}),v=m({parentId:u,isPersonal:p,orgId:s}),f=new Map,b=[];for(let t of h){let s=e.getQueryData(t);if(s)if("data"in s){let e=s.data.assets.filter(e=>x.has(e.uuid));b.push(...e)}else for(let e of s.pages){let t=e.data.assets.filter(e=>x.has(e.uuid));b.push(...t)}}let j=Array.from(new Map(b.map(e=>[e.uuid,e])).values());if(!d||p!==c&&d)for(let t of h){let s=e.getQueryData(t);s&&(f.set(t,s),e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>!x.has(e.uuid))}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>!x.has(e.uuid))}}))}))}for(let t of v){let s=e.getQueryData(t);s&&f.set(t,s),e.setQueryData(t,e=>{if(!e)return e;if("data"in e){let t=j.map(e=>({...e,parentId:u,isPersonal:p})),s=new Set(e.data.assets.map(e=>e.uuid)),a=t.filter(e=>!s.has(e.uuid));return{...e,data:{...e.data,assets:[...a,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],s=j.map(e=>({...e,parentId:u,isPersonal:p})),a=new Set(t.data.assets.map(e=>e.uuid)),r=s.filter(e=>!a.has(e.uuid));return{...e,pages:[{...t,data:{...t.data,assets:[...r,...t.data.assets]}},...e.pages.slice(1)]}})}return{previousData:f}},onError:(t,s,a)=>{if(null==a?void 0:a.previousData)for(let[t,s]of a.previousData.entries())e.setQueryData(t,s)}})}},70958:(e,t,s)=>{Promise.resolve().then(s.bind(s,22562)),Promise.resolve().then(s.bind(s,63004))},79104:(e,t,s)=>{"use strict";s.d(t,{L:()=>a});let a=async e=>{let{imageUrl:t,crop:s,quality:a=.95}=e;return new Promise((e,r)=>{let l=new Image;l.crossOrigin="anonymous",l.onload=()=>{try{let t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw Error("Failed to get canvas context");let i=s.x/100*l.naturalWidth,o=s.y/100*l.naturalHeight,d=s.width/100*l.naturalWidth,c=s.height/100*l.naturalHeight;t.width=d,t.height=c,n.drawImage(l,i,o,d,c,0,0,d,c),t.toBlob(t=>{t?e(t):r(Error("Failed to create blob from canvas"))},"image/webp",a)}catch(e){r(e)}},l.onerror=()=>{r(Error("Failed to load image"))},l.src=t})}},82915:(e,t,s)=>{"use strict";s.d(t,{g:()=>o,p:()=>d});var a=s(67933),r=s(27338),l=s(60095),n=s(34267),i=s(29551);let o=()=>[n.c.ORGS_BASE_TAG,n.c.USER_JOIN_REQUESTS],d=function(){let{enabled:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{user:s}=(0,l.u)();return(0,a.I)({queryKey:o(),staleTime:r.I5,queryFn:()=>i.o.getUserJoinRequests({...t,pageSize:500}),enabled:!!s&&(null==e||e)})}},96578:(e,t,s)=>{"use strict";s.d(t,{i:()=>u});var a=s(54568),r=s(7620),l=s(51785),n=s(54140),i=s(38648),o=s(33029),d=s(19603),c=s(11386);let u=(0,l.F)(e=>{let{call:t,title:s,onCheckedChange:l,description:u,checkboxText:m,containerClassName:x,onConfirm:p=()=>Promise.resolve(),onCancel:h=()=>Promise.resolve(),cancelButtonText:v="Cancel",confirmButtonText:f="Continue",variant:b="primary",disableConfirmButton:j=!1,disableCancelButton:g=!1,dialogContentProps:y={},containerAttributes:N}=e,[E,_]=(0,r.useState)(!1),[A,T]=(0,r.useState)(!1);return(0,a.jsx)(o.lG,{defaultOpen:!0,children:(0,a.jsxs)(o.Cf,{onInteractOutside:()=>{t.end(!1)},onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),className:(0,c.cn)("bg-background ring-border-primary rounded-4 size-full h-fit max-w-[min(calc(100vw-24px),460px)] flex-col items-end gap-0 ring-1 drop-shadow-sm",x),...y,...N,children:[(0,a.jsxs)(o.c7,{className:"flex items-center justify-between self-stretch border-none p-3 pb-2 pl-4",children:[s&&(0,a.jsx)(o.L3,{className:"text-label-xl text-content-primary font-medium",children:s}),(0,a.jsx)(d.s,{children:(0,a.jsxs)(o.rr,{children:["Confirmation modal for ",s||"action"]})}),(0,a.jsx)(o.De,{})]}),(0,a.jsxs)(o.R4,{className:"flex flex-col items-start justify-between gap-4 self-stretch p-4 pt-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[u&&(0,a.jsx)("p",{className:"text-body-md text-content-secondary",children:u}),l&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.S,{checked:A,onCheckedChange:e=>T(e)}),(0,a.jsx)("p",{className:"text-content-secondary text-body-sm font-medium",children:m})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between gap-2 self-stretch",children:(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-end gap-2",children:[(0,a.jsx)(n.$,{size:"md",variant:"outline",className:"w-[120px]",onClick:async()=>{await h(),t.end(!1)},disabled:g,children:v}),(0,a.jsx)(n.$,{size:"md",variant:b,className:"min-w-[120px]",onClick:async()=>{_(!0),l&&await l(A),await p(),t.end(!0)},disabled:j||E,children:f})]})})]})]})})})}}]);